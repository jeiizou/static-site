{
    "version": "https://jsonfeed.org/version/1",
    "title": "wiki & blog Blog",
    "home_page_url": "https://wiki.jeiizou.site/blog",
    "description": "wiki & blog Blog",
    "items": [
        {
            "id": "/2022/03/01/前端包管理机制简述",
            "content_html": "<blockquote><p>npm, yarn, pnpm 相关机制和原理的介绍</p></blockquote><h1>前端包管理机制简述</h1><h2 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"从packagejson文件说起\">从<code>package.json</code>文件说起<a class=\"hash-link\" href=\"#从packagejson文件说起\" title=\"标题的直接链接\">​</a></h2><p><code>package.json</code>是前端领域中用来描述一个包信息的描述文件. 其中, 只有两个字段是必填的:</p><ul><li><code>name</code>: 模块名称, 可以用<code>validate-npm-package-name</code>来检测包名是否合法, 因为包名是唯一的, npm也提供<code>npm view packageName</code>来检测包名是否被占用.</li><li><code>version</code>: 模块版本, npm的模块版本遵循<a href=\"https://semver.org/lang/zh-CN/\" target=\"_blank\" rel=\"noopener noreferrer\"><code>SemVer</code></a>规范, 即<code>主版本号.此版本号.修订号</code>. 可以使用<code>semver</code>包来进行比较版本, 提取版本信息等操作. </li></ul><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"依赖管理\">依赖管理<a class=\"hash-link\" href=\"#依赖管理\" title=\"标题的直接链接\">​</a></h3><p>在<code>package.json</code>中, 另外比较重要的配置就是依赖的管理了.</p><p>依赖配置相关的字段主要有下面这些:</p><ul><li><code>dependencies</code>: 指定了项目运行所依赖的模块</li><li><code>devDependencies</code>: 一些只用于开发时的包, 可以用该字段进行管理, 在运行时不会用到的依赖,比如Eslint等等. 将这些依赖保存在次数,可以避免在生产环境被安装.</li><li><code>peerDependencies</code>: 用于指定你正在开发的模块所依赖的模块的版本, 以及用户安装的依赖包版本的兼容性. 在npm3以后就不会强制安装peerDependencies中依赖的版本, 而是抛出一个warn. 不影响继续安装其他的依赖</li><li><code>bundledDependencies</code>: 提供一个包名的数组, 会在发布的时候被一起打包</li><li><code>optionalDependencies</code>: 如果你的依赖是可有可无的,并且又在安装的时候无法获取到,那么就可以把依赖放在这里,npm在安装的时候就不会报错了.</li></ul><p>依赖中的每一项都会按照版本控制的规则进行控制, 我们常见的版本控制的写法有这么几种:</p><ul><li><code>\"xxx\": \"1.0.0\"</code>: 固定版本号</li><li><code>\"xxx\": \"*\"</code>: 任意的版本号</li><li><code>\"xxx\": \"16.x\"</code>: 表示匹配主要的版本号(这里即<code>16.0.0&lt;= version &lt;17.0.0</code>)</li><li><code>\"xxx\": \"16.3.x\"</code>: 表示匹配主要版本和次要版本(这里即<code>16.3.0 &lt;= version &lt;16.4.0</code>)</li><li><code>\"xxx\": \"~1.0.0\"</code>: 保持主版本号和次要版本号不变的情况下, 安装小版本中的最新版本</li><li><code>\"xxx\": \"^1.0.0\"</code>: 保持主版本号不变的情况下, 安装次要版本号和修订版本号为最新的版本</li></ul><p>这里<code>^</code>是<code>npm install</code>的时候采用的默认的安装版本方式.</p><p>另外, 当主版本号是<code>0</code>的时候就会被认为是一个不稳定版本, 版本控制的逻辑有所不同. </p><ul><li>如果主要版本和次要版本都是0, 那么<code>~0.0.z</code>和<code>^0.0.z</code>都会直接被当做固定版本.</li><li>如果主要版本为0, 那么<code>^0.y.z</code>和<code>~0.y.z</code>相同, 只保持<code>z</code>为最新的版本</li></ul><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"依赖锁定\">依赖锁定<a class=\"hash-link\" href=\"#依赖锁定\" title=\"标题的直接链接\">​</a></h3><p>在一些场景下, 我们不希望依赖被更新, 所以会在<code>package.json</code>的同级目录下, 生成一个<code>lock</code>文件.</p><p>这个文件的作用是: 在不执行手动更新的情况下, 每次都安装固定的版本, 从而保证每次都使用一致的依赖.</p><p>在使用<code>package-lock</code>的情况下要确保npm的版本在<code>5.6</code>以后以获得比较稳定的版本控制. </p><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"升级依赖\">升级依赖<a class=\"hash-link\" href=\"#升级依赖\" title=\"标题的直接链接\">​</a></h3><p>使用<code>npm outdated</code>可以列出所有依赖的最新版本情况的表格, 包名会渲染到不同的颜色:</p><ul><li>黄色: 不符合我们指定的版本范围, 不需要升级</li><li>红色: 符合我们指定的语义化版本范围, 需要升级</li></ul><p>然后指定<code>npm update</code>就会自动升级所有的红色依赖. </p><h2 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"npm的包管理机制\">npm的包管理机制<a class=\"hash-link\" href=\"#npm的包管理机制\" title=\"标题的直接链接\">​</a></h2><p>在早期的npm包管理中, npm会简单粗暴的, 把所有依赖以递归的方式, 严格按照<code>package.json</code>中的结构以及子依赖包的<code>package.json</code>结构安装到他们各自的<code>node_module</code>中. 直到子依赖包不再依赖其他的模块. </p><p><img loading=\"lazy\" alt=\"alt\" src=\"/assets/images/2021-09-21-23-29-51-7a521c7e71a5e45e3ee3b60c97af881f.png\" width=\"1166\" height=\"1046\" class=\"img_SmpS\"></p><p>虽然这种管理方式, 对于依赖的层级看起来非常清晰, 但是也会存在依赖冗余的问题. 比如两个子依赖都依赖同一个项目, 那么这个项目会被安装两次, 并且整个项目的嵌套层级非常深.</p><p>为了解决这个问题, npm在3.x对嵌套结构进行了打平, 也就是说, 安装模块的时候, 会把直接依赖和子依赖以及子依赖的依赖都优先安装在<code>node_modules</code>的根目录下面.</p><p><img loading=\"lazy\" src=\"/assets/images/2021-09-22-11-13-44-900c9e8b9a93fe303c923946bedf7e99.png\" width=\"2084\" height=\"570\" class=\"img_SmpS\"></p><p>假如, A依赖包和B依赖包都依赖项目C, 并且依赖了不同的版本, 那么在安装到这个模块的时候:</p><ul><li>npm会判断已经安装的模块是否符合版本范围, 符合则跳过</li><li>不符合则在当前模块的<code>node_modules</code>下安装该模块.</li></ul><p>此时, 我们可能会得到这样的目录结构:</p><p><img loading=\"lazy\" src=\"/assets/images/2021-09-22-11-24-01-3133f785f9cc35143aabcb930e50b352.png\" width=\"2016\" height=\"1148\" class=\"img_SmpS\"></p><p>对应这样的目录结构, 当我们去搜索一个模块的时候, 对应的查找流程就是这样的:</p><ol><li>在当前模块的路径下搜索</li><li>在当前模块的<code>node_modules</code>路径下搜索</li><li>在上级模块的<code>node_modules</code>路径下搜索</li><li>...</li><li>直到在全局路径中的<code>node_modules</code>路径下搜索</li></ol><p>在这种模式下, 我们解决了部分的模块依赖问题, 但是也带来了新的问题.</p><p>在<code>npm install</code>的时候, 是按照<code>package.json</code>中的模块顺序来依次的解析模块和安装依赖的, 也就是说, 模块的排列顺序就决定了最终生成的<code>node_modules</code>的目录结构.</p><p>比如, 当你的A依赖包和B依赖包都依赖C的不同版本, 那么<code>node_modules</code>中, 首层的C依赖的版本, 就取决于A和B在<code>package.json</code>中的先后顺序. </p><p>如果是先B后A:</p><p><img loading=\"lazy\" src=\"/assets/images/2021-09-22-11-24-01-3133f785f9cc35143aabcb930e50b352.png\" width=\"2016\" height=\"1148\" class=\"img_SmpS\"></p><p>如果是先A后B:</p><p><img loading=\"lazy\" src=\"/assets/images/2021-09-22-11-37-11-8aa3042ba8cb7234d8cc93f57c8ef37f.png\" width=\"2054\" height=\"1074\" class=\"img_SmpS\"></p><p>此外, 如果我们只在<code>package.json</code>中锁定大版本, 那么某些依赖包的小版本更新后, 同样会造成依赖结构的变化.</p><p>这种情况下, 我们就必须借助<code>package-lock.json</code>文件, 把所有的依赖版本确定下来, 这样才能固定<code>node_modules</code>的层级结构.</p><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"package-lockjson文件结构\"><code>package-lock.json</code>文件结构<a class=\"hash-link\" href=\"#package-lockjson文件结构\" title=\"标题的直接链接\">​</a></h3><p><img loading=\"lazy\" src=\"/assets/images/2021-09-22-14-12-19-3425767b3a51a4ee84a952d7d2c445be.png\" width=\"2406\" height=\"640\" class=\"img_SmpS\"></p><p>注意, 这里并不是所有子依赖都会有<code>dependencies</code>属性的, 只有子依赖和当前已经安装的依赖发生冲突之后, 才会有这个属性. </p><p>这样依赖, lock文件中的层级结构和实际的<code>node_modules</code>文件就是一一对应的, 以保证每次<code>npm install</code>生成的<code>node_modules</code>一样的层级结构. </p><p><code>lock</code>还有一个好处, 因为已经缓存了每个包的具体的版本和下载的链接, 所以就不需要再去远程仓库进行查询, 直接在安装完成后, 进入文件完整性校验即可. </p><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"npm本地缓存\">npm本地缓存<a class=\"hash-link\" href=\"#npm本地缓存\" title=\"标题的直接链接\">​</a></h3><p>在使用<code>npm install</code>安装完依赖后, <code>npm</code>会在本地的缓存目录缓存一遍这些包.</p><p>我们可以通过<code>npm config get cache</code>查询到缓存所在的目录.</p><p>一般会在用户目录下<code>.npm/_cacache</code>目录下面, 这个目录下面存在两个目录:</p><ul><li><code>content-v2</code>: 存储<code>tar</code>包的缓存</li><li><code>index-v5</code>: 存储<code>tar</code>包的hash</li></ul><p><code>npm</code>在执行安装的时候, 会根据<code>lock</code>文件中的<code>intergrity</code>, <code>version</code>, <code>name</code>生成一个唯一的<code>key</code>对应到<code>index-v5</code>目录下面的缓存记录, 从而找到<code>tar</code>包的<code>hash</code>, 然后根据<code>hash</code>去缓存中找到对应的<code>tar</code>包直接使用.</p><blockquote><p>在<code>npm v5</code>之前, 是直接通过<code>{cache}/{name}/{version}</code>这样的结构表示的.</p></blockquote><p>常用的用于缓存的<code>npm</code>命令有:</p><ul><li><code>npm cache clean</code>: 清除缓存, 为了保证缓存数据的完整性, 一般会加上<code>--force</code>参数</li><li><code>npm cache verify</code>: 验证缓存数据的有效性和完整性, 清理垃圾数据</li></ul><p>基于缓存, npm提供了离线安装模式:</p><ul><li><code>--perfer-offline</code>: 优先使用缓存, 如果没有则从远程仓库下载</li><li><code>--perfer-online</code>: 优先使用网络数据, 如果网络请求失败, 再使用缓存数据</li><li><code>--offline</code>: 不请求网络, 直接使用缓存数据, 一旦缓存不存在, 就安装失败</li></ul><h2 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"yarn的包管理机制yarn1\">yarn的包管理机制(yarn1)<a class=\"hash-link\" href=\"#yarn的包管理机制yarn1\" title=\"标题的直接链接\">​</a></h2><p>yarn出现在2016年, 当时npm还处于v3版本, 也就是简单粗暴的递归模式. 没有扁平化依赖, 没有lock文件. yarn针对原来npm的缺陷提出了自己的解决办法, 并对npm后续的更新造成了深刻的影响.</p><p>yarn的特性大致有这么一些:</p><ul><li>生成<code>yarn.lock</code>: 明确依赖版本和依赖结构, 在任何环境下都能得到一致的依赖结构</li><li>扁平化安装: 将依赖包的不同版本, 按照一定策略归化为一定的版本范围</li><li>使用并发请求: 类似并发连接池</li><li>引入了包缓存机制.</li></ul><p>我们这里讨论的是<code>yarn1</code>的版本管理模式.</p><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"yarnlock版本锁定\"><code>yarn.lock</code>版本锁定<a class=\"hash-link\" href=\"#yarnlock版本锁定\" title=\"标题的直接链接\">​</a></h3><p>与<code>npm</code>的<code>package-lock.json</code>不同, <code>yarn.lock</code>使用的是一种自定义的文件格式.</p><p>除此之外, <code>yarn.lock</code>中子依赖的版本号是不固定的, 这就意味着单独的<code>yarn.lock</code>是没有办法确定<code>node_modules</code>的目录结构的, 还需要和<code>package.json</code>文件组合. 而<code>package-lock.json</code>则只需要它自己就可以了.</p><p><code>yarn.lock</code>的文件内容看起来像这样:</p><div class=\"language-txt codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-txt codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"># THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"># yarn lockfile v1</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">\"@tootallnate/once@1\":</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  version \"1.1.2\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  resolved \"https://registry.yarnpkg.com/@tootallnate/once/-/once-1.1.2.tgz#ccb91445360179a04e7fe6aff78c00ffc1eeaf82\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  integrity sha512-RbzJvlNzmRq5c3O09UipeuXno4tA1FE6ikOjxZK0tuxVv3412l64l5t1W5pj4+rJq9vpkm/kwiR07aZXnsKPxw==</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">address@&gt;=0.0.1, address@^1.0.0:</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  version \"1.1.2\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  resolved \"https://registry.yarnpkg.com/address/-/address-1.1.2.tgz#bf1116c9c758c51b7a933d296b72c221ed9428b6\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  integrity sha512-aT6camzM4xEA54YVJYSqxz1kv4IHnQZRtThJJHhUMRExaU5spC7jX5ugSwTaTgJliIgs4VhZOk7htClvQ/LmRA==</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>你可以发现, 在<code>yarn.lock</code>文件中, 每个包的版本是一个逗号拼接的数组, 他表示所有的依赖该包的范围. 每个包下面都有对应的字段, 这些字段的含义和<code>package-lock.json</code>中的定义是类似的:</p><ul><li>version: 符合包的语义化版本的确切的一个版本</li><li>resolved: 记录包的地址, 此外, hash中的值是<code>shasum</code></li><li>dependencies: 记录当前包的依赖</li></ul><p>yarn会把所有包的依赖提升到顶层去. 对于可以合并的同名依赖, 就用逗号分隔, 作为顶层的一个key, 对于不能合并的, 则视为两个独立的顶层Key. </p><p>在具体的<code>node_modules</code>文件中, 则只会出现最新版本的包.</p><p>比如说, 我们现在的项目中依赖同一个包的两个版本:</p><div class=\"language-txt codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-txt codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">fs-extra@^8.1.0:</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  version \"8.1.0\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  resolved \"https://registry.yarnpkg.com/fs-extra/-/fs-extra-8.1.0.tgz#49d43c45a88cd9677668cb7be1b46efdb8d2e1c0\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  integrity sha512-yhlQgA6mnOJUKOsRUFsgJdQCvkKhcz8tlZG5HBQfReYZy46OwLcY+Zia0mtdHsOo9y/hP+CxMN0TU9QxoOtG4g==</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  dependencies:</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    graceful-fs \"^4.2.0\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    jsonfile \"^4.0.0\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    universalify \"^0.1.0\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">fs-extra@^9.0.1:</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  version \"9.1.0\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  resolved \"https://registry.yarnpkg.com/fs-extra/-/fs-extra-9.1.0.tgz#5954460c764a8da2094ba3554bf839e6b9a7c86d\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  integrity sha512-hcg3ZmepS30/7BSFqRvoo3DOMQu7IjqxO5nCDt+zM9XWjb33Wg7ziNT+Qvqbuc3+gWpzO02JubVyk2G4Zvo1OQ==</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  dependencies:</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    at-least-node \"^1.0.0\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    graceful-fs \"^4.2.0\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    jsonfile \"^6.0.1\"</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    universalify \"^2.0.0\"</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>这两个版本不可合并, 所以yarn会把它们两个都放在<code>yarn.lock</code>文件中. </p><p>但是在<code>node_modules</code>文件夹下, 默认会放置<code>fs-extra@9.0.1</code>版本的模块, 而<code>fs-extra@8.1.0</code>这个包会放在对应引用它的依赖的<code>node_modules</code>文件夹中. </p><p>这里和<code>npm</code>的处理逻辑有所不同.</p><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"yarn缓存管理\">yarn缓存管理<a class=\"hash-link\" href=\"#yarn缓存管理\" title=\"标题的直接链接\">​</a></h3><p>类似于<code>npm</code>的<code>cache</code>命令, yarn也提供了几个缓存管理命令:</p><ul><li><code>yarn cache ls</code>: 列出当前缓存的包的列表</li><li><code>yarn cache dir</code>: 显示缓存的目录</li><li><code>yarn cache clean</code>: 清理缓存</li></ul><p>一般, <code>yarn</code>的缓存目录默认放在<code>Library/Caches/Yarn/</code>的目录下面, 具体的你可以通过命令调用查看.</p><p>Yarn的缓存管理要显得更加语义化一些:</p><div class=\"language-txt codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-txt codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">- npm-yorkie-2.0.0-92411912d435214e12c51c2ae1093e54b6bb83d9-integrity</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">- npm-zeromq-5.2.8-94b0b85e4152e98b8bb163f1db4a34280d44d9d0-integrity</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">- npm-zrender-5.1.1-0515f4f8cc0f4742f02a6b8819550a6d13d64c5c-integrity</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">- npm-zscroller-0.4.8-69eed68690808eedf81f9714014356b36cdd20f4-integrity</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">- npm-zwitch-1.0.5-d11d7381ffed16b742f6af7b3f223d5cd9fe9920-integrity</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>它的缓存目录下面都是类似这样的文件夹, 文件的的名称以<code>npm-</code>开头, 以包名, 版本号以及hash值组成. </p><p><code>yarn</code>默认使用的是<code>perfer-online</code>模式, 也就是说, 它会先尝试从远程仓库下载, 如果连接失败则在尝试从缓存中读取. 如果你希望采用离线优先策略, 也提供了<code>--offline</code>参数:</p><div class=\"language-shell codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-shell codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">yarn</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#d73a49\">add</span><span class=\"token plain\"> --offline</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>此外, yarn是支持配置离线镜像的:</p><div class=\"language-shell codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-shell codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token function\" style=\"color:#d73a49\">yarn</span><span class=\"token plain\"> config </span><span class=\"token builtin class-name\">set</span><span class=\"token plain\"> yarn-offline-mirror ./npm-packages-offline-cache</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>离线镜像不同于缓存. 缓存是从注册中心下载的解压缩的tar包, 这些缓存是基于特性的工具实现的, npm有npm的缓存, yarn有yarn的缓存, 并且还有可能在npm的不同版本下机制也是不同的. 而离线镜像中的<code>tar</code>包不会受到工具和工具版本的影响, 并且存储后的文件也有利于存储. 更详细的步骤可以参照<a href=\"https://classic.yarnpkg.com/blog/2016/11/24/offline-mirror/\" target=\"_blank\" rel=\"noopener noreferrer\">官方文档</a></p><p>(实际上, 我们看到在npm的缓存机制下, 缓存包是以tar形式保存的)</p><h2 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"pnpm的包管理机制\">pnpm的包管理机制<a class=\"hash-link\" href=\"#pnpm的包管理机制\" title=\"标题的直接链接\">​</a></h2><p><code>npm</code>的v3以后的版本管理和<code>yarn</code>1的版本管理都采用了将依赖打平的方式, 这么做的好处在于减少层级深度和依赖冗余, 但是也带来的新的问题:</p><ol><li>最严重的问题就是幽灵依赖的问题, 模块可以访问它们不依赖的包</li><li>压平依赖的树算法非常的复杂</li><li>一些包必须复制到一个项目的<code>node_modules</code>文件中</li></ol><p>我们回顾之所以要将包进行扁平化的理由:</p><ol><li>在原来的npm的包管理机制下, <code>node_modules</code>会发生很深的嵌套.</li><li>大量的相同依赖冗余在不同的依赖包中.</li></ol><p><code>pnpm</code>实际上是提出了另一种解决这个问题的方法, 即利用<code>硬链接</code>将所有的包集中到全局管理.</p><p>也就是说, <code>node_module</code>文件夹中还是保持了和依赖图谱完全一致的文件目录结构, 但是又能避免依赖冗余和层级过深的问题.</p><p>在<code>linux</code>中, 硬链接就是指通过索引节点来进行链接. 在linux的文件系统中, 保存在磁盘分区中的文件不论是什么类型都会给它分配一个编号, 称为索引节点号. 在Linux中, 多个文件名指向同一个索引节点号是被允许的. 也就是说, linux允许文件拥有多个<strong>有效路径</strong>.</p><p>基于这种机制, <code>pnpm</code>把所有的依赖包都防止在<code>.pnpm</code>文件下面, 在<code>.pnpm</code>中平铺的存储这所有的包, 所以每个包都可以在以这种命名模式的文件夹中被找到:</p><div class=\"codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">.pnpm/&lt;name&gt;@&lt;version&gt;/node_modules/&lt;name&gt;</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>官方称之为: 虚拟存储目录.</p><p>这样的存储结构避免的<code>npm-v3</code>之前的版本中嵌套<code>node_modules</code>引起的长路径的问题, 也与<code>npm-v3</code>之后的版本中的平铺结构不同, 它保留了依赖包之间的真实的拓扑结构.</p><p>这么处理依赖, 带来了几个好处:</p><ol><li>保留了严格对应的node_modules层级关系, <code>node_modules</code>文件夹中只会存在真实依赖的依赖项</li><li>由于模块是全局共享的, 这解决了项目包的大小问题, 并且由于<code>pnpm</code>采用缓存优先的策略, 使得包复用的概率变的很高, 项目依赖的二次安装速度大大提升.</li><li>没有打平依赖带来幽灵依赖的问题</li></ol><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"pnpm中的peerdep依赖问题\">pnpm中的peerDep依赖问题<a class=\"hash-link\" href=\"#pnpm中的peerdep依赖问题\" title=\"标题的直接链接\">​</a></h3><p>假设, 我们现在有两个项目<code>package-a</code>和<code>package-b</code>:</p><ul><li><code>package-a</code>依赖<code>lib-a@1.0.0</code>和<code>lib-b@1.0.0</code> </li><li><code>package-b</code>依赖<code>lib-a@1.0.0</code>和<code>lib-b@1.1.0</code></li><li><code>lib-a</code>存在一个<code>peerDeps</code>是<code>lib-b@^1.0.0</code></li></ul><p>如果我们现在在项目中要同时安装<code>package-a</code>以及<code>package-b</code>, 在<code>.pnpm</code>中, 需要把所有依赖铺平:</p><div class=\"codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">package-a</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">package-b</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">lib-a@1.0.0</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">lib-b@1.0.0</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">lib-b@1.1.0</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>显然, <code>package-a</code>和<code>package-b</code>是分别依赖<code>lib-b</code>的两个版本的, 但是<code>lib-b</code>同时是<code>lib-a</code>的依赖, 那么导入<code>lib-a</code>的时候应该处理哪一个<code>lib-b</code>呢? 显然不能随便选择一个, 因为<code>package-a</code>和<code>package-b</code>都是依赖<code>lib-a</code>的, 随便挑一个另一个就会报错.</p><p>所以这种情况下, <code>lib-a</code>就会在<code>pnpm</code>中<code>.pnpm</code>里面出现两次, 一次链接到<code>lib-b@1.0.0</code>, 一次链接到<code>lib-b@1.1.0</code>.</p><p>也就是说, 我们得到了以下的<code>.pnpm</code>目录:</p><div class=\"language-txt codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-txt codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">package-a</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">package-b</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">lib-a@1.0.0+lib-b@1.0.0</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">lib-a@1.0.0+lib-b@1.1.0</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">lib-b@1.0.0</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">lib-b@1.1.0</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"yarn2-pnp模式\">yarn2, PnP模式<a class=\"hash-link\" href=\"#yarn2-pnp模式\" title=\"标题的直接链接\">​</a></h2><p>PnP模式比起pnpm的全局硬链接模式更加激进一些, 它直接把<code>node_modules</code>给干掉了. </p><p>在PnP模式下, Yarn会维护一张静态的映射表, 这个表中会包含:</p><ul><li>当前依赖树中包含了哪些依赖包以及对应的版本组</li><li>这些依赖包的依赖关系</li><li>这些依赖包在文件系统中的具体位置</li></ul><p>这个映射表以<code>.pnp.js</code>文件的形式保存在项目的根目录下.</p><p>在项目进行依赖安装的时候, <code>yarn</code>不会把依赖拷贝到<code>node_modules</code>目录, 而是会在<code>.pnp.js</code>中记录下该依赖在缓存中的具体位置. 这样就避免了大量的I/O操作, 同时在项目中也不会生成<code>node_modules</code>目录. </p><p>PnP模式的优点在于:</p><ul><li>完全摆脱了<code>node_modules</code>的限制</li><li>提高了模块的加载效率: 通过<code>.pnp.js</code>文件就能直接定位到具体的模块的地址, 省去了一层层查找模块位置的过程</li><li>不再受同名模块的不同版本不能在同一个目录的限制(npm中对这种情况就会创建出比较复杂的层级结构)</li></ul><p>PnP模式的最大问题就是兼容性问题, 比如目前来说, 前端的很多工具都依赖于<code>node_modules</code>的模块查找机制, 例如:</p><ul><li>Node的require</li><li>Webpack的模块查找</li><li>TypeScript的类型声明文件</li><li>Babel, ESLint的插件的定位机制</li></ul><p>等等</p><h2 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"deno的包管理\">Deno的包管理<a class=\"hash-link\" href=\"#deno的包管理\" title=\"标题的直接链接\">​</a></h2><p>Deno不是包管理工具, 可以理解为一个新的JS运行时框架, 目的是为了解决原来<code>node_modules</code>带来的种种问题. </p><p>Deno的依赖引入是直接引入资源的可访问路径, 不论是url或者本地路径, 不做任何的模块化的处理. 类似于这样:</p><div class=\"language-js codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token keyword module\" style=\"color:#00009f\">import</span><span class=\"token plain\"> </span><span class=\"token imports punctuation\" style=\"color:#393A34\">{</span><span class=\"token imports\"> serve </span><span class=\"token imports punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"> </span><span class=\"token keyword module\" style=\"color:#00009f\">from</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"https://deno.land/std@0.54.0/http/server.ts\"</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:#00009f\">const</span><span class=\"token plain\"> s </span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#d73a49\">serve</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"> </span><span class=\"token literal-property property\" style=\"color:#36acaa\">port</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">8000</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token console class-name\">console</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token method function property-access\" style=\"color:#d73a49\">log</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token string\" style=\"color:#e3116c\">\"http://localhost:8000/\"</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token keyword control-flow\" style=\"color:#00009f\">for</span><span class=\"token plain\"> </span><span class=\"token keyword control-flow\" style=\"color:#00009f\">await</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token keyword\" style=\"color:#00009f\">const</span><span class=\"token plain\"> req </span><span class=\"token keyword\" style=\"color:#00009f\">of</span><span class=\"token plain\"> s</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  req</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token method function property-access\" style=\"color:#d73a49\">respond</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"> </span><span class=\"token literal-property property\" style=\"color:#36acaa\">body</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"Hello World\\n\"</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>每个包的路径中包含了引入源+包名+版本号+模块, 全都塞进了一个Url中. </p><p>但是这种引入方式在工程量增大的时候, 可预见的会变的非常的复杂和难以管理, 势必要引入一套依赖管理的机制.</p><p>官方推荐的做法是, 在项目本地建立一个<code>dep.ts</code>的文件, 然后通过<code>dep.ts</code>文件去引入各种本地或者远程的项目依赖. </p><p>比如像这样:</p><div class=\"language-js codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\">/**</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> * deps.ts</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> *</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> * This module re-exports the required methods from the dependant remote Ramda module.</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> */</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token keyword module\" style=\"color:#00009f\">export</span><span class=\"token plain\"> </span><span class=\"token exports punctuation\" style=\"color:#393A34\">{</span><span class=\"token exports\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token exports\">  add</span><span class=\"token exports punctuation\" style=\"color:#393A34\">,</span><span class=\"token exports\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token exports\">  multiply</span><span class=\"token exports punctuation\" style=\"color:#393A34\">,</span><span class=\"token exports\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token exports\"></span><span class=\"token exports punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"> </span><span class=\"token keyword module\" style=\"color:#00009f\">from</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"https://x.nest.land/ramda@0.27.0/source/index.js\"</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>然后在项目中这样引用:</p><div class=\"language-js codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\">/**</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> * example.ts</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> */</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token keyword module\" style=\"color:#00009f\">import</span><span class=\"token plain\"> </span><span class=\"token imports punctuation\" style=\"color:#393A34\">{</span><span class=\"token imports\"> add</span><span class=\"token imports punctuation\" style=\"color:#393A34\">,</span><span class=\"token imports\"> multiply </span><span class=\"token imports punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"> </span><span class=\"token keyword module\" style=\"color:#00009f\">from</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"./deps.ts\"</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:#00009f\">function</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#d73a49\">totalCost</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token parameter literal-property property\" style=\"color:#36acaa\">outbound</span><span class=\"token parameter operator\" style=\"color:#393A34\">:</span><span class=\"token parameter\"> number</span><span class=\"token parameter punctuation\" style=\"color:#393A34\">,</span><span class=\"token parameter\"> </span><span class=\"token parameter literal-property property\" style=\"color:#36acaa\">inbound</span><span class=\"token parameter operator\" style=\"color:#393A34\">:</span><span class=\"token parameter\"> number</span><span class=\"token parameter punctuation\" style=\"color:#393A34\">,</span><span class=\"token parameter\"> </span><span class=\"token parameter literal-property property\" style=\"color:#36acaa\">tax</span><span class=\"token parameter operator\" style=\"color:#393A34\">:</span><span class=\"token parameter\"> number</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> number </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token keyword control-flow\" style=\"color:#00009f\">return</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#d73a49\">multiply</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token function\" style=\"color:#d73a49\">add</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token plain\">outbound</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"> inbound</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"> tax</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token console class-name\">console</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token method function property-access\" style=\"color:#d73a49\">log</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token function\" style=\"color:#d73a49\">totalCost</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token number\" style=\"color:#36acaa\">19</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">31</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">1.2</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token console class-name\">console</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token method function property-access\" style=\"color:#d73a49\">log</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token function\" style=\"color:#d73a49\">totalCost</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token number\" style=\"color:#36acaa\">45</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">27</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:#36acaa\">1.15</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:#999988;font-style:italic\">/**</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> * Output</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> *</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> * 60</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> * 82.8</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> */</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>也就是说, 移除了包管理工具的概念, 直接在代码层面上组织和管理模块依赖. 对于这种为了去中心化而设计的依赖管理模式, 则需要见仁见智了.</p><h2 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"参考链接\">参考链接<a class=\"hash-link\" href=\"#参考链接\" title=\"标题的直接链接\">​</a></h2><ul><li><a href=\"http://www.conardli.top/blog/article/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96-%E5%89%96%E6%9E%90npm%E7%9A%84%E5%8C%85%E7%AE%A1%E7%90%86%E6%9C%BA%E5%88%B6%EF%BC%88%E5%AE%8C%E6%95%B4%E7%89%88%EF%BC%89.html\" target=\"_blank\" rel=\"noopener noreferrer\">剖析npm的包管理机制（完整版）</a></li><li><a href=\"https://jishuin.proginn.com/p/763bfbd3bcff\" target=\"_blank\" rel=\"noopener noreferrer\">为什么现在我更推荐 pnpm 而不是 npm/yarn?</a></li><li><a href=\"https://www.kochan.io/nodejs/why-should-we-use-pnpm.html\" target=\"_blank\" rel=\"noopener noreferrer\">Why should we use pnpm?</a></li><li><a href=\"https://pnpm.io/blog/2020/05/27/flat-node-modules-is-not-the-only-way\" target=\"_blank\" rel=\"noopener noreferrer\">flat-node-modules-is-not-the-only-way</a></li><li><a href=\"https://pnpm.io/how-peers-are-resolved\" target=\"_blank\" rel=\"noopener noreferrer\">How peers are resolved</a></li><li><a href=\"https://deno.land/manual/examples/manage_dependencies\" target=\"_blank\" rel=\"noopener noreferrer\">Managing dependencies | Deno Manual</a></li><li><a href=\"https://zhuanlan.zhihu.com/p/145101719\" target=\"_blank\" rel=\"noopener noreferrer\">关于 Deno 的依赖管理，有点糟糕，却也有药可救</a></li></ul>",
            "url": "https://wiki.jeiizou.site/blog/2022/03/01/前端包管理机制简述",
            "title": "前端包管理机制简述",
            "summary": "npm, yarn, pnpm 相关机制和原理的介绍",
            "date_modified": "2022-03-01T00:00:00.000Z",
            "author": {
                "name": "Jeii Zou",
                "url": "https://github.com/jeiizou"
            },
            "tags": []
        },
        {
            "id": "/2020/08/11/小程序概览",
            "content_html": "<h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"简介\">简介<a class=\"hash-link\" href=\"#简介\" title=\"标题的直接链接\">​</a></h3><br>小程序是相对于App而言更轻便的一种应用存在形式，强调**用完即走、无需安装卸载、随时可用的特点。<br><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"小程序架构设计\">小程序架构设计<a class=\"hash-link\" href=\"#小程序架构设计\" title=\"标题的直接链接\">​</a></h3><br>![image.png](/img/miniprogram/weixin-mp.png)<br><br>以微信小程序为例:<ol><li>小程序的<strong>渲染层</strong>和<strong>逻辑层</strong>是分开的。</li><li>数据通信上, 逻辑层通过显示调用 <code>setData</code> 方法与 <code>Native</code> 交互再通知视图层进行更新。反过来视图层也只能通过Native触发逻辑层的逻辑。</li><li>分离设计的好处在于渲染页面的时候不需要处理JS, 因此可以提高首屏的渲染速度和稳定性。同时, 逻辑层不能直接操作DOM，这从某种程度上也算是一种优点。</li><li>需要<strong>注意</strong>: 小程序的渲染层仍然是以 <code>webview</code> 来渲染而不是原生渲染的, 因此小程序的性能是无法跟 <code>Native</code> 程序比较的。</li></ol><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"小程序和webview的比较\">小程序和WebView的比较<a class=\"hash-link\" href=\"#小程序和webview的比较\" title=\"标题的直接链接\">​</a></h3><br>大部分的平台都支持 `webview` 模式。从渲染进程上来说原生和 `webview` 的性能是一致的, 但是在其他因素的影响下会有一些不同, 下面我尝试根据官方的文档和我查询到的资料列举一些 `webview` 的优点和缺点。<br><br>**优点:**<br><ol><li>可以直接兼容原来的H5代码, 代码开发量小。</li><li>内容更新无需审核, 部署完站点刷新生效。</li></ol><br>**缺点:**<br><ol><li>原生小程序进行了渲染逻辑分离, 并设计了一套加载和优化的机制(更新, 离线缓存等等), 同样是 <code>webview</code> 内核渲染, 这点仍然会有差距。</li><li><code>webview</code> 无法跳转原生页面, 并有由于通信机制的问题, 还可能有其他的一些问题(例如页面跳转, 支付, 分享等)。</li><li><code>webview</code> 的比重过大可能会对审核造成影响。</li></ol><br><br><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"小程序平台对比\">小程序平台对比<a class=\"hash-link\" href=\"#小程序平台对比\" title=\"标题的直接链接\">​</a></h3><table><thead><tr><th align=\"center\">平台</th><th align=\"center\">应用入口</th><th align=\"center\">开发成本</th><th align=\"center\">文档地址</th><th align=\"center\">支持</th></tr></thead><tbody><tr><td align=\"center\">微信小程序</td><td align=\"center\">微信</td><td align=\"center\">使用JS开发,&nbsp;有一定的API学习成本</td><td align=\"center\"><a href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/\" target=\"_blank\" rel=\"noopener noreferrer\">https://developers.weixin.qq.com/miniprogram/dev/framework/</a></td><td align=\"center\">小程序/小游戏</td></tr><tr><td align=\"center\">支付宝小程序</td><td align=\"center\">支付宝</td><td align=\"center\">与微信小程序的整体架构基本一致,&nbsp;修改API和文件后缀可以进行迁移</td><td align=\"center\"><a href=\"https://opendocs.alipay.com/mini/developer\" target=\"_blank\" rel=\"noopener noreferrer\">https://opendocs.alipay.com/mini/developer</a></td><td align=\"center\">小程序/小游戏</td></tr><tr><td align=\"center\">字节跳动小程序</td><td align=\"center\">头条/抖音/头条极速版</td><td align=\"center\">可以从微信小程序转换过来， 部分框架支持</td><td align=\"center\"><a href=\"https://microapp.bytedance.com/dev/cn/mini-app/introduction/about-mini-app/general-introduction\" target=\"_blank\" rel=\"noopener noreferrer\">https://microapp.bytedance.com/dev/cn/mini-app/introduction/about-mini-app/general-introduction</a></td><td align=\"center\">小程序/小游戏</td></tr><tr><td align=\"center\">百度智能小程序</td><td align=\"center\">百度APP</td><td align=\"center\">与微信小程序的整体架构基本一致,&nbsp;提供\"搬家工具\"从微信小程序迁移到百度小程序</td><td align=\"center\"><a href=\"https://opendocs.alipay.com/mini/introduce\" target=\"_blank\" rel=\"noopener noreferrer\">https://opendocs.alipay.com/mini/introduce</a></td><td align=\"center\">小程序/小游戏</td></tr><tr><td align=\"center\">快应用</td><td align=\"center\">vivo、华为、OPPO、小米、联想、金立、魅族、中兴、努比亚、一加、海信、中国移动终端</td><td align=\"center\">相比微信、支付宝小程序，快应用的开发语法标准，其语法也更接近传统网页。</td><td align=\"center\"><a href=\"https://doc.quickapp.cn/\" target=\"_blank\" rel=\"noopener noreferrer\">https://doc.quickapp.cn/</a></td><td align=\"center\">小程序</td></tr><tr><td align=\"center\">QQ小程序</td><td align=\"center\">QQ</td><td align=\"center\">可以比较简单的从微信小程序迁移过来</td><td align=\"center\"><a href=\"https://q.qq.com/wiki/develop/miniprogram/frame/\" target=\"_blank\" rel=\"noopener noreferrer\">https://q.qq.com/wiki/develop/miniprogram/frame/</a></td><td align=\"center\">小程序/小游戏</td></tr><tr><td align=\"center\">钉钉小程序</td><td align=\"center\">钉钉</td><td align=\"center\">小程序自建DSL, 类似Vue的语法, 微H5则是全前端的技术栈</td><td align=\"center\"><a href=\"https://ding-doc.dingtalk.com/doc#/personnal/fdzxvg\" target=\"_blank\" rel=\"noopener noreferrer\">https://ding-doc.dingtalk.com/doc#/personnal/fdzxvg</a></td><td align=\"center\">小程序/H5微应用</td></tr></tbody></table><br>微信小程序是小程序这个概念的发起者，因此后续许多小程序的设计都很类似与微信小程序。**支付宝小程序**只需要在微信小程序的代码上稍作修改就能进行转换（甚至有个vscode的插件“wx2my”可以一键转换）。而**QQ小程序**甚至可以兼容微信小程序直接运行（只需要干掉一些手机获取之类的API）。<br>**<br>**注**: 快应用和其他小程序在设计上有所不同, 而更接近与PWA的概念。正是如此，快应用更多的是手机厂商在推动而不是平台方。&nbsp;<h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"小程序框架简单对比\">小程序框架简单对比<a class=\"hash-link\" href=\"#小程序框架简单对比\" title=\"标题的直接链接\">​</a></h3><table><thead><tr><th align=\"center\"><strong>小程序框架</strong></th><th align=\"center\"><strong>wepyjs</strong></th><th align=\"center\"><strong>mpvue</strong></th><th align=\"center\"><strong>taro</strong></th><th align=\"center\">uni-app</th><th align=\"center\">chameleon</th></tr></thead><tbody><tr><td align=\"center\"><strong>团队</strong></td><td align=\"center\">腾讯</td><td align=\"center\">美团</td><td align=\"center\">京东</td><td align=\"center\">DCloud(数字天堂)</td><td align=\"center\">滴滴</td></tr><tr><td align=\"center\"><strong>支持平台</strong></td><td align=\"center\">H5,&nbsp;微信,&nbsp;支付宝</td><td align=\"center\">支持将微信小程序转换为支付宝、百度、qq、头条小程序</td><td align=\"center\">微信/百度/支付宝/字节跳动/QQ小程序&nbsp;、快应用、&nbsp;H5&nbsp;端&nbsp;以及&nbsp;移动端（React&nbsp;Native）</td><td align=\"center\">小程序（微信/支付宝/百度/字节跳动/QQ/钉钉）、App（iOS/Android）、H5</td><td align=\"center\">web、微信小程序、支付宝小<br>程序、百度小程序、android(weex)、ios(weex)、qq&nbsp;小程序、字节跳动小程序、快应用</td></tr><tr><td align=\"center\"><strong>语法风格</strong></td><td align=\"center\">接近Vue</td><td align=\"center\">与Vue一致</td><td align=\"center\">React标准,&nbsp;可以使用JSX</td><td align=\"center\">与Vue一致</td><td align=\"center\">类似Vue</td></tr><tr><td align=\"center\"><strong>数据流管理</strong></td><td align=\"center\">Redux/Mobx</td><td align=\"center\">Vuex</td><td align=\"center\">Redux/MobX</td><td align=\"center\">Vuex</td><td align=\"center\">Vuex</td></tr><tr><td align=\"center\"><strong>开源组件库</strong></td><td align=\"center\">需要小改目标源码</td><td align=\"center\">可以直接使用原生组件库</td><td align=\"center\">可以直接使用原生组件库</td><td align=\"center\">可以直接使用原生组件库</td><td align=\"center\">需要大改目标源码</td></tr><tr><td align=\"center\"><strong>组件化</strong></td><td align=\"center\">自定义组件规范</td><td align=\"center\">Vue组件规范</td><td align=\"center\">React组件规范</td><td align=\"center\">Vue组件规范</td><td align=\"center\">自定义组件规范</td></tr><tr><td align=\"center\"><strong>脚手架</strong></td><td align=\"center\">wepy-cli</td><td align=\"center\">vue-cli</td><td align=\"center\">taro-cli</td><td align=\"center\">vue-cli</td><td align=\"center\">chameleon-tool,&nbsp;不支持npm</td></tr><tr><td align=\"center\"><strong>构建</strong></td><td align=\"center\">框架内置构建工具</td><td align=\"center\">webpack</td><td align=\"center\">webpack</td><td align=\"center\">webpack</td><td align=\"center\">chameleon-tool</td></tr><tr><td align=\"center\"><strong>样式</strong></td><td align=\"center\">支持less/sass/stylus/postcss</td><td align=\"center\">less/sass/postcss</td><td align=\"center\">less/sass/postcss</td><td align=\"center\">less/sass/postcss</td><td align=\"center\">less/sass/postcss</td></tr><tr><td align=\"center\"><strong>API文档</strong></td><td align=\"center\"><a href=\"#/base/intro\">https://wepyjs.github.io/wepy-docs/2.x/#/base/intro</a></td><td align=\"center\"><a href=\"http://mpvue.com/\" target=\"_blank\" rel=\"noopener noreferrer\">http://mpvue.com/</a></td><td align=\"center\"><a href=\"https://taro-docs.jd.com/taro/docs/README.html\" target=\"_blank\" rel=\"noopener noreferrer\">https://taro-docs.jd.com/taro/docs/README.html</a></td><td align=\"center\"><a href=\"https://uniapp.dcloud.io/\" target=\"_blank\" rel=\"noopener noreferrer\">https://uniapp.dcloud.io/</a></td><td align=\"center\"><a href=\"https://cml.js.org/doc/api/api.html\" target=\"_blank\" rel=\"noopener noreferrer\">https://cml.js.org/doc/api/api.html</a></td></tr><tr><td align=\"center\"><strong>Star(02/05)</strong></td><td align=\"center\">19.7k</td><td align=\"center\">19.4k</td><td align=\"center\">23.8k</td><td align=\"center\">18k</td><td align=\"center\">7.1k</td></tr><tr><td align=\"center\"><strong>最后一次更（02/07 15：30）</strong></td><td align=\"center\">20小时前</td><td align=\"center\">6个月前</td><td align=\"center\">1小时前</td><td align=\"center\">19小时前</td><td align=\"center\">22天前</td></tr><tr><td align=\"center\"><strong>其他说明</strong></td><td align=\"center\">发布的时间较早, 多平台的支持一般</td><td align=\"center\">更新较慢</td><td align=\"center\">支持ESlint,&nbsp;支持CSS&nbsp;Module,&nbsp;支持微信小程序转为taro进行重构</td><td align=\"center\">使用HBuilder支持更完整,&nbsp;语法,编译部署等</td><td align=\"center\">自研了语法检验工具,&nbsp;但是不支持ts,&nbsp;有专门针对多端开发的多态协议</td></tr></tbody></table><br>从几个平台的比较可以看出，taro是以react为技术栈的，虽然发展的很不错，但不太符合原先代码的技术选型。chameleon和wepyjs另起炉灶自己构建了一套dsl，对于目前的代码来说兼容性一般，如果要使用需要对原来的代码进行大幅度的修改。所以下面主要详细的对比下mpvue和uni-app这两个框架的各方面。<h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"mpvue和uni-app的比较\">mpvue和uni-app的比较<a class=\"hash-link\" href=\"#mpvue和uni-app的比较\" title=\"标题的直接链接\">​</a></h3><br><ol><li>开发工具</li></ol><p>mpvue和uni-app都提供了脚手架进行项目初始化，并且都是以vue-cli为基础的。此外uni-app在它自家的Hbuilder中提供了可视化的初始化操作，并集成了后续的测试发布。鼠标点点点即可完成。<br>两个框架都支持sass、less、stylus和typescript。uni-app在自家的ide上集成了代码提示支持。<br></p><br>这里说明几点uni-app其ide创建项目和cli创建项目的不同点：<ul><li>两者的最大区别在于cli的编译器是附在项目中的，ide则附在ide的软件中。<code>cli</code>创建的项目，编译器安装在项目下。并且不会跟随HBuilderX升级。如需升级编译器，执行 <code>npm update</code> 。</li><li><code>cli</code> 安装sass、less需要自己手动安装， ide上可以点点点。</li><li>把 <code>cli</code> 的src直接拖入ide可以继续执行，但是会使用ide的编译器。</li><li><code>cli</code> 的项目不能编译成APP。</li></ul><ol start=\"2\"><li>端的支持</li></ol><p>mpvue支持微信、百度、头条和支付宝。uni-app如果不算h5端和app（android、ios）的支持，只算小程序则比mpvue多一个钉钉小程序和QQ小程序的支持。<br></p><ol start=\"3\"><li>组件生态</li></ol><p>uni-app的官方搭建了社区和组件库，mpvue没有。不过mpvue支持直接使用小程序原生的组件库，并且第三方的工具库也比较丰富。<br></p><ol start=\"4\"><li>接入成本</li></ol><p>两个库都是兼容vue的语法规则，uni-app实现的语法规则更多。mpvue对于现有代码来说是没有接入成本的。uni-app则提供了mpvue迁移到uni-app的方法（<a href=\"https://ask.dcloud.net.cn/article/34945\" target=\"_blank\" rel=\"noopener noreferrer\">https://ask.dcloud.net.cn/article/34945</a>）。<br></p><ol start=\"5\"><li>文档</li></ol><p>文档链接如下：<a href=\"https://ask.dcloud.net.cn/article/34945\" target=\"_blank\" rel=\"noopener noreferrer\">uni-app</a> , <a href=\"http://mpvue.com/mpvue/simple.html\" target=\"_blank\" rel=\"noopener noreferrer\">mpvue</a> 。比较明显的是uni-app的文档更清晰。</p><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"其他框架补充\">其他框架补充<a class=\"hash-link\" href=\"#其他框架补充\" title=\"标题的直接链接\">​</a></h3><ul><li>网易考拉小程序框架:&nbsp;megalo<ul><li>简要说明: Megala基于 <code>Vue2.6.6</code>&nbsp;开发, 目前支持微信, 支付宝, 百度, 头条小程序, <strong>目前已经不更新(最后一次提交是19年8月--截止2020.02.19).</strong></li><li>文档地址:&nbsp;<a href=\"https://megalojs.org/#/\" target=\"_blank\" rel=\"noopener noreferrer\">https://megalojs.org/#/</a></li><li>Github(1.5K):&nbsp;<a href=\"https://github.com/kaola-fed/megalo\" target=\"_blank\" rel=\"noopener noreferrer\">https://github.com/kaola-fed/megalo</a>&nbsp;</li></ul></li><li>滴滴小程序框架(Vue): mpx<ul><li>简要说明: 滴滴出品的基于Vue的小程序框架, 支持业内全平台小程序和跨小平台编译,(<a href=\"https://github.com/didi/mpx/releases/tag/v2.0.0\" target=\"_blank\" rel=\"noopener noreferrer\">https://github.com/didi/mpx/releases/tag/v2.0.0</a>),&nbsp; 目前较活跃.&nbsp;</li><li>文档地址:&nbsp;<a href=\"https://didi.github.io/mpx/\" target=\"_blank\" rel=\"noopener noreferrer\">https://didi.github.io/mpx/</a></li><li>Github(2K):&nbsp;<a href=\"https://github.com/didi/mpx\" target=\"_blank\" rel=\"noopener noreferrer\">https://github.com/didi/mpx</a></li><li>特点: 不同于mpvue这类转译型框架, mpx侧重于加强小程序语法, 详细介绍可见文档&nbsp;</li></ul></li><li>微信小程序同构方案: Kbone<ul><li>简要说明: 微信官方出品的小程序同构方案, 目的是为了解决让web端的代码通过适配器直接迁移到小程序中. 框架的原理在下面的<strong>文章链接(1)</strong>.</li><li>文档地址:&nbsp;<a href=\"https://wechat-miniprogram.github.io/kbone/docs/\" target=\"_blank\" rel=\"noopener noreferrer\">https://wechat-miniprogram.github.io/kbone/docs/</a></li><li>Github(1.3k):<a href=\"https://github.com/wechat-miniprogram/Kbone\" target=\"_blank\" rel=\"noopener noreferrer\">https://github.com/wechat-miniprogram/Kbone</a></li></ul></li></ul><br><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"文章链接\">文章链接<a class=\"hash-link\" href=\"#文章链接\" title=\"标题的直接链接\">​</a></h3><ol><li><a href=\"https://mp.weixin.qq.com/s/6H02KGwDVtJZ4k2CShAH_Q\" target=\"_blank\" rel=\"noopener noreferrer\">微信官方小程序同构新方案Kbone全解析</a></li><li><a href=\"https://developers.weixin.qq.com/doc/oplatform/Miniprogram_Frame/\" target=\"_blank\" rel=\"noopener noreferrer\">小程序硬件框架</a></li><li><a href=\"https://zhuanlan.zhihu.com/p/81775922\" target=\"_blank\" rel=\"noopener noreferrer\">小程序底层实现原理及一些思考</a></li></ol>",
            "url": "https://wiki.jeiizou.site/blog/2020/08/11/小程序概览",
            "title": "小程序概览",
            "summary": "小程序是相对于App而言更轻便的一种应用存在形式，强调**用完即走、无需安装卸载、随时可用的特点",
            "date_modified": "2020-08-11T00:00:00.000Z",
            "author": {
                "name": "Jeii Zou",
                "url": "https://github.com/jeiizou"
            },
            "tags": []
        },
        {
            "id": "/2020/07/11/前端项目结构演进",
            "content_html": "<blockquote><p>组件框架分析</p></blockquote><p><img loading=\"lazy\" src=\"/assets/images/封面-b83db9c27a965080c180e7bf6b0f07fa.png\" width=\"951\" height=\"533\" class=\"img_SmpS\"></p><h2 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"前言\">前言<a class=\"hash-link\" href=\"#前言\" title=\"标题的直接链接\">​</a></h2><p>前端组件库一直是提升开发效率的利器. 尤其在<code>React</code>,<code>Vue</code>等前端UI框架大行其道以来, 各种层出不穷的UI组件库给前端工程师提供了各种各样的选择. 或者选择构建自己的组件库. 从框架结构方面来说, 这些年的演化令人眼花缭乱, 不知不觉已经2020年了. 回顾这些年, 前端框架的结构有哪些变化呢. 下面我列举和介绍一些典型的UI框架的项目结构来看看前端组件框架是如何设计的, 在这些年发生了什么样的变化.</p><p>对于UI库来说, 大致分成两种类型的UI框架, 不依赖前端框架的UI框架, 在早些年比较流行, 以及现在比较流行的依赖于各大前端框架的组件框架. (这两者在)</p><p><img loading=\"lazy\" src=\"/assets/images/ui框架-97ede5dbd90e5033e17b7a6e95cd9e89.png\" width=\"960\" height=\"535\" class=\"img_SmpS\"></p><h2 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"bootstrap\">BootStrap<a class=\"hash-link\" href=\"#bootstrap\" title=\"标题的直接链接\">​</a></h2><p>说到前端的组件库, BootStrap永远是绕不过去的一块路标. 早在jQuery的时代, Bootstrap就开始流行了. 在那个时候<code>Jquery</code>和<code>Bootstrap</code>几乎是前端必备的知识点. </p><p>到目前为止, <code>Bootstrap</code>的GithubStar已经高达139K之巨. 目前最新的版本是<code>4.4.1</code>, 其中组件的代码, 使用的工程工具都和过去的版本有了巨大的变化. </p><p>而今天主要的内容不会聚焦在组件和使用方式的变化上, 而是框架结构的设计和变化</p><p>我们来看<code>Bootstrap</code>中<code>3.x</code>和<code>4.x</code>发生的变化</p><p><img loading=\"lazy\" src=\"/assets/images/bootstrap-2f254b9be15e8409b03c093babf98fc4.png\" width=\"955\" height=\"539\" class=\"img_SmpS\"></p><p>好了, 我知道我截取的比较小, 不要仔细去对比了, 我提取几个最主要的变化给大家分析一下.</p><p>一般来说, 我阅读一个前端的开源代码的时候, <code>package.json</code>绝对是首选的文件. 而对于了解一个框架的从开发到部署的流程来说, 阅读脚本再配合依赖的查阅就差不多能知道个大概了. </p><p>所以首先可以来简单的对比一下两个版本之间的<code>script</code>命令:</p><p><img loading=\"lazy\" src=\"/assets/images/BOOTSTRAPvs-f02af64428c51f5731ab1cb3c84885ba.png\" width=\"747\" height=\"424\" class=\"img_SmpS\"></p><p>emmm, 建议大家自己去代码里面看一看. 这种密度的<code>script</code>其实也算比较多的了. 这里的截图肯定是看不清楚了</p><p>左边的话, 其实主要的编译工具还是<code>grunt</code>, 而其运行的内容大概就是把<code>src</code>中的js文件都拼起来. 是的, 没有听错, 由于在3.x时代没有成熟<code>import</code>机制的存在, <code>bootstrap</code>虽然将每个组件的<code>js</code>代码都分割成不同的文件, 但是在最终的打包过程中, 做的仅仅是将文件简单的<code>concat</code>并且<code>uglify</code></p><div class=\"language-js codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\">/* ========================================================================</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> * Bootstrap: affix.js v3.4.1</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> * https://getbootstrap.com/docs/3.4/javascript/#affix</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> * ========================================================================</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> * Copyright 2011-2019 Twitter, Inc.</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> * ======================================================================== */</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token operator\" style=\"color:#393A34\">+</span><span class=\"token keyword\" style=\"color:#00009f\">function</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token parameter\">$</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token string\" style=\"color:#e3116c\">'use strict'</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\">// AFFIX CLASS DEFINITION</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\">// ======================</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:#00009f\">var</span><span class=\"token plain\"> </span><span class=\"token function-variable function maybe-class-name\" style=\"color:#d73a49\">Affix</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:#00009f\">function</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token parameter\">element</span><span class=\"token parameter punctuation\" style=\"color:#393A34\">,</span><span class=\"token parameter\"> options</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token spread operator\" style=\"color:#393A34\">...</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:#999988;font-style:italic\">/* ========================================================================</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> * Bootstrap: alert.js v3.4.1</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> * https://getbootstrap.com/docs/3.4/javascript/#alerts</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> * ========================================================================</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> * Copyright 2011-2019 Twitter, Inc.</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> * ======================================================================== */</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token operator\" style=\"color:#393A34\">+</span><span class=\"token keyword\" style=\"color:#00009f\">function</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token parameter\">$</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token string\" style=\"color:#e3116c\">'use strict'</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\">// ALERT CLASS DEFINITION</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\">// ======================</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:#00009f\">var</span><span class=\"token plain\"> dismiss </span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">'[data-dismiss=\"alert\"]'</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"color:#00009f\">var</span><span class=\"token plain\"> </span><span class=\"token function-variable function maybe-class-name\" style=\"color:#d73a49\">Alert</span><span class=\"token plain\">   </span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:#00009f\">function</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token parameter\">el</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token spread operator\" style=\"color:#393A34\">...</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>最终的打包结果:</p><div class=\"language-js codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\">/*!</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> * Bootstrap v3.4.1 (https://getbootstrap.com/)</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> * Copyright 2011-2019 Twitter, Inc.</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> * Licensed under the MIT license</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token comment\" style=\"color:#999988;font-style:italic\"> */</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token keyword control-flow\" style=\"color:#00009f\">if</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token string\" style=\"color:#e3116c\">\"undefined\"</span><span class=\"token operator\" style=\"color:#393A34\">==</span><span class=\"token keyword\" style=\"color:#00009f\">typeof</span><span class=\"token plain\"> jQuery</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token keyword control-flow\" style=\"color:#00009f\">throw</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:#00009f\">new</span><span class=\"token plain\"> </span><span class=\"token class-name\">Error</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token string\" style=\"color:#e3116c\">\"Bootstrap's JavaScript requires jQuery\"</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token operator\" style=\"color:#393A34\">!</span><span class=\"token keyword\" style=\"color:#00009f\">function</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token parameter\">t</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token string\" style=\"color:#e3116c\">\"use strict\"</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token keyword\" style=\"color:#00009f\">var</span><span class=\"token plain\"> e</span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token plain\">jQuery</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token property-access\">fn</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token property-access\">jquery</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token method function property-access\" style=\"color:#d73a49\">split</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token string\" style=\"color:#e3116c\">\" \"</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token number\" style=\"color:#36acaa\">0</span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token method function property-access\" style=\"color:#d73a49\">split</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token string\" style=\"color:#e3116c\">\".\"</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token keyword control-flow\" style=\"color:#00009f\">if</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token plain\">e</span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token number\" style=\"color:#36acaa\">0</span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token operator\" style=\"color:#393A34\">&lt;</span><span class=\"token number\" style=\"color:#36acaa\">2</span><span class=\"token operator\" style=\"color:#393A34\">&amp;&amp;</span><span class=\"token plain\">e</span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token number\" style=\"color:#36acaa\">1</span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token operator\" style=\"color:#393A34\">&lt;</span><span class=\"token number\" style=\"color:#36acaa\">9</span><span class=\"token operator\" style=\"color:#393A34\">||</span><span class=\"token number\" style=\"color:#36acaa\">1</span><span class=\"token operator\" style=\"color:#393A34\">==</span><span class=\"token plain\">e</span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token number\" style=\"color:#36acaa\">0</span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token operator\" style=\"color:#393A34\">&amp;&amp;</span><span class=\"token number\" style=\"color:#36acaa\">9</span><span class=\"token operator\" style=\"color:#393A34\">==</span><span class=\"token plain\">e</span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token number\" style=\"color:#36acaa\">1</span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token operator\" style=\"color:#393A34\">&amp;&amp;</span><span class=\"token plain\">e</span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token number\" style=\"color:#36acaa\">2</span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token operator\" style=\"color:#393A34\">&lt;</span><span class=\"token number\" style=\"color:#36acaa\">1</span><span class=\"token operator\" style=\"color:#393A34\">||</span><span class=\"token number\" style=\"color:#36acaa\">3</span><span class=\"token operator\" style=\"color:#393A34\">&lt;</span><span class=\"token plain\">e</span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token number\" style=\"color:#36acaa\">0</span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token keyword control-flow\" style=\"color:#00009f\">throw</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:#00009f\">new</span><span class=\"token plain\"> </span><span class=\"token class-name\">Error</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token string\" style=\"color:#e3116c\">\"Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4\"</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token keyword\" style=\"color:#00009f\">function</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token parameter\">n</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token string\" style=\"color:#e3116c\">\"use strict\"</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token plain\">n</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token property-access\">fn</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token method-variable function-variable method function property-access\" style=\"color:#d73a49\">emulateTransitionEnd</span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token keyword\" style=\"color:#00009f\">function</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token parameter\">t</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token keyword\" style=\"color:#00009f\">var</span><span class=\"token plain\"> e</span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token operator\" style=\"color:#393A34\">!</span><span class=\"token number\" style=\"color:#36acaa\">1</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\">i</span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token keyword\" style=\"color:#00009f\">this</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token function\" style=\"color:#d73a49\">n</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token keyword\" style=\"color:#00009f\">this</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token method function property-access\" style=\"color:#d73a49\">one</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token string\" style=\"color:#e3116c\">\"bsTransitionEnd\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token keyword\" style=\"color:#00009f\">function</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\">e</span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token operator\" style=\"color:#393A34\">!</span><span class=\"token number\" style=\"color:#36acaa\">0</span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token keyword control-flow\" style=\"color:#00009f\">return</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#d73a49\">setTimeout</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token keyword\" style=\"color:#00009f\">function</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\">e</span><span class=\"token operator\" style=\"color:#393A34\">||</span><span class=\"token function\" style=\"color:#d73a49\">n</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token plain\">i</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token method function property-access\" style=\"color:#d73a49\">trigger</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token plain\">n</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token property-access\">support</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token property-access\">transition</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token property-access\">end</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\">t</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token keyword\" style=\"color:#00009f\">this</span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token function\" style=\"color:#d73a49\">n</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token keyword\" style=\"color:#00009f\">function</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\">n</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token property-access\">support</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token method-variable function-variable method function property-access\" style=\"color:#d73a49\">transition</span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token keyword\" style=\"color:#00009f\">function</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:#d73a49\">o</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token keyword\" style=\"color:#00009f\">var</span><span class=\"token plain\"> t</span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token dom variable\" style=\"color:#36acaa\">document</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token method function property-access\" style=\"color:#d73a49\">createElement</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token string\" style=\"color:#e3116c\">\"bootstrap\"</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\">e</span><span class=\"token operator\" style=\"color:#393A34\">=</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token literal-property property\" style=\"color:#36acaa\">WebkitTransition</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token string\" style=\"color:#e3116c\">\"webkitTransitionEnd\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token literal-property property\" style=\"color:#36acaa\">MozTransition</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token string\" style=\"color:#e3116c\">\"transitionend\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token spread operator\" style=\"color:#393A34\">...</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>并且在<code>3.X</code>版本的时候, <code>Bootstrap</code>采用的还是<code>less</code>, 后来在<code>4.x</code>版本的时候更换为了<code>sass</code>.</p><p>那么<code>4.x</code>是如何处理代码的呢? 查阅<code>4.4.1</code>版本的<code>package.json</code>, 我们发现, <code>bootstrap</code>对js的处理工具换成了<code>rollup</code>:</p><div class=\"language-json codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-json codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token property\" style=\"color:#36acaa\">\"script\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:#36acaa\">\"js-compile-standalone\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"rollup --environment BUNDLE:false --config build/rollup.config.js --sourcemap\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:#36acaa\">\"js-compile-bundle\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"rollup --environment BUNDLE:true --config build/rollup.config.js --sourcemap\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:#36acaa\">\"js-compile-plugins\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"node build/build-plugins.js\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:#36acaa\">\"js-compile-plugins-coverage\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"cross-env NODE_ENV=test node build/build-plugins.js\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>相对来说<code>rollup</code>是一个比较主流的打包工具, 不比<code>webpack</code>的配置复杂, 比较适合用来打包一些工具型(library)的js库, 当然也可以用来打包一般的web项目. 特点是打包配置相对于<code>webpack</code>来说更加简单, 并且自动进行<code>tree-shacking</code>. </p><p>至于<code>sass</code>的打包, 我看到代码中只要还是依赖<code>node-sass</code>进行手动的打包:</p><div class=\"language-json codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-json codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token property\" style=\"color:#36acaa\">\"css-compile-main\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"node-sass --output-style expanded --source-map true --source-map-contents true --precision 6 scss/ -o dist/css/ &amp;&amp; npm run css-copy\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>至于其他的命令其实没有那么重要, 主要是一些代码可视化和兼容性的优化以及测试的部分.</p><p>剩余应当说一说的, 应该是文档相关的操作. </p><p><code>Bootstrap</code>通过<code>jekyll</code>这个静态站点生成器吧位于<code>site</code>中的文档编译成<code>html</code></p><div class=\"language-js codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token string-property property\" style=\"color:#36acaa\">\"docs\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"npm-run-all css-docs js-docs docs-compile docs-lint\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token string-property property\" style=\"color:#36acaa\">\"docs-compile\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"bundle exec jekyll build\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token string-property property\" style=\"color:#36acaa\">\"docs-production\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"cross-env JEKYLL_ENV=production npm run docs-compile\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token string-property property\" style=\"color:#36acaa\">\"docs-netlify\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"cross-env JEKYLL_ENV=netlify npm run docs-compile\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token string-property property\" style=\"color:#36acaa\">\"docs-lint\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"node build/vnu-jar.js\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token string-property property\" style=\"color:#36acaa\">\"docs-serve\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"bundle exec jekyll serve\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token string-property property\" style=\"color:#36acaa\">\"docs-serve-only\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"npm run docs-serve -- --skip-initial-build --no-watch\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>所以, 最终bootstrap的处理流程大致是这样的:</p><p><img loading=\"lazy\" src=\"data:image/png;base64,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\" width=\"470\" height=\"478\" class=\"img_SmpS\"></p><p>大体上来说, 传统的UI组件库只需要控制<code>js</code>和<code>css</code>, 使用方式也是对特定的标签添加类名. 简单并且朴素. </p><p>实际上直到现在还是有很多网站依赖于这些传统的技术方案. 因为他们足够使用了. </p><h2 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"element-组件库\">Element 组件库<a class=\"hash-link\" href=\"#element-组件库\" title=\"标题的直接链接\">​</a></h2><p>不过从到2014年以后, 情况发生了一些变化. facebook团队开源他们的内部工具<code>react</code>, 再后来, 尤雨溪退出了<code>vue</code>. 前端的世界发生了一点变化. (额外说一嘴, angular早在2009年就出现了, 不过一直没有在国内火起来).</p><p><img loading=\"lazy\" src=\"/assets/images/feframwork-93b7885063d05e59baa3e20fb8f4d707.png\" width=\"733\" height=\"410\" class=\"img_SmpS\"></p><p>那以后, 由于前端组件化概念的演进, UI框架的形态发生了变化.</p><p>新的形态, 叫做组件库, 相比UI框架来说, 组件库集成程度要更高一点, 包含了一些逻辑的处理. 在众多的UI框架中, <code>Element</code>是一个比较优秀的组件库. 并且对比<code>ant design</code>源码的阅读更加清晰(antd design把框架的操作封装到<code>antd-tool</code>中, 读起来不是很爽)</p><p><img loading=\"lazy\" src=\"/assets/images/component-36b731c027a8ec3a9a6834a2b2d0b7b0.png\" width=\"2778\" height=\"1653\" class=\"img_SmpS\"></p><p>同样的, 我们先来看项目目录以及<code>package.json</code>文件, </p><p><code>Elemnet</code>依赖于<code>vue</code>框架, 因此打包单位也是一个个的<code>vue</code>组件. 其组件目录在<code>packages</code>中, 每个组件都有一个<code>index.js</code>和一个<code>src</code>文件夹存放对应的<code>vue</code>模板文件. </p><p>还在<code>2.2.2</code>版本左右的时候, 部分组件还有<code>package.json</code>文件, 用于独立发布组件和版本控制. 后来可能处于实际的考虑, 把<code>package.json</code>文件都删除了. </p><p><img loading=\"lazy\" src=\"data:image/png;base64,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\" width=\"1031\" height=\"323\" class=\"img_SmpS\"></p><p>在具体的编译过程上面, <code>Element</code>底层的打包工具已经是<code>webpack</code>了, 基本的逻辑是遍历package中的文件夹, 在<code>src</code>里面生成一个index.js文件, 然后调用配置好的webpack文件进行打包.</p><p>对于样式的处理上, <code>element</code>使用的是<code>sass</code>预编译语言, 在<code>packages</code>文件夹中有一个<code>theme-chalk</code>文件, 里面存放了所有组件的scss文件, 会用过<code>npm</code>调用<code>build:theme</code>, 激活<code>gulp</code>中的任务, 把<code>scss</code>文件编译到<code>lib</code>文件夹中. </p><p>对于编译产物, 一个是生成了一个包含全部组件的<code>index.js</code>和在<code>theme</code>文件夹中的index.css. 另一个是对每个组件都生成了独立样式文件和js入口文件. </p><p>Element 大概就是这样了, 可以看到整体的项目架构没有变化, 文档, 组件库, 测试. 而使用的工程化工具则发生了天翻地覆的变化. 当然这些工具并没有说哪个一定比哪个好. 也仅仅是技术选型上的不同. </p><p>下面我想介绍一种另一个风格的组件库</p><h2 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"material-component-design\">Material Component Design<a class=\"hash-link\" href=\"#material-component-design\" title=\"标题的直接链接\">​</a></h2><p>好的, 现在我要介绍一个md设计的组件库: <code>Material-Component-Web-Compoment</code>. 这个库看起来和<code>element</code>的目录接口差不多. 不过不同的地方在他在每个组件的目录下面塞了一个<code>package.json</code>文件.</p><p>这些<code>package.json</code>文件实际上是一种多<code>package.json</code>组件的版本管理方案</p><p><img loading=\"lazy\" src=\"/assets/images/lerna-3b24d6215dab8075d99c5573927e7dbf.png\" width=\"1153\" height=\"547\" class=\"img_SmpS\"></p><p>这种方案依赖于<code>lerna</code>这个版本管理工具. 当然这个版本管理工具实际上历史也比较就远了</p><p><img loading=\"lazy\" src=\"/assets/images/lerna-3b24d6215dab8075d99c5573927e7dbf.png\" width=\"1153\" height=\"547\" class=\"img_SmpS\"></p><p><code>lerna</code>这个工具主要可以帮助你解决组件之间相互依赖的问题, 并且可以自动的遍历文件夹下面的所有组件, 升级相关的依赖. <code>lerna</code>提供一个配置文件帮助你配置某些你需要的项目:</p><div class=\"language-json codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-json codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"version\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"1.1.3\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"npmClient\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"npm\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"command\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:#36acaa\">\"publish\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"ignoreChanges\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token string\" style=\"color:#e3116c\">\"ignored-file\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"*.md\"</span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"message\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"chore(release): publish\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"registry\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"https://npm.pkg.github.com\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token property\" style=\"color:#36acaa\">\"bootstrap\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"ignore\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"component-*\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"npmClientArgs\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token string\" style=\"color:#e3116c\">\"--no-package-lock\"</span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"packages\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token string\" style=\"color:#e3116c\">\"packages/*\"</span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p><code>lerna</code>这个库的使用, 我这里就不具体的展开讲解了, 文档上都有. 回到<code>md-web-component</code>这个库来讲, 其和<code>element</code>的区别主要有两个, 一个是它是基于<code>web-compnent</code>实现的组件库, 另一个是它将所有的组件零散的发布到<code>npm</code>库上, 通过组织名称进行管理. </p><p><img loading=\"lazy\" src=\"/assets/images/6da94f96-1a06-11e6-8b04-dc3171f79a90-233ab05608049475133b77d4c83de377.png\" width=\"960\" height=\"868\" class=\"img_SmpS\"></p><p>这是两种不同的模式. 一般来说, 现在主流的<code>ant design</code>和<code>element</code>是保持一致的, 并且根据我们的使用场景来说是比较合适的. 那么为什么<code>md-web-component</code>这个库会采用这种方式来管理不同的组件呢?</p><p>个人认为, 这和<code>web-component</code>这个基础技术可能有一定的关系. </p><p><img loading=\"lazy\" src=\"/assets/images/web-component-8e8883351a6da8c425dd4f4729972742.png\" width=\"740\" height=\"492\" class=\"img_SmpS\"></p><p>我们知道<code>web-component</code>这是一项web标准基础技术. 和<code>PWA</code>一样, 他不是一个独立的技术栈, 而是一些标准组成的. 主要是由以下四个:</p><ul><li><code>window.customElements</code>: 自定义元素, 可以想<code>vue/react</code>那样自定义html的标签.</li></ul><div class=\"language-js codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token dom variable\" style=\"color:#36acaa\">window</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token property-access\">customElements</span><span class=\"token punctuation\" style=\"color:#393A34\">.</span><span class=\"token method function property-access\" style=\"color:#d73a49\">define</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token string\" style=\"color:#e3116c\">'my-element'</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"> </span><span class=\"token maybe-class-name\">MyElement</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"color:#00009f\">class</span><span class=\"token plain\"> </span><span class=\"token class-name\">MyElement</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"color:#00009f\">extends</span><span class=\"token plain\"> </span><span class=\"token class-name\">HTMLElement</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token function\" style=\"color:#d73a49\">constructor</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"color:#00009f\">super</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token punctuation\" style=\"color:#393A34\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token function\" style=\"color:#d73a49\">connectedCallback</span><span class=\"token punctuation\" style=\"color:#393A34\">(</span><span class=\"token punctuation\" style=\"color:#393A34\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\">// here the element has been inserted into the DOM</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>还提供了一些生命周期:</p><div class=\"codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">constructor -&gt; attributeChangedCallback -&gt; connectedCallback</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><ul><li><code>shadowDOM</code>: 提供不可见的HTML/CSS, 相当于组件, 本质上实现了<code>html</code>和<code>css</code>的组件化</li></ul><div class=\"language-html codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-html codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token tag punctuation\" style=\"color:#393A34\">&lt;</span><span class=\"token tag\" style=\"color:#00009f\">template</span><span class=\"token tag\" style=\"color:#00009f\"> </span><span class=\"token tag attr-name\" style=\"color:#00a4db\">id</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:#393A34\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:#393A34\">\"</span><span class=\"token tag attr-value\" style=\"color:#e3116c\">userCardTemplate</span><span class=\"token tag attr-value punctuation\" style=\"color:#393A34\">\"</span><span class=\"token tag punctuation\" style=\"color:#393A34\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:#393A34\">&lt;</span><span class=\"token tag\" style=\"color:#00009f\">img</span><span class=\"token tag\" style=\"color:#00009f\"> </span><span class=\"token tag attr-name\" style=\"color:#00a4db\">src</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:#393A34\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:#393A34\">\"</span><span class=\"token tag attr-value\" style=\"color:#e3116c\">https://semantic-ui.com/images/avatar2/large/kristy.png</span><span class=\"token tag attr-value punctuation\" style=\"color:#393A34\">\"</span><span class=\"token tag\" style=\"color:#00009f\"> </span><span class=\"token tag attr-name\" style=\"color:#00a4db\">class</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:#393A34\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:#393A34\">\"</span><span class=\"token tag attr-value\" style=\"color:#e3116c\">image</span><span class=\"token tag attr-value punctuation\" style=\"color:#393A34\">\"</span><span class=\"token tag punctuation\" style=\"color:#393A34\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:#393A34\">&lt;</span><span class=\"token tag\" style=\"color:#00009f\">div</span><span class=\"token tag\" style=\"color:#00009f\"> </span><span class=\"token tag attr-name\" style=\"color:#00a4db\">class</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:#393A34\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:#393A34\">\"</span><span class=\"token tag attr-value\" style=\"color:#e3116c\">container</span><span class=\"token tag attr-value punctuation\" style=\"color:#393A34\">\"</span><span class=\"token tag punctuation\" style=\"color:#393A34\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token tag punctuation\" style=\"color:#393A34\">&lt;</span><span class=\"token tag\" style=\"color:#00009f\">p</span><span class=\"token tag\" style=\"color:#00009f\"> </span><span class=\"token tag attr-name\" style=\"color:#00a4db\">class</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:#393A34\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:#393A34\">\"</span><span class=\"token tag attr-value\" style=\"color:#e3116c\">name</span><span class=\"token tag attr-value punctuation\" style=\"color:#393A34\">\"</span><span class=\"token tag punctuation\" style=\"color:#393A34\">&gt;</span><span class=\"token plain\">User Name</span><span class=\"token tag punctuation\" style=\"color:#393A34\">&lt;/</span><span class=\"token tag\" style=\"color:#00009f\">p</span><span class=\"token tag punctuation\" style=\"color:#393A34\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token tag punctuation\" style=\"color:#393A34\">&lt;</span><span class=\"token tag\" style=\"color:#00009f\">p</span><span class=\"token tag\" style=\"color:#00009f\"> </span><span class=\"token tag attr-name\" style=\"color:#00a4db\">class</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:#393A34\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:#393A34\">\"</span><span class=\"token tag attr-value\" style=\"color:#e3116c\">email</span><span class=\"token tag attr-value punctuation\" style=\"color:#393A34\">\"</span><span class=\"token tag punctuation\" style=\"color:#393A34\">&gt;</span><span class=\"token plain\">yourmail@some-email.com</span><span class=\"token tag punctuation\" style=\"color:#393A34\">&lt;/</span><span class=\"token tag\" style=\"color:#00009f\">p</span><span class=\"token tag punctuation\" style=\"color:#393A34\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token tag punctuation\" style=\"color:#393A34\">&lt;</span><span class=\"token tag\" style=\"color:#00009f\">button</span><span class=\"token tag\" style=\"color:#00009f\"> </span><span class=\"token tag attr-name\" style=\"color:#00a4db\">class</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:#393A34\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:#393A34\">\"</span><span class=\"token tag attr-value\" style=\"color:#e3116c\">button</span><span class=\"token tag attr-value punctuation\" style=\"color:#393A34\">\"</span><span class=\"token tag punctuation\" style=\"color:#393A34\">&gt;</span><span class=\"token plain\">Follow</span><span class=\"token tag punctuation\" style=\"color:#393A34\">&lt;/</span><span class=\"token tag\" style=\"color:#00009f\">button</span><span class=\"token tag punctuation\" style=\"color:#393A34\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:#393A34\">&lt;/</span><span class=\"token tag\" style=\"color:#00009f\">div</span><span class=\"token tag punctuation\" style=\"color:#393A34\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:#393A34\">&lt;/</span><span class=\"token tag\" style=\"color:#00009f\">template</span><span class=\"token tag punctuation\" style=\"color:#393A34\">&gt;</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>这是一种原生的, 真正意义上的组件化.</p><ul><li><code>html imports</code>: 可以再一个html文章中包含另一个html, 可以用来做外部内容的引入</li><li><code>template</code>: 模板元素, 可以保存客户端的内容机制. 可以用来做动态DOM生成</li></ul><p>这些特定, 决定了一个<code>web-component</code>组件可以独立的. 自由的在web网页中存在. 也就是说, <code>web-component</code>不同于<code>react/vue</code>这种框架下的组件, 需要一个<code>runtime</code>, 而是可以在原生环境中独立运行. </p><p>可惜, 直到今天, 浏览器的支持程度还不不够. </p><p>再回头来看md-component这个库的设计, 从我理解的角度就可以解释这种独立分发的设计了. </p><h2 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"再说说其他\">再说说其他<a class=\"hash-link\" href=\"#再说说其他\" title=\"标题的直接链接\">​</a></h2><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"关于微前端\">关于微前端<a class=\"hash-link\" href=\"#关于微前端\" title=\"标题的直接链接\">​</a></h3><p>UI框架从单纯的<code>css</code>到框架的组件层面, 实际上集成度是越来越高的. 那更进一步是什么? 我想大概是微前端了. </p><p>不仅包含了完整的一个前端, 还包含了对应的后端逻辑. 当前, 代价就是通用性降低. </p><p>实际上, <code>web-component</code>这项技术很适合作为微前端体系的载体, 能够动态加载html, css和js, 当然就可以动态的加载一个完整的微前端. </p><p>这也是事实上的一种微前端的设计方案.</p><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"关于web技术\">关于web技术<a class=\"hash-link\" href=\"#关于web技术\" title=\"标题的直接链接\">​</a></h3><p>最后一小部分我提到了<code>web-component</code>, 这使得我不得不想到现有的<code>react/vue</code>这样的框架. react退出来有7年了. 而<code>vue</code>也差不多<code>6</code>年了. </p><p>未来前端技术的发展方向会在什么地方, 微前端还是移动端, 物联网还是人工智能.</p>",
            "url": "https://wiki.jeiizou.site/blog/2020/07/11/前端项目结构演进",
            "title": "前端项目结构演进",
            "summary": "组件框架分析",
            "date_modified": "2020-07-11T00:00:00.000Z",
            "author": {
                "name": "Jeii Zou",
                "url": "https://github.com/jeiizou"
            },
            "tags": []
        },
        {
            "id": "/2020/06/11/关于 vscode 的一些废话",
            "content_html": "<h1>关于 vscode 的一些废话</h1><h2 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"vscode-的核心组件\">vscode 的核心组件<a class=\"hash-link\" href=\"#vscode-的核心组件\" title=\"标题的直接链接\">​</a></h2><ul><li><a href=\"https://www.electronjs.org/docs/tutorial/quick-start#%E5%BF%AB%E9%80%9F%E5%90%AF%E5%8A%A8%E6%8C%87%E5%8D%97\" target=\"_blank\" rel=\"noopener noreferrer\">electron: 桌面端框架</a></li><li><a href=\"https://microsoft.github.io/monaco-editor/index.html\" target=\"_blank\" rel=\"noopener noreferrer\">Monaco Editor: 代码编辑器</a></li><li>TypeScript: 编程语言</li><li><a href=\"https://docs.microsoft.com/zh-cn/visualstudio/extensibility/language-server-protocol?view=vs-2019\" target=\"_blank\" rel=\"noopener noreferrer\">Language Server Protocol: 语言服务器协议</a></li><li><a href=\"https://microsoft.github.io/debug-adapter-protocol/specification#:~:text=Debug%20Adapter%20Protocol.%20The%20Debug%20Adapter%20Protocol%20defines,history%20of%20the%20specification%20can%20be%20found%20here.\" target=\"_blank\" rel=\"noopener noreferrer\">Debug Adapter Protocol</a></li><li><a href=\"https://xtermjs.org/\" target=\"_blank\" rel=\"noopener noreferrer\">xterm.js: web 终端组件</a></li></ul><h2 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"个人向vscode-常用插件推荐\">(个人向)vscode 常用插件推荐<a class=\"hash-link\" href=\"#个人向vscode-常用插件推荐\" title=\"标题的直接链接\">​</a></h2><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"不推荐安装的插件列表\">不推荐安装的插件列表<a class=\"hash-link\" href=\"#不推荐安装的插件列表\" title=\"标题的直接链接\">​</a></h3><ul><li>highlight matching tag: 官方已经集成</li><li>npm intellisense: 官方已经集成</li><li>sync setting: 使用自带账号同步的更好</li><li>Project Manager: 自带功能</li><li>JS Refactor: 自带功能</li><li>auto rename tag: vscode自带</li></ul><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"开发辅助\">开发辅助<a class=\"hash-link\" href=\"#开发辅助\" title=\"标题的直接链接\">​</a></h3><ul><li>React-Native/React/Redux snippets for es6/es7: 集成大量常用代码片段</li><li>Path Intellisense: 自动路径补全</li><li>surround: 快速代码块包裹</li><li>todo tree: todo 标记快速查找</li><li>change-case: 字符串格式变换</li><li>Vue VSCode Snippets: vue 代码提示</li><li>css peek: 快速跳转css相关代码</li></ul><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"工程流辅助\">工程流辅助<a class=\"hash-link\" href=\"#工程流辅助\" title=\"标题的直接链接\">​</a></h3><ul><li>prettier: 代码格式化</li><li>vetur: 专属于vue的代码格式化插件</li><li>live-serve: 一键开启本地server服务</li><li>live-share: 协同开发</li><li>remote ssh: 远程开发利器</li><li>gitlens: git 增强</li><li>import cost: 库类引入代价</li></ul><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"日常实用\">日常实用<a class=\"hash-link\" href=\"#日常实用\" title=\"标题的直接链接\">​</a></h3><ul><li>leetcode: 算法刷题神器</li><li>vscode-reveal: PPT速写</li><li>draw.io: 流程图工具</li><li>markdown all in one</li><li>Search/Translate Hero</li><li>REST Client: 替代 postmen</li><li>filesize: 显示当前打开的文件大小, 点击后还可以看到详细创建、修改时间</li><li>fileheader: 文件头输入</li></ul><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"娱乐向\">娱乐向<a class=\"hash-link\" href=\"#娱乐向\" title=\"标题的直接链接\">​</a></h3><ul><li>韭菜小猪</li><li>小霸王</li><li>vsc-netease-music: 网易云音乐</li><li>daily-anime: 追番动态</li></ul><h2 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"vscode-使用技巧\">vscode 使用技巧<a class=\"hash-link\" href=\"#vscode-使用技巧\" title=\"标题的直接链接\">​</a></h2><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"实用的快捷键\">实用的快捷键<a class=\"hash-link\" href=\"#实用的快捷键\" title=\"标题的直接链接\">​</a></h3><ol><li>古老的<code>emmet</code></li></ol><ul><li><code>! + tab</code>: 生成html结构</li><li><code>#</code>: ID</li><li><code>.</code>: class</li><li><code>&gt;</code>: 子节点</li><li><code>+</code>: 兄弟节点</li><li><code>^</code>: 上级节点</li><li><code>*</code>: 重复</li><li><code>()</code>: 分组</li><li><code>[]</code>: 属性</li><li><code>$</code>: 编号, 一个$一位数, <code>@</code>: 从xx开始递增, 比如<code>$@3</code>, 表示从3开始递增</li><li><code>{}</code>: 文本</li></ul><ol start=\"2\"><li>最常用的快捷键</li></ol><p>命令窗口:</p><ul><li><code>command + p</code>: 跳转到最近打开的文件</li><li><code>control + r</code>: 跳转最近打开的项目</li><li><code>cmd + shift + p</code>: 命令面板</li></ul><p>窗口管理:</p><ul><li><code>command + tab</code>: 切换tab</li><li><code>command + \\</code>: 切换出一个新的编辑器窗口</li></ul><p>格式调整:</p><ul><li><code>command + [, command + ]</code> 左右缩进</li><li><code>option + shift + f</code>: 手动格式化代码</li><li><code>option + up/down</code>: 上下移动当前行</li><li><code>option + shift + up/down</code>: 上下复制当前行</li><li><code>command + enter</code>: 下方插入一行</li><li><code>command + shift + enter</code>: 上方插入一行</li></ul><p>光标:</p><ul><li><code>command + left/right</code>: 行首/行尾</li><li><code>command + up/down</code>: 文首/文尾</li><li><code>command + back</code>: 删除光标之前</li><li><code>command + shift + k</code>: 删除本行</li><li><code>command + option + up/down</code>: 多光标</li><li><code>command + d</code>: 选中项匹配</li></ul><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"用户代码片段\">用户代码片段<a class=\"hash-link\" href=\"#用户代码片段\" title=\"标题的直接链接\">​</a></h3><p>设置 =&gt; 用户代码片段 =&gt; 创建不同的用户代码片段</p><div class=\"language-js codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token string-property property\" style=\"color:#36acaa\">'prefix'</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> 触发短语</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token string-property property\" style=\"color:#36acaa\">'body'</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> 代码片段内容</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token string-property property\" style=\"color:#36acaa\">'description:'</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> 片段描述</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>环境变量:</p><ul><li><code>TM_SELECTED_TEXT</code> 当前选定的文本或空字符串</li><li><code>TM_CURRENT_LINE</code> 当前行的内容</li><li><code>TM_CURRENT_WORD</code> 光标下的内容或空字符串</li><li><code>TM_LINE_INDEX</code> 从零开始的当前行号</li><li><code>TM_LINE_NUMBER</code> 从一开始的当前行号</li><li><code>TM_FILENAME</code> 当前文档的文件名</li><li><code>TM_FILENAME_BASE</code>基当前文档的文件名，不带扩展名</li><li><code>TM_DIRECTORY</code>当前文档的目录</li><li><code>TM_FILEPATH</code> 当前文档的完整文件路径</li><li><code>CLIPBOARD</code> 剪贴板的内容</li><li><code>WORKSPACE_NAME</code> 打开的工作区或文件夹的名称</li></ul><p>日期: </p><ul><li><code>CURRENT_YEAR</code> 当前年份</li><li><code>CURRENT_YEAR_SHORT</code> 当前年份的最后两位数字</li><li><code>CURRENT_MONTH</code> 两位数的当前月份（例如“02”）</li><li><code>CURRENT_MONTH_NAME</code> 当前月份的英文全名（例如’July’）</li><li><code>CURRENT_MONTH_NAME_SHORT</code> 当前月份的英文短名称（例如’Jul’）</li><li><code>CURRENT_DATE</code> 今天几号</li><li><code>CURRENT_DAY_NAME</code> 英文的星期几（例如’Monday’）</li><li><code>CURRENT_DAY_NAME_SHORT</code> 英文星期几的短名称（例如’Mon’）</li><li><code>CURRENT_HOUR</code> 24小时制的当前小时</li><li><code>CURRENT_MINUTE</code> 当前分钟</li><li><code>CURRENT_SECOND</code> 当前秒</li><li><code>CURRENT_SECONDS_UNIX</code> 自格林威治时间以来的秒数(1970年1月1日)</li></ul><p>注释, 会跟随语言发生变化:</p><ul><li><code>BLOCK_COMMENT_START</code> 区块注释开始<code>&lt;!--</code></li><li><code>BLOCK_COMMENT_END</code> 区块注释结束<code>--&gt;</code></li></ul><p>文字转换(正则): </p><ul><li><code>${TM_FILENAME/[\\\\.]/_/}</code></li></ul><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"task\">task<a class=\"hash-link\" href=\"#task\" title=\"标题的直接链接\">​</a></h3><ul><li><code>command + shift + B</code>: 运行tasks</li></ul><p>task 会自动检测一些命令, 比如 npm, gulp, jake, grunt, typescript</p><p>也可以自定义一些任务.</p><ul><li>自定义任务的类型, 比如shell或者precess</li><li>定义任务的运行时间和如何运行</li></ul><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"复合任务\">复合任务<a class=\"hash-link\" href=\"#复合任务\" title=\"标题的直接链接\">​</a></h3><div class=\"language-json codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-json codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"version\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"2.0.0\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"tasks\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"label\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"Client Build\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"command\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"gulp\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"args\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token string\" style=\"color:#e3116c\">\"build\"</span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"options\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token property\" style=\"color:#36acaa\">\"cwd\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"${workspaceFolder}/client\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"label\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"Server Build\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"command\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"gulp\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"args\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token string\" style=\"color:#e3116c\">\"build\"</span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"options\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token property\" style=\"color:#36acaa\">\"cwd\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"${workspaceFolder}/server\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"label\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"Build\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"dependsOn\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token string\" style=\"color:#e3116c\">\"Client Build\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"Server Build\"</span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>build会默认并行运行这两个子任务</p><p>也可以通过<code>sequence</code>让两个命令顺序运行</p><div class=\"language-json codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-json codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"label\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"One\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"type\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"shell\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"command\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"echo Hello \"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"dependsOrder\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"sequence\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"dependsOn\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token string\" style=\"color:#e3116c\">\"Two\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"Three\"</span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>这里就会先运行2, 然后运行3, 然后运行1</p><p>还有一些其他的控制特性:</p><ul><li>控制运行任务的时候页面如何显示, 打开终端或者不打开终端</li><li>控制运行的时机, 比如打开项目的时候就直接自动运行</li></ul><p>还可以在任务运行命令中中加入变量, 比如下面这些预定义变量:</p><ul><li><code>${workspaceFolder}</code> -在VS Code中打开的文件夹的路径</li><li><code>${workspaceFolderBasename}</code> -在VS Code中打开的文件夹名称，不带任何斜杠（/）</li><li><code>${file}</code> -当前打开的文件</li><li><code>${relativeFile}</code> -当前相对于打开的文件workspaceFolder</li><li><code>${relativeFileDirname}</code> -当前打开的文件相对于的目录名workspaceFolder</li><li><code>${fileBasename}</code> -当前打开的文件的基本名称</li><li><code>${fileBasenameNoExtension}</code> -当前打开的文件的基本名称，没有文件扩展名</li><li><code>${fileDirname}</code> -当前打开的文件的目录名</li><li><code>${fileExtname}</code> -当前打开的文件的扩展名</li><li><code>${cwd}</code> -启动时任务运行程序的当前工作目录</li><li><code>${lineNumber}</code> -活动文件中当前选择的行号</li><li><code>${selectedText}</code> -活动文件中的当前选定文本</li><li><code>${execPath}</code> -正在运行的VS Code可执行文件的路径</li><li><code>${defaultBuildTask}</code> -默认构建任务的名称</li></ul><p>或者直接获取环境变量:</p><div class=\"language-json codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-json codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"type\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"node\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"request\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"launch\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"name\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"Launch Program\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"program\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"${workspaceFolder}/app.js\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"cwd\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"${workspaceFolder}\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"args\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token string\" style=\"color:#e3116c\">\"${env:USERNAME}\"</span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>其他变量</p><ul><li>获取vscode配置的变量: <code>${config：Name}</code></li><li>使用命令变量: <code>${command:extension.pickNodeProcess}</code></li><li>使用输入变量: <code>${input:variableID}</code> , 可以选择输入框或者下拉列表或者选取一个命令</li></ul><div class=\"language-json codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-json codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"version\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"2.0.0\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"tasks\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"label\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"ng g\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"type\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"shell\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"command\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"ng\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"args\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token string\" style=\"color:#e3116c\">\"g\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"${input:componentType}\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"${input:componentName}\"</span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"inputs\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"type\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"pickString\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"id\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"componentType\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"description\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"What type of component do you want to create?\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"options\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token string\" style=\"color:#e3116c\">\"component\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token string\" style=\"color:#e3116c\">\"directive\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token string\" style=\"color:#e3116c\">\"pipe\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token string\" style=\"color:#e3116c\">\"service\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token string\" style=\"color:#e3116c\">\"class\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token string\" style=\"color:#e3116c\">\"guard\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token string\" style=\"color:#e3116c\">\"interface\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token string\" style=\"color:#e3116c\">\"enum\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token string\" style=\"color:#e3116c\">\"enum\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"default\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"component\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"type\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"promptString\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"id\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"componentName\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"description\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"Name your component.\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"default\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"my-new-component\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>应用实例: 选择某个测试用例单独运行</p><div class=\"language-json codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-json codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"configurations\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"type\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"node\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"request\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"launch\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"name\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"Run specific test\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"program\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"${workspaceFolder}/${input:pickTest}\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"inputs\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"id\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"pickTest\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"type\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"command\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"command\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"extension.mochaSupport.testPicker\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"args\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token property\" style=\"color:#36acaa\">\"testFolder\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"/out/tests\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>应用命令还能和任务一起运行:</p><div class=\"language-json codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-json codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"version\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"2.0.0\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"tasks\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"label\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"Terminate All Tasks\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"command\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"echo ${input:terminate}\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"type\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"shell\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"problemMatcher\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token property\" style=\"color:#36acaa\">\"inputs\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"id\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"terminate\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"type\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"command\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"command\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"workbench.action.tasks.terminate\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">      </span><span class=\"token property\" style=\"color:#36acaa\">\"args\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"terminateAll\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"进阶-万物皆虚-万事皆允\">进阶: 万物皆虚, 万事皆允<a class=\"hash-link\" href=\"#进阶-万物皆虚-万事皆允\" title=\"标题的直接链接\">​</a></h2><p>引言: 人人都应该会vscode插件开发</p><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"编写vscode插件那点事\">编写vscode插件那点事<a class=\"hash-link\" href=\"#编写vscode插件那点事\" title=\"标题的直接链接\">​</a></h3><ul><li>推荐教程: <a href=\"https://www.cnblogs.com/liuxianan/p/vscode-plugin-overview.html\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.cnblogs.com/liuxianan/p/vscode-plugin-overview.html</a></li><li>文档: <a href=\"https://code.visualstudio.com/api/references/vscode-api\" target=\"_blank\" rel=\"noopener noreferrer\">https://code.visualstudio.com/api/references/vscode-api</a></li><li>中文文档: <a href=\"https://www.bookstack.cn/read/VS-Code-Extension-Doc-ZH/%E7%AC%AC%E4%B8%80%E7%89%88.md\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.bookstack.cn/read/VS-Code-Extension-Doc-ZH/%E7%AC%AC%E4%B8%80%E7%89%88.md</a></li></ul><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"vscode插件能做的事\">vscode插件能做的事<a class=\"hash-link\" href=\"#vscode插件能做的事\" title=\"标题的直接链接\">​</a></h3><ul><li>不受限制的本地资源访问</li><li>自定义命令, 快捷键, 菜单</li><li>自定义跳转, 自动补全, 悬浮提示</li><li>自定义设置, 自定义欢迎页</li><li>自定义webview</li><li>自定义颜色, 图标主题</li><li>新增语言支持</li><li>等等</li></ul><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"快速起步\">快速起步<a class=\"hash-link\" href=\"#快速起步\" title=\"标题的直接链接\">​</a></h3><ol><li>安装脚手架</li></ol><div class=\"language-js codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">npm install </span><span class=\"token operator\" style=\"color:#393A34\">-</span><span class=\"token plain\">g yo generator</span><span class=\"token operator\" style=\"color:#393A34\">-</span><span class=\"token plain\">code</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><ol start=\"2\"><li>运行脚手架</li></ol><div class=\"language-js codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">yo code</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><ol start=\"3\"><li>打开项目, 按f5, 开始开发</li></ol><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"主要文件\">主要文件<a class=\"hash-link\" href=\"#主要文件\" title=\"标题的直接链接\">​</a></h3><ul><li>extension.js: 项目激活的入口</li><li>package.json: 项目配置</li></ul><div class=\"language-js codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token string-property property\" style=\"color:#36acaa\">\"contributes\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token string-property property\" style=\"color:#36acaa\">\"commands\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">            </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">                </span><span class=\"token string-property property\" style=\"color:#36acaa\">\"command\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"extension.sayHello\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">                </span><span class=\"token string-property property\" style=\"color:#36acaa\">\"title\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"Hello World\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">            </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\">// 快捷键绑定</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token string-property property\" style=\"color:#36acaa\">\"keybindings\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">            </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">                </span><span class=\"token string-property property\" style=\"color:#36acaa\">\"command\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"extension.sayHello\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">                </span><span class=\"token string-property property\" style=\"color:#36acaa\">\"key\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"ctrl+f10\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">                </span><span class=\"token string-property property\" style=\"color:#36acaa\">\"mac\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"cmd+f10\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">                </span><span class=\"token string-property property\" style=\"color:#36acaa\">\"when\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"editorTextFocus\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">            </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token comment\" style=\"color:#999988;font-style:italic\">// 设置菜单</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token string-property property\" style=\"color:#36acaa\">\"menus\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">            </span><span class=\"token string-property property\" style=\"color:#36acaa\">\"editor/context\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:#393A34\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">                </span><span class=\"token punctuation\" style=\"color:#393A34\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">                    </span><span class=\"token string-property property\" style=\"color:#36acaa\">\"when\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"editorFocus\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">                    </span><span class=\"token string-property property\" style=\"color:#36acaa\">\"command\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"extension.sayHello\"</span><span class=\"token punctuation\" style=\"color:#393A34\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">                    </span><span class=\"token string-property property\" style=\"color:#36acaa\">\"group\"</span><span class=\"token operator\" style=\"color:#393A34\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:#e3116c\">\"navigation\"</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">                </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">            </span><span class=\"token punctuation\" style=\"color:#393A34\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:#393A34\">}</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>",
            "url": "https://wiki.jeiizou.site/blog/2020/06/11/关于 vscode 的一些废话",
            "title": "关于 vscode 的一些废话",
            "summary": "vscode 的核心组件",
            "date_modified": "2020-06-11T00:00:00.000Z",
            "author": {
                "name": "Jeii Zou",
                "url": "https://github.com/jeiizou"
            },
            "tags": []
        },
        {
            "id": "/2020/05/01/Deno, 以及相关的一切",
            "content_html": "<p><img loading=\"lazy\" alt=\"image\" src=\"data:image/png;base64,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\" width=\"440\" height=\"440\" class=\"img_SmpS\"></p><h2 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"大纲\">大纲<a class=\"hash-link\" href=\"#大纲\" title=\"标题的直接链接\">​</a></h2><ul><li>什么是Deno?</li><li>为什么不继续使用Node?</li><li>Node和Deno的区别在哪里?</li><li>Deno是如何设计的?</li></ul><h2 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"什么是deno\">什么是Deno?<a class=\"hash-link\" href=\"#什么是deno\" title=\"标题的直接链接\">​</a></h2><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"deno-介绍\">Deno 介绍<a class=\"hash-link\" href=\"#deno-介绍\" title=\"标题的直接链接\">​</a></h3><blockquote><p>Deno是基于Google V8引擎构建的安全的JavaScript, TypeScript(以及WebAssembly)运行环境。</p></blockquote><p>等等, 这话听着耳熟, 这不是和node一个玩意吗? </p><p>是的, 这确实和node是类似的玩意. </p><p>Deno和Node实际上是同一个作者Ryan Dahl(以下简称Ry)的作品. Deno的名称由来也就是node进行拆分, 然后倒过来, 取<code>Destroy Node.js</code>的意思, 同时取<code>dinosaur</code>的缩写<code>dino</code>, 因此把一直可爱的小恐龙作为标志. </p><p>说了这么多, 我们已经如此广泛的应用了Node, 有什么理由来让我们放弃Node, 改而使用Deno呢?</p><h2 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"ry为什么不继续使用node\">Ry为什么不继续使用Node?<a class=\"hash-link\" href=\"#ry为什么不继续使用node\" title=\"标题的直接链接\">​</a></h2><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"node的发展历程\">Node的发展历程<a class=\"hash-link\" href=\"#node的发展历程\" title=\"标题的直接链接\">​</a></h3><p>基于现在的情况, 我们不会也不可能放弃掉Node, 但是, Deno给我们解释了一些Node的不足以及Deno会带来的辩护. </p><p>实际上, Deno的目标可能不是替代Node. 为什么这么说, 我们来看看Deno是如何出现的.</p><p><img loading=\"lazy\" src=\"/assets/images/js-timeline-cb7ff49e5e934e7d32ddaec2622230de.png\" width=\"800\" height=\"279\" class=\"img_SmpS\"></p><p>我们先来看看这些年前端开发中的一些重要历史节点. 你会发现, 实际上Node已经是一个历经了11年的框架了. </p><p>尤其是在过去的5,6年间, javascript这门语言发生了脱胎换骨的变化, ES6引入了大量的新的语法特性, 比如说其中影响最大两个新特性: Promise 和 ES模块方案.</p><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"node存在的缺陷\">Node存在的缺陷<a class=\"hash-link\" href=\"#node存在的缺陷\" title=\"标题的直接链接\">​</a></h3><p>说回到Node, Ry在Node设计之初, 并没有想到Node会发展到如今的地步. 站在今天的角度来看, node的最初设计无意是犯了很多错误的. </p><p>Node项目最早创立于2007年, 在2012年之后由社区接管其发展.  Ry在2017年回过头来捡起这个项目, 却忽然发现\"这个项目已经背离了他的初衷,  有一些无法忽略的问题\". </p><p>上面我们说到了后来出现了Promise和ES modules. 不幸的是, node对这两种特性的支持都不尽人意. 考虑到兼容性, node一直保持了callback的异步回调方式,  因此代码中就会存在两种异步回调方式,  此外, es模块方案和node的模块管理机制总是存在冲突.  导致迟迟无法完全支持es模块</p><p>再者, node的包管理依赖于npm,  所有的包都存在node_modules中, 目录越来越复杂, 管理也越来越难. 还有一些其他的, 难以挽回的糟糕设计. </p><p>如此种种, Ry决定放弃Node, 然后从头开始新造一个轮子. 这个轮子的目标, 就是提供一个简洁安全的new runtime, 来运行<code>javascript/typescript/webassemblt</code></p><h4 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"node-的-设计错误\">Node 的 设计错误<a class=\"hash-link\" href=\"#node-的-设计错误\" title=\"标题的直接链接\">​</a></h4><ol><li><p>没有提供promise, 而是采用了callback. 导致了:</p><ol><li>promise是async/await的必要抽象</li><li>node如果提供了promise可以帮助加快最终标准化和<code>async/await</code>交付</li><li>导致node中的很多异步API老化</li></ol></li><li><p>默认有权限访问文件,网络和环境, 放弃了v8提供的很好的沙盒机制.</p></li><li><p>使用GYP构建系统(目前Node是GYP的唯一用户), Google自己都放弃了GYP而采用了GN. </p></li><li><p>使用package.json来管理模块版本, 在node的发布版本中包含了npm, 这个复杂的模块控制方案和一个模块化(私有控制)的存储库. 提出了一个<code>module</code>作为文件目录的概念, 这不是一个严格必要的抽象, 也不是网络中存在的抽象, 现在的package.json包含了各种不必要的信息: 许可证/仓库/描述等.</p><p><img loading=\"lazy\" src=\"/assets/images/slide-12-4fa6e7b87dc02213411d6919e2ae2e20.jpg\" width=\"1500\" height=\"844\" class=\"img_SmpS\"></p></li><li><p>node_modules: 极大的复杂了模块分辨算法, 偏离了浏览器语义.</p><p><img loading=\"lazy\" src=\"/assets/images/slide-14-926c659e71bf1bda399c28dee30b41fe.jpg\" width=\"1500\" height=\"844\" class=\"img_SmpS\"></p></li><li><p><code>require('module')</code>没有扩展名'.js'. 增加了不必要的模块加载器的分析复杂度, 和浏览器的行为不同. </p></li><li><p><code>index.js</code>: 不必要的复杂度. </p></li></ol><h2 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"node-和-deno-的区别在哪里\">Node 和 Deno 的区别在哪里?<a class=\"hash-link\" href=\"#node-和-deno-的区别在哪里\" title=\"标题的直接链接\">​</a></h2><p>如果要了解Deno, 我们首先需要了解Node.</p><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"node-架构简析\">Node 架构简析<a class=\"hash-link\" href=\"#node-架构简析\" title=\"标题的直接链接\">​</a></h3><p>那么, Node是什么?  简单的说, Node是一个js的不依赖于<code>browser</code>的运行环境. </p><p><img loading=\"lazy\" src=\"/assets/images/node-structor-cee952810b157a2a665b88ffaced07c5.png\" width=\"800\" height=\"347\" class=\"img_SmpS\"></p><p>node是基于C++写的, 本质上就是一个C++应用, 底层主要由几个核心模块构成:</p><ul><li>v8: <ol><li>虚拟机, 执行js代码(包含业务代码, 第三方代码和<code>native modules</code>代码)</li><li>提供<code>C++</code>接口, 为nodejs提供了v8初始化, 创建<code>context</code>,<code>scope</code>等.</li></ol></li><li>libuv: 基于事件驱动的IO模型库, js发出请求, 有libuv完成, 然后触发回调函数</li><li>builtin modules: 由C++代码写成的各类模块, 包含了<code>crypto</code>, <code>zlib</code>, <code>file stream etc</code>基础功能. (v8 提供了函数接口, libuv提供IO模型, 以及一些nodejs函数, 为`builtin modules提供服务)</li><li>native modules: 由js写成, 提供我们应用程序调用的库, 同时这些模块依赖<code>builtin modules</code></li></ul><p>也就是说, node的底层基于v8和libuv, 一手调用C++模块, 一手支撑nodejs方法, 从而为js代码提供了运行能力. 关于其中的一些技术细节, 我们不在这里进行展开的描述. </p><p>那么回过头来看看Deno, 它又是什么样的东西呢? </p><h3 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"deno-架构简析\">Deno 架构简析<a class=\"hash-link\" href=\"#deno-架构简析\" title=\"标题的直接链接\">​</a></h3><p><img loading=\"lazy\" alt=\"image\" src=\"/assets/images/demo_process-e4705588bf244bed0d858f4aec7a2c29.webp\" width=\"800\" height=\"430\" class=\"img_SmpS\"></p><ul><li>底层以Rust实现</li></ul><p>最开始的时候, Deno的原型并不是用Rest实现的, 而是Golang. 由于Go本身提供了GC, 而v8也内置了GC, 导致底层有两条GC在同时运行, 并且需要设计互动. 导致程序的复杂度增加太多. 对于这种高性能要求的库来说, Rust合适很多. 至于为什么不适用<code>C++/C</code>这样的语言: 一是<code>Rust</code>性能也很不错, 并且内存安全, 没有GC, 另外一点是<code>Rust</code>提供了很多现成的模块, 对于Deno来说, 可以节约很多开发时间.</p><p>顺理成章的, Deno使用<code>Rust</code>提供<code>Tokio</code>作为异步IO的库, 并且这也是一个基于轮询模型的I/O库. </p><p>关于Rust的一些讨论可以参考<code>https://github.com/denoland/deno/issues/205</code>这个issues下面的讨论.</p><p>Deno通过v8支持运行js, 然后通过快照缓存了一个tsc的引擎, 原生支持了ts(会自动的进行编译和缓存), 然后又因为rust原生支持webassembly, 所以也可以直接运行webassembly. </p><h4 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"结构划分\">结构划分<a class=\"hash-link\" href=\"#结构划分\" title=\"标题的直接链接\">​</a></h4><p><img loading=\"lazy\" alt=\"image\" src=\"/assets/images/deno-process-eaa8a5938b620a65a750685b3122a8ff.jpg\" width=\"1500\" height=\"844\" class=\"img_SmpS\"></p><p>Deno的结构可以分成三层: 前端V8, 中端libdeno, 后端rust.</p><ol><li>前端v8: 这层包含了对外开放的接口中, 没有直接系统调用的和大多数的工具函数的接口. 在系统中处于\"没有特权方\", 在默认情况下没有文件系统和网络的访问权限(运行在v8沙箱环境中). 如果想要进行文件和网络访问, 就需要与后端的<code>Rust</code>进行通信. 所以很多的系统调用API都是前端通过创建buffer数据, 发送给中端, 然后等待rust返回结果. </li><li>中端<code>libdeno</code>: 本层是介于前端和后端中间比较薄的一层, 用来和v8进行通信并且暴露一些必要的插件(由C/C++实现). 主要暴露了在前端和rust之间发送和接收消息的传递接口, 也用来初始化v8<code>platforms/isolates</code>和创建或者加载<code>V8 snapshot</code>--用来保存序列化得到的堆信息的数据块(文章:<a href=\"https://v8.dev/blog/custom-startup-snapshots\" target=\"_blank\" rel=\"noopener noreferrer\">https://v8.dev/blog/custom-startup-snapshots</a>). 注意在deno的snapshot中缓存了一个完整的ts编译器, 用来减少编译器的启动时间</li><li>后端<code>Rust</code>: 拥有文件系统, 网络和环境访问权限的后端特权方, 由Rust实现.</li></ol><h4 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"核心依赖\">核心依赖<a class=\"hash-link\" href=\"#核心依赖\" title=\"标题的直接链接\">​</a></h4><p><strong>V8</strong>: 由c++编写, deni保存了一个snapshot形式的编译器, 可以直接支持ts的代码编译到js, 缓存会生成在<code>.deno</code>目录下.</p><p><strong>FlatBuffers</strong>: Google的序列化库, 允许在不通过的语言之间传递和接受消息, 没有打包和解包的性能损耗. 在<code>deno</code>中, 这个库用来在特权方和无特权方进行消息通信. 前端创建包含序列化数据的buffer, 然后传递到rust, rust处理这些数据后再创建序列化的buffer, 然后回传. 反序列化这些buffer使用的是flatbuffer编译器产生的文件.</p><p>相比起node, node的做法是对于每一个特权创建v8的扩展, deni则只需要暴露出前端和rust之间进行消息通信的接口就可以了. </p><p>这个讨论下面讲述了为什么用<code>FlatBuffers</code>来替换原来的<code>Protobuf</code>: <a href=\"https://github.com/denoland/deno/issues/269\" target=\"_blank\" rel=\"noopener noreferrer\">https://github.com/denoland/deno/issues/269</a></p><p><strong>Tokio</strong>: 一个使用Rust实现的异步runtime, 用来创建个处理事件. 允许Deno在一个内部的线程池创建任务, 然后当任务完成, 接受到输出的消息通知.</p><h4 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"模块管理\">模块管理<a class=\"hash-link\" href=\"#模块管理\" title=\"标题的直接链接\">​</a></h4><ul><li>加载模块是通过路径进行加载的, 因此不能忽略文件后缀</li><li>支持通过URL进行加载</li><li>支持ES模块</li><li>会进行本地缓存</li></ul><h4 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"内置工具\">内置工具<a class=\"hash-link\" href=\"#内置工具\" title=\"标题的直接链接\">​</a></h4><p>内置了各种工程化脚本:</p><div class=\"language-js codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token operator\" style=\"color:#393A34\">-</span><span class=\"token plain\"> deno bundle：将脚本和依赖打包</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token operator\" style=\"color:#393A34\">-</span><span class=\"token plain\"> deno eval：执行代码</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token operator\" style=\"color:#393A34\">-</span><span class=\"token plain\"> deno fetch：将依赖抓取到本地</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token operator\" style=\"color:#393A34\">-</span><span class=\"token plain\"> deno fmt：代码的格式美化</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token operator\" style=\"color:#393A34\">-</span><span class=\"token plain\"> deno help：等同于</span><span class=\"token operator\" style=\"color:#393A34\">-</span><span class=\"token plain\">h参数</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token operator\" style=\"color:#393A34\">-</span><span class=\"token plain\"> deno info：显示本地的依赖缓存</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token operator\" style=\"color:#393A34\">-</span><span class=\"token plain\"> deno install：将脚本安装为可执行文件</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token operator\" style=\"color:#393A34\">-</span><span class=\"token plain\"> deno repl：进入 </span><span class=\"token constant\" style=\"color:#36acaa\">REPL</span><span class=\"token plain\"> 环境</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token operator\" style=\"color:#393A34\">-</span><span class=\"token plain\"> deno run：运行脚本</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"></span><span class=\"token operator\" style=\"color:#393A34\">-</span><span class=\"token plain\"> deno test：运行测试</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"deno_dir\">DENO_DIR<a class=\"hash-link\" href=\"#deno_dir\" title=\"标题的直接链接\">​</a></h4><p>deno在会在$DENO_DIR(默认在$HOME/.deno)下面创建一个deno目录:</p><div class=\"codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"># DIRECTORIES</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">gen/: 缓存编译为JavaScript的文件</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">deps/: 缓存导入的远程url的文件</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  |__ http/: http方式导入的文件</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">  |__ https/: https方式导入的文件</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\"># FILES</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">deno_history.txt: Deno REPL历史记录缓存</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"单执行文件\">单执行文件<a class=\"hash-link\" href=\"#单执行文件\" title=\"标题的直接链接\">​</a></h4><p>Deno只有一个可执行文件, 所有的操作都可以通过这个文件完成. 可以被嵌入到一些其他的地方, 比如你想要执行一点点的js的时候. 直接使用原始的v8非常困难, 使用node又不安全, 并且过于复杂. </p><p>Deno可以看成一个v8的包装层, 可以很方面的调用它运行你的js代码. 并且Deno本身也是Rust的一个模块, 可以让我们在rust里面使用v8. </p><h4 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"默认无权限\">默认无权限<a class=\"hash-link\" href=\"#默认无权限\" title=\"标题的直接链接\">​</a></h4><p>deno默认不具有网络, 读写等权限, 必须使用显式的命令才能打开权限:</p><div class=\"codeBlockContainer_y0vf theme-code-block\" style=\"--prism-color:#393A34;--prism-background-color:#f6f8fa\"><div class=\"codeBlockContent_Gfna\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_GnFk thin-scrollbar\"><code class=\"codeBlockLines_FgbJ\"><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">-allow-read：打开读权限，可以指定可读的目录，比如--allow-read=/temp。</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">--allow-write：打开写权限。</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">--allow-net=google.com：允许网络通信，可以指定可请求的域，比如--allow-net=google.com。</span><br></span><span class=\"token-line\" style=\"color:#393A34\"><span class=\"token plain\">--allow-env：允许读取环境变量。</span><br></span></code></pre><div class=\"buttonGroup_Po1W\"><button type=\"button\" aria-label=\"复制代码到剪贴板\" title=\"复制\" class=\"clean-btn\"><span class=\"copyButtonIcons_QRmS\" aria-hidden=\"true\"><svg class=\"copyButtonIcon_TxwO\" viewBox=\"0 0 24 24\"><path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg class=\"copyButtonSuccessIcon_RKzi\" viewBox=\"0 0 24 24\"><path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithHideOnScrollNavbar_IbQp\" id=\"参考链接\">参考链接:<a class=\"hash-link\" href=\"#参考链接\" title=\"标题的直接链接\">​</a></h2><ul><li>阮一峰: <a href=\"http://www.ruanyifeng.com/blog/2020/01/deno-intro.html\" target=\"_blank\" rel=\"noopener noreferrer\">http://www.ruanyifeng.com/blog/2020/01/deno-intro.html</a> </li><li>官网: <a href=\"https://deno.land/\" target=\"_blank\" rel=\"noopener noreferrer\">https://deno.land/</a> </li><li>知乎: <a href=\"https://www.zhihu.com/question/359684696/answer/926276352\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.zhihu.com/question/359684696/answer/926276352</a></li><li>github: <a href=\"https://github.com/denoland/deno\" target=\"_blank\" rel=\"noopener noreferrer\">https://github.com/denoland/deno</a></li><li>deno核心指南: <a href=\"https://www.yuque.com/denoland/guide\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.yuque.com/denoland/guide</a></li><li>make mistake in node: <a href=\"https://zhuanlan.zhihu.com/p/37637923?utm_medium=hao.caibaojian.com&amp;utm_source=hao.caibaojian.com\" target=\"_blank\" rel=\"noopener noreferrer\">https://zhuanlan.zhihu.com/p/37637923?utm_medium=hao.caibaojian.com&amp;utm_source=hao.caibaojian.com</a></li><li><a href=\"https://www.cnblogs.com/peiyu1988/p/8192066.html\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.cnblogs.com/peiyu1988/p/8192066.html</a></li><li><a href=\"https://www.jianshu.com/p/0d6df7b5ea85\" target=\"_blank\" rel=\"noopener noreferrer\">https://www.jianshu.com/p/0d6df7b5ea85</a></li><li><a href=\"https://segmentfault.com/a/1190000005892501\" target=\"_blank\" rel=\"noopener noreferrer\">https://segmentfault.com/a/1190000005892501</a></li><li><a href=\"https://zhuanlan.zhihu.com/p/55311049\" target=\"_blank\" rel=\"noopener noreferrer\">https://zhuanlan.zhihu.com/p/55311049</a></li></ul>",
            "url": "https://wiki.jeiizou.site/blog/2020/05/01/Deno, 以及相关的一切",
            "title": "Deno, 及其相关的一切",
            "summary": "image",
            "date_modified": "2020-05-01T00:00:00.000Z",
            "author": {
                "name": "Jeii Zou",
                "url": "https://github.com/jeiizou"
            },
            "tags": []
        }
    ]
}
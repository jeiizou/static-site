<!doctype html>
<html lang="zh-Hans" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Deno, 及其相关的一切 | wiki &amp; blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://wiki.jeiizou.site/blog/2020/05/01/Deno, 以及相关的一切"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Deno, 及其相关的一切 | wiki &amp; blog"><meta data-rh="true" name="description" content="image"><meta data-rh="true" property="og:description" content="image"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2020-05-01T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/jeiizou"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://wiki.jeiizou.site/blog/2020/05/01/Deno, 以及相关的一切"><link data-rh="true" rel="alternate" href="https://wiki.jeiizou.site/blog/2020/05/01/Deno, 以及相关的一切" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://wiki.jeiizou.site/blog/2020/05/01/Deno, 以及相关的一切" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://R4YE5QMILV-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="wiki &amp; blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="wiki &amp; blog Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="wiki &amp; blog JSON Feed">



<link rel="search" type="application/opensearchdescription+xml" title="wiki &amp; blog" href="/opensearch.xml">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.bf49e847.css">
<link rel="preload" href="/assets/js/runtime~main.a3d1cba2.js" as="script">
<link rel="preload" href="/assets/js/main.2bdd8cee.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_Skdb" href="#docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav class="navbar navbar--fixed-top navbarHideable_BSnR"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">WIKI.JEIIZOU.SITE</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/">Wiki</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a href="https://github.com/jeiizou" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_M2FV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_otor"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_WMqR colorModeToggle_msRM"><button class="clean-btn toggleButton_cMOQ toggleButtonDisabled_UXDB" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_oAUf"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_FnV_"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_sGTm"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_Q_Zm thin-scrollbar" aria-label="最近博文导航"><div class="sidebarItemTitle_XomV margin-bottom--md">全部博文</div><ul class="sidebarItemList_LgUv clean-list"><li class="sidebarItem_iwtB"><a class="sidebarItemLink_TEIH" href="/blog/2022/03/01/前端包管理机制简述">前端包管理机制简述</a></li><li class="sidebarItem_iwtB"><a class="sidebarItemLink_TEIH" href="/blog/2020/08/11/小程序概览">小程序概览</a></li><li class="sidebarItem_iwtB"><a class="sidebarItemLink_TEIH" href="/blog/2020/07/11/前端项目结构演进">前端项目结构演进</a></li><li class="sidebarItem_iwtB"><a class="sidebarItemLink_TEIH" href="/blog/2020/06/11/关于 vscode 的一些废话">关于 vscode 的一些废话</a></li><li class="sidebarItem_iwtB"><a aria-current="page" class="sidebarItemLink_TEIH sidebarItemLinkActive_r2Hh" href="/blog/2020/05/01/Deno, 以及相关的一切">Deno, 及其相关的一切</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_vzbs" itemprop="headline">Deno, 及其相关的一切</h1><div class="container_lUxi margin-vert--md"><time datetime="2020-05-01T00:00:00.000Z" itemprop="datePublished">2020年5月1日</time> · <!-- -->阅读需 14 分钟</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Z9CP"><div class="avatar margin-bottom--sm"><a href="https://github.com/jeiizou" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="/img/jeiizou-header.jpeg" alt="Jeii Zou"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/jeiizou" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jeii Zou</span></a></div><small class="avatar__subtitle" itemprop="description">前端开发</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p><img loading="lazy" alt="image" src="data:image/png;base64,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" width="440" height="440" class="img_SmpS"></p><h2 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="大纲">大纲<a class="hash-link" href="#大纲" title="标题的直接链接">​</a></h2><ul><li>什么是Deno?</li><li>为什么不继续使用Node?</li><li>Node和Deno的区别在哪里?</li><li>Deno是如何设计的?</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="什么是deno">什么是Deno?<a class="hash-link" href="#什么是deno" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="deno-介绍">Deno 介绍<a class="hash-link" href="#deno-介绍" title="标题的直接链接">​</a></h3><blockquote><p>Deno是基于Google V8引擎构建的安全的JavaScript, TypeScript(以及WebAssembly)运行环境。</p></blockquote><p>等等, 这话听着耳熟, 这不是和node一个玩意吗? </p><p>是的, 这确实和node是类似的玩意. </p><p>Deno和Node实际上是同一个作者Ryan Dahl(以下简称Ry)的作品. Deno的名称由来也就是node进行拆分, 然后倒过来, 取<code>Destroy Node.js</code>的意思, 同时取<code>dinosaur</code>的缩写<code>dino</code>, 因此把一直可爱的小恐龙作为标志. </p><p>说了这么多, 我们已经如此广泛的应用了Node, 有什么理由来让我们放弃Node, 改而使用Deno呢?</p><h2 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="ry为什么不继续使用node">Ry为什么不继续使用Node?<a class="hash-link" href="#ry为什么不继续使用node" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="node的发展历程">Node的发展历程<a class="hash-link" href="#node的发展历程" title="标题的直接链接">​</a></h3><p>基于现在的情况, 我们不会也不可能放弃掉Node, 但是, Deno给我们解释了一些Node的不足以及Deno会带来的辩护. </p><p>实际上, Deno的目标可能不是替代Node. 为什么这么说, 我们来看看Deno是如何出现的.</p><p><img loading="lazy" src="/assets/images/js-timeline-cb7ff49e5e934e7d32ddaec2622230de.png" width="800" height="279" class="img_SmpS"></p><p>我们先来看看这些年前端开发中的一些重要历史节点. 你会发现, 实际上Node已经是一个历经了11年的框架了. </p><p>尤其是在过去的5,6年间, javascript这门语言发生了脱胎换骨的变化, ES6引入了大量的新的语法特性, 比如说其中影响最大两个新特性: Promise 和 ES模块方案.</p><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="node存在的缺陷">Node存在的缺陷<a class="hash-link" href="#node存在的缺陷" title="标题的直接链接">​</a></h3><p>说回到Node, Ry在Node设计之初, 并没有想到Node会发展到如今的地步. 站在今天的角度来看, node的最初设计无意是犯了很多错误的. </p><p>Node项目最早创立于2007年, 在2012年之后由社区接管其发展.  Ry在2017年回过头来捡起这个项目, 却忽然发现&quot;这个项目已经背离了他的初衷,  有一些无法忽略的问题&quot;. </p><p>上面我们说到了后来出现了Promise和ES modules. 不幸的是, node对这两种特性的支持都不尽人意. 考虑到兼容性, node一直保持了callback的异步回调方式,  因此代码中就会存在两种异步回调方式,  此外, es模块方案和node的模块管理机制总是存在冲突.  导致迟迟无法完全支持es模块</p><p>再者, node的包管理依赖于npm,  所有的包都存在node_modules中, 目录越来越复杂, 管理也越来越难. 还有一些其他的, 难以挽回的糟糕设计. </p><p>如此种种, Ry决定放弃Node, 然后从头开始新造一个轮子. 这个轮子的目标, 就是提供一个简洁安全的new runtime, 来运行<code>javascript/typescript/webassemblt</code></p><h4 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="node-的-设计错误">Node 的 设计错误<a class="hash-link" href="#node-的-设计错误" title="标题的直接链接">​</a></h4><ol><li><p>没有提供promise, 而是采用了callback. 导致了:</p><ol><li>promise是async/await的必要抽象</li><li>node如果提供了promise可以帮助加快最终标准化和<code>async/await</code>交付</li><li>导致node中的很多异步API老化</li></ol></li><li><p>默认有权限访问文件,网络和环境, 放弃了v8提供的很好的沙盒机制.</p></li><li><p>使用GYP构建系统(目前Node是GYP的唯一用户), Google自己都放弃了GYP而采用了GN. </p></li><li><p>使用package.json来管理模块版本, 在node的发布版本中包含了npm, 这个复杂的模块控制方案和一个模块化(私有控制)的存储库. 提出了一个<code>module</code>作为文件目录的概念, 这不是一个严格必要的抽象, 也不是网络中存在的抽象, 现在的package.json包含了各种不必要的信息: 许可证/仓库/描述等.</p><p><img loading="lazy" src="/assets/images/slide-12-4fa6e7b87dc02213411d6919e2ae2e20.jpg" width="1500" height="844" class="img_SmpS"></p></li><li><p>node_modules: 极大的复杂了模块分辨算法, 偏离了浏览器语义.</p><p><img loading="lazy" src="/assets/images/slide-14-926c659e71bf1bda399c28dee30b41fe.jpg" width="1500" height="844" class="img_SmpS"></p></li><li><p><code>require(&#x27;module&#x27;)</code>没有扩展名&#x27;.js&#x27;. 增加了不必要的模块加载器的分析复杂度, 和浏览器的行为不同. </p></li><li><p><code>index.js</code>: 不必要的复杂度. </p></li></ol><h2 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="node-和-deno-的区别在哪里">Node 和 Deno 的区别在哪里?<a class="hash-link" href="#node-和-deno-的区别在哪里" title="标题的直接链接">​</a></h2><p>如果要了解Deno, 我们首先需要了解Node.</p><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="node-架构简析">Node 架构简析<a class="hash-link" href="#node-架构简析" title="标题的直接链接">​</a></h3><p>那么, Node是什么?  简单的说, Node是一个js的不依赖于<code>browser</code>的运行环境. </p><p><img loading="lazy" src="/assets/images/node-structor-cee952810b157a2a665b88ffaced07c5.png" width="800" height="347" class="img_SmpS"></p><p>node是基于C++写的, 本质上就是一个C++应用, 底层主要由几个核心模块构成:</p><ul><li>v8: <ol><li>虚拟机, 执行js代码(包含业务代码, 第三方代码和<code>native modules</code>代码)</li><li>提供<code>C++</code>接口, 为nodejs提供了v8初始化, 创建<code>context</code>,<code>scope</code>等.</li></ol></li><li>libuv: 基于事件驱动的IO模型库, js发出请求, 有libuv完成, 然后触发回调函数</li><li>builtin modules: 由C++代码写成的各类模块, 包含了<code>crypto</code>, <code>zlib</code>, <code>file stream etc</code>基础功能. (v8 提供了函数接口, libuv提供IO模型, 以及一些nodejs函数, 为`builtin modules提供服务)</li><li>native modules: 由js写成, 提供我们应用程序调用的库, 同时这些模块依赖<code>builtin modules</code></li></ul><p>也就是说, node的底层基于v8和libuv, 一手调用C++模块, 一手支撑nodejs方法, 从而为js代码提供了运行能力. 关于其中的一些技术细节, 我们不在这里进行展开的描述. </p><p>那么回过头来看看Deno, 它又是什么样的东西呢? </p><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="deno-架构简析">Deno 架构简析<a class="hash-link" href="#deno-架构简析" title="标题的直接链接">​</a></h3><p><img loading="lazy" alt="image" src="/assets/images/demo_process-e4705588bf244bed0d858f4aec7a2c29.webp" width="800" height="430" class="img_SmpS"></p><ul><li>底层以Rust实现</li></ul><p>最开始的时候, Deno的原型并不是用Rest实现的, 而是Golang. 由于Go本身提供了GC, 而v8也内置了GC, 导致底层有两条GC在同时运行, 并且需要设计互动. 导致程序的复杂度增加太多. 对于这种高性能要求的库来说, Rust合适很多. 至于为什么不适用<code>C++/C</code>这样的语言: 一是<code>Rust</code>性能也很不错, 并且内存安全, 没有GC, 另外一点是<code>Rust</code>提供了很多现成的模块, 对于Deno来说, 可以节约很多开发时间.</p><p>顺理成章的, Deno使用<code>Rust</code>提供<code>Tokio</code>作为异步IO的库, 并且这也是一个基于轮询模型的I/O库. </p><p>关于Rust的一些讨论可以参考<code>https://github.com/denoland/deno/issues/205</code>这个issues下面的讨论.</p><p>Deno通过v8支持运行js, 然后通过快照缓存了一个tsc的引擎, 原生支持了ts(会自动的进行编译和缓存), 然后又因为rust原生支持webassembly, 所以也可以直接运行webassembly. </p><h4 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="结构划分">结构划分<a class="hash-link" href="#结构划分" title="标题的直接链接">​</a></h4><p><img loading="lazy" alt="image" src="/assets/images/deno-process-eaa8a5938b620a65a750685b3122a8ff.jpg" width="1500" height="844" class="img_SmpS"></p><p>Deno的结构可以分成三层: 前端V8, 中端libdeno, 后端rust.</p><ol><li>前端v8: 这层包含了对外开放的接口中, 没有直接系统调用的和大多数的工具函数的接口. 在系统中处于&quot;没有特权方&quot;, 在默认情况下没有文件系统和网络的访问权限(运行在v8沙箱环境中). 如果想要进行文件和网络访问, 就需要与后端的<code>Rust</code>进行通信. 所以很多的系统调用API都是前端通过创建buffer数据, 发送给中端, 然后等待rust返回结果. </li><li>中端<code>libdeno</code>: 本层是介于前端和后端中间比较薄的一层, 用来和v8进行通信并且暴露一些必要的插件(由C/C++实现). 主要暴露了在前端和rust之间发送和接收消息的传递接口, 也用来初始化v8<code>platforms/isolates</code>和创建或者加载<code>V8 snapshot</code>--用来保存序列化得到的堆信息的数据块(文章:<a href="https://v8.dev/blog/custom-startup-snapshots" target="_blank" rel="noopener noreferrer">https://v8.dev/blog/custom-startup-snapshots</a>). 注意在deno的snapshot中缓存了一个完整的ts编译器, 用来减少编译器的启动时间</li><li>后端<code>Rust</code>: 拥有文件系统, 网络和环境访问权限的后端特权方, 由Rust实现.</li></ol><h4 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="核心依赖">核心依赖<a class="hash-link" href="#核心依赖" title="标题的直接链接">​</a></h4><p><strong>V8</strong>: 由c++编写, deni保存了一个snapshot形式的编译器, 可以直接支持ts的代码编译到js, 缓存会生成在<code>.deno</code>目录下.</p><p><strong>FlatBuffers</strong>: Google的序列化库, 允许在不通过的语言之间传递和接受消息, 没有打包和解包的性能损耗. 在<code>deno</code>中, 这个库用来在特权方和无特权方进行消息通信. 前端创建包含序列化数据的buffer, 然后传递到rust, rust处理这些数据后再创建序列化的buffer, 然后回传. 反序列化这些buffer使用的是flatbuffer编译器产生的文件.</p><p>相比起node, node的做法是对于每一个特权创建v8的扩展, deni则只需要暴露出前端和rust之间进行消息通信的接口就可以了. </p><p>这个讨论下面讲述了为什么用<code>FlatBuffers</code>来替换原来的<code>Protobuf</code>: <a href="https://github.com/denoland/deno/issues/269" target="_blank" rel="noopener noreferrer">https://github.com/denoland/deno/issues/269</a></p><p><strong>Tokio</strong>: 一个使用Rust实现的异步runtime, 用来创建个处理事件. 允许Deno在一个内部的线程池创建任务, 然后当任务完成, 接受到输出的消息通知.</p><h4 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="模块管理">模块管理<a class="hash-link" href="#模块管理" title="标题的直接链接">​</a></h4><ul><li>加载模块是通过路径进行加载的, 因此不能忽略文件后缀</li><li>支持通过URL进行加载</li><li>支持ES模块</li><li>会进行本地缓存</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="内置工具">内置工具<a class="hash-link" href="#内置工具" title="标题的直接链接">​</a></h4><p>内置了各种工程化脚本:</p><div class="language-js codeBlockContainer_y0vf theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Gfna"><pre tabindex="0" class="prism-code language-js codeBlock_GnFk thin-scrollbar"><code class="codeBlockLines_FgbJ"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">-</span><span class="token plain"> deno bundle：将脚本和依赖打包</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> deno eval：执行代码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> deno fetch：将依赖抓取到本地</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> deno fmt：代码的格式美化</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> deno help：等同于</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">h参数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> deno info：显示本地的依赖缓存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> deno install：将脚本安装为可执行文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> deno repl：进入 </span><span class="token constant" style="color:#36acaa">REPL</span><span class="token plain"> 环境</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> deno run：运行脚本</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> deno test：运行测试</span><br></span></code></pre><div class="buttonGroup_Po1W"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_QRmS" aria-hidden="true"><svg class="copyButtonIcon_TxwO" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RKzi" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="deno_dir">DENO_DIR<a class="hash-link" href="#deno_dir" title="标题的直接链接">​</a></h4><p>deno在会在$DENO_DIR(默认在$HOME/.deno)下面创建一个deno目录:</p><div class="codeBlockContainer_y0vf theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Gfna"><pre tabindex="0" class="prism-code language-text codeBlock_GnFk thin-scrollbar"><code class="codeBlockLines_FgbJ"><span class="token-line" style="color:#393A34"><span class="token plain"># DIRECTORIES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">gen/: 缓存编译为JavaScript的文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deps/: 缓存导入的远程url的文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |__ http/: http方式导入的文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  |__ https/: https方式导入的文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># FILES</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">deno_history.txt: Deno REPL历史记录缓存</span><br></span></code></pre><div class="buttonGroup_Po1W"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_QRmS" aria-hidden="true"><svg class="copyButtonIcon_TxwO" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RKzi" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="单执行文件">单执行文件<a class="hash-link" href="#单执行文件" title="标题的直接链接">​</a></h4><p>Deno只有一个可执行文件, 所有的操作都可以通过这个文件完成. 可以被嵌入到一些其他的地方, 比如你想要执行一点点的js的时候. 直接使用原始的v8非常困难, 使用node又不安全, 并且过于复杂. </p><p>Deno可以看成一个v8的包装层, 可以很方面的调用它运行你的js代码. 并且Deno本身也是Rust的一个模块, 可以让我们在rust里面使用v8. </p><h4 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="默认无权限">默认无权限<a class="hash-link" href="#默认无权限" title="标题的直接链接">​</a></h4><p>deno默认不具有网络, 读写等权限, 必须使用显式的命令才能打开权限:</p><div class="codeBlockContainer_y0vf theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Gfna"><pre tabindex="0" class="prism-code language-text codeBlock_GnFk thin-scrollbar"><code class="codeBlockLines_FgbJ"><span class="token-line" style="color:#393A34"><span class="token plain">-allow-read：打开读权限，可以指定可读的目录，比如--allow-read=/temp。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--allow-write：打开写权限。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--allow-net=google.com：允许网络通信，可以指定可请求的域，比如--allow-net=google.com。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">--allow-env：允许读取环境变量。</span><br></span></code></pre><div class="buttonGroup_Po1W"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_QRmS" aria-hidden="true"><svg class="copyButtonIcon_TxwO" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RKzi" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="参考链接">参考链接:<a class="hash-link" href="#参考链接" title="标题的直接链接">​</a></h2><ul><li>阮一峰: <a href="http://www.ruanyifeng.com/blog/2020/01/deno-intro.html" target="_blank" rel="noopener noreferrer">http://www.ruanyifeng.com/blog/2020/01/deno-intro.html</a> </li><li>官网: <a href="https://deno.land/" target="_blank" rel="noopener noreferrer">https://deno.land/</a> </li><li>知乎: <a href="https://www.zhihu.com/question/359684696/answer/926276352" target="_blank" rel="noopener noreferrer">https://www.zhihu.com/question/359684696/answer/926276352</a></li><li>github: <a href="https://github.com/denoland/deno" target="_blank" rel="noopener noreferrer">https://github.com/denoland/deno</a></li><li>deno核心指南: <a href="https://www.yuque.com/denoland/guide" target="_blank" rel="noopener noreferrer">https://www.yuque.com/denoland/guide</a></li><li>make mistake in node: <a href="https://zhuanlan.zhihu.com/p/37637923?utm_medium=hao.caibaojian.com&amp;utm_source=hao.caibaojian.com" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/37637923?utm_medium=hao.caibaojian.com&amp;utm_source=hao.caibaojian.com</a></li><li><a href="https://www.cnblogs.com/peiyu1988/p/8192066.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/peiyu1988/p/8192066.html</a></li><li><a href="https://www.jianshu.com/p/0d6df7b5ea85" target="_blank" rel="noopener noreferrer">https://www.jianshu.com/p/0d6df7b5ea85</a></li><li><a href="https://segmentfault.com/a/1190000005892501" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000005892501</a></li><li><a href="https://zhuanlan.zhihu.com/p/55311049" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/55311049</a></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="博文分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/2020/06/11/关于 vscode 的一些废话"><div class="pagination-nav__sublabel">较新一篇</div><div class="pagination-nav__label">关于 vscode 的一些废话</div></a></nav></main><div class="col col--2"><div class="tableOfContents_HamF thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#大纲" class="table-of-contents__link toc-highlight">大纲</a></li><li><a href="#什么是deno" class="table-of-contents__link toc-highlight">什么是Deno?</a><ul><li><a href="#deno-介绍" class="table-of-contents__link toc-highlight">Deno 介绍</a></li></ul></li><li><a href="#ry为什么不继续使用node" class="table-of-contents__link toc-highlight">Ry为什么不继续使用Node?</a><ul><li><a href="#node的发展历程" class="table-of-contents__link toc-highlight">Node的发展历程</a></li><li><a href="#node存在的缺陷" class="table-of-contents__link toc-highlight">Node存在的缺陷</a></li></ul></li><li><a href="#node-和-deno-的区别在哪里" class="table-of-contents__link toc-highlight">Node 和 Deno 的区别在哪里?</a><ul><li><a href="#node-架构简析" class="table-of-contents__link toc-highlight">Node 架构简析</a></li><li><a href="#deno-架构简析" class="table-of-contents__link toc-highlight">Deno 架构简析</a></li></ul></li><li><a href="#参考链接" class="table-of-contents__link toc-highlight">参考链接:</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 WIKI.JEIIZOU.SITE, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a3d1cba2.js"></script>
<script src="/assets/js/main.2bdd8cee.js"></script>
</body>
</html>
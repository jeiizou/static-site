<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-前端进阶/性能优化/性能优化概览">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">性能优化概览 | wiki &amp; blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://wiki.jeiizou.site/docs/前端进阶/性能优化/性能优化概览"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="性能优化概览 | wiki &amp; blog"><meta data-rh="true" name="description" content="总览:"><meta data-rh="true" property="og:description" content="总览:"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://wiki.jeiizou.site/docs/前端进阶/性能优化/性能优化概览"><link data-rh="true" rel="alternate" href="https://wiki.jeiizou.site/docs/前端进阶/性能优化/性能优化概览" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://wiki.jeiizou.site/docs/前端进阶/性能优化/性能优化概览" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://R4YE5QMILV-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="wiki &amp; blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="wiki &amp; blog Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="wiki &amp; blog JSON Feed">



<link rel="search" type="application/opensearchdescription+xml" title="wiki &amp; blog" href="/opensearch.xml">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.bf49e847.css">
<link rel="preload" href="/assets/js/runtime~main.a3d1cba2.js" as="script">
<link rel="preload" href="/assets/js/main.2bdd8cee.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_Skdb" href="#docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav class="navbar navbar--fixed-top navbarHideable_BSnR"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">WIKI.JEIIZOU.SITE</b></a></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Wiki</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://github.com/jeiizou" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_M2FV"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_otor"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_WMqR colorModeToggle_msRM"><button class="clean-btn toggleButton_cMOQ toggleButtonDisabled_UXDB" type="button" disabled="" title="切换浅色/暗黑模式（当前为浅色模式）" aria-label="切换浅色/暗黑模式（当前为浅色模式）" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_oAUf"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_FnV_"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_sGTm docsWrapper_Ni9x"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_HKgr" type="button"></button><div class="docPage_ls8c"><aside class="theme-doc-sidebar-container docSidebarContainer_V3NT"><div class="sidebar_uf8s sidebarWithHideableNavbar_ehKy"><a tabindex="-1" class="sidebarLogo_gH0J" href="/"><b>WIKI.JEIIZOU.SITE</b></a><nav class="menu thin-scrollbar menu_obli"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">前端知识梳理</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/前端基础/JavsScript/0-1-原理-类型与文法">前端基础</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/前端进阶/前端工程/Babel/Babel-插件">前端进阶</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/前端进阶/前端工程/Babel/Babel-插件">前端工程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/前端进阶/前端框架/Lit-Element快速入门">前端框架</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/前端进阶/小程序/Taro-框架原理">小程序</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/前端进阶/微前端/ModuleFederationinWebpack5">微前端</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/docs/前端进阶/性能优化/优化-CSS">性能优化</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/前端进阶/性能优化/优化-CSS">优化-CSS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/前端进阶/性能优化/性能-RAIL">性能-RAIL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/前端进阶/性能优化/性能-指标">性能-指标</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/前端进阶/性能优化/性能优化概览">性能优化概览</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/前端进阶/性能优化/资源优化篇">资源优化篇</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/前端进阶/浏览器/V8/V8-内存">浏览器</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/前端进阶/移动端/JSBridge概述">移动端</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/计算机网络/CDN原理">计算机网络</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/数据结构与算法/DFS&amp;BFS">数据结构与算法</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/服务端/Nginx常用配置">服务端</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/架构&amp;模式&amp;工程/ShapeUp工作流">架构&amp;模式&amp;工程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/图形学/WebGL-GLSL语法">图形学</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/信息安全/网络安全/安全-常见安全策略">信息安全</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/其他/Git/Git-GitFlow">其他</a></div></li></ul></nav></div></aside><main class="docMainContainer_Fcw8"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_apvc"><div class="docItemContainer_MDp6"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_bpEc" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_CV4g"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">前端进阶</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">性能优化</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">性能优化概览</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ctTz theme-doc-toc-mobile tocMobile_aSM7"><button type="button" class="clean-btn tocCollapsibleButton_d1Te">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>性能优化概览</h1><p>总览:</p><p><img loading="lazy" alt="image" src="/assets/images/performance-713e452266079968f71f54d9348bf4ee.png" width="1127" height="1218" class="img_SmpS"></p><h2 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="性能调优工具">性能调优工具<a class="hash-link" href="#性能调优工具" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="chrome-devtool-network">chrome devtool: Network<a class="hash-link" href="#chrome-devtool-network" title="标题的直接链接">​</a></h3><p>能力: 查看网络请求以及资源加载的耗时</p><p><img loading="lazy" alt="image" src="/assets/images/20210118153218-f46c6732f67a2de522f5c8a8c9662209.jpg" width="2870" height="1194" class="img_SmpS"></p><ul><li>Queueing 浏览器将资源放入队列时间</li><li>Stalled 因放入队列时间而发生的停滞时间</li><li>DNS Lookup DNS解析时间</li><li>Initial connection 建立HTTP连接的时间</li><li>SSL 浏览器与服务器建立安全性连接的时间</li><li>TTFB 等待服务端返回数据的时间</li><li>Content Download 浏览器下载资源的时间</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="chrome-devtool-lighthouse">chrome devtool: Lighthouse<a class="hash-link" href="#chrome-devtool-lighthouse" title="标题的直接链接">​</a></h3><p><img loading="lazy" alt="image" src="/assets/images/20210118154355-f99b86966ce4871022683a1d57b18f20.jpg" width="2874" height="1064" class="img_SmpS"></p><ul><li>First Contentful Paint 首屏渲染时间，1s以内绿色</li><li>Speed Index 速度指数，4s以内绿色</li><li>Time to Interactive 到页面可交换的时间</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="chrome-devtool-performance">chrome devtool: Performance<a class="hash-link" href="#chrome-devtool-performance" title="标题的直接链接">​</a></h3><p><img loading="lazy" alt="image" src="/assets/images/20210118154827-f77f1568fb8634deb30285b03b19b701.jpg" width="2866" height="1034" class="img_SmpS"></p><p>专业的网站性能分析工具</p><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="webpagetest">webPageTest<a class="hash-link" href="#webpagetest" title="标题的直接链接">​</a></h3><p>可以模拟不同场景下访问的情况, 比如不同的浏览器, 不同的国家等等.</p><p><a href="https://www.webpagetest.org/" target="_blank" rel="noopener noreferrer">webPageTest</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="webpack-bundle-analyzer">webpack-bundle-analyzer<a class="hash-link" href="#webpack-bundle-analyzer" title="标题的直接链接">​</a></h3><p>资源打包分析工具</p><p><img loading="lazy" alt="image" src="/assets/images/93f72404-b338-11e6-92d4-9a365550a701-e4af63040abfb8e9b9a948c19541204d.gif" width="908" height="547" class="img_SmpS"></p><h2 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="前端性能参数">前端性能参数<a class="hash-link" href="#前端性能参数" title="标题的直接链接">​</a></h2><p>可以通过如下方法获取前端页面加载的时间:</p><div class="language-js codeBlockContainer_y0vf theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Gfna"><pre tabindex="0" class="prism-code language-js codeBlock_GnFk thin-scrollbar"><code class="codeBlockLines_FgbJ"><span class="token-line" style="color:#393A34"><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;DOMContentLoaded&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">event</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> timing </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#36acaa">performance</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getEntriesByType</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;navigation&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">timing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">domInteractive</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">timing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">fetchStart</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> diff </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> timing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">domInteractive</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> timing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">fetchStart</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;TTI: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> diff</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup_Po1W"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_QRmS" aria-hidden="true"><svg class="copyButtonIcon_TxwO" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RKzi" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>更多的性能参数如下:</p><div class="codeBlockContainer_y0vf theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Gfna"><pre tabindex="0" class="prism-code language-text codeBlock_GnFk thin-scrollbar"><code class="codeBlockLines_FgbJ"><span class="token-line" style="color:#393A34"><span class="token plain">DNS 解析耗时: domainLookupEnd - domainLookupStart</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">TCP 连接耗时: connectEnd - connectStart</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SSL 安全连接耗时: connectEnd - secureConnectionStart</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">网络请求耗时 (TTFB): responseStart - requestStart</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">数据传输耗时: responseEnd - responseStart</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DOM 解析耗时: domInteractive - responseEnd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">资源加载耗时: loadEventStart - domContentLoadedEventEnd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">First Byte时间: responseStart - domainLookupStart</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">白屏时间: responseEnd - fetchStart</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">首次可交互时间: domInteractive - fetchStart</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DOM Ready 时间: domContentLoadEventEnd - fetchStart</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">页面完全加载时间: loadEventStart - fetchStart</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">http 头部大小: transferSize - encodedBodySize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">重定向次数: redirectCount</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">重定向耗时: redirectEnd - redirectStart</span><br></span></code></pre><div class="buttonGroup_Po1W"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_QRmS" aria-hidden="true"><svg class="copyButtonIcon_TxwO" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RKzi" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="资源优化">资源优化<a class="hash-link" href="#资源优化" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="图片资源优化">图片资源优化<a class="hash-link" href="#图片资源优化" title="标题的直接链接">​</a></h3><ul><li><p><strong>图片资源转CDN</strong></p><p>  把图片资源转存CDN有几个好处:</p><p>  第一, 我们知道浏览器中的同域网页并发数量是受到控制的, 其并发限制如下:</p><p>  <img loading="lazy" alt="image" src="/assets/images/20210118161225-40bc33e6771fdf26b4e201ac2f17d8b1.jpg" width="564" height="630" class="img_SmpS"></p><p>  把图片资源转存CND可以让图片请求不与主域抢网络资源</p><p>  第二, 目前很多CDN可以动态裁剪和压缩图片, 这样在网站中就可以按照实际的显示尺寸加载对应分辨率的图片, 防止前端对图片进行缩放.</p><p>  不要对图片进行了缩放的理由有两个:</p><ol><li>html缩小图片只缩小了尺寸, 图片会失真</li><li>缩放意味着图片大小不合适, 网页加载开销会偏高</li></ol></li><li><p><strong>雪碧图(CSS sprite)</strong></p><p>  雪碧图的目的也是减少http网络请求的数量, 原理不再赘述, 此外雪碧图一定程度上可以减小图片的总大小</p></li><li><p><strong>图片懒加载</strong></p><p>  用js判断当该图片在页面中可见的时候再设置src值</p></li><li><p><strong>响应式图片</strong></p><p>  除了控制cdn参数动态裁剪图片意外, 还可以用原生的响应式图片来在不同的环境下切换不同的图片资源:</p><div class="language-html codeBlockContainer_y0vf theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Gfna"><pre tabindex="0" class="prism-code language-html codeBlock_GnFk thin-scrollbar"><code class="codeBlockLines_FgbJ"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">picture</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">source</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">srcset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">banner_w1000.jpg</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">media</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">(min-width: 801px)</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">source</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">srcset</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">banner_w800.jpg</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">media</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">(max-width: 800px)</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">img</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">src</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">banner_w800.jpg</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">alt</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">picture</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_Po1W"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_QRmS" aria-hidden="true"><svg class="copyButtonIcon_TxwO" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RKzi" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>压缩图片的大小</strong></p><p>  压缩图片的大小, 不需要透明背景就把png图片转化为jpg, 并且通过无损压缩可以减少图片的体积</p><p>  在允许的情况下, 使用webp格式的图片能进一步压缩图片的大小</p></li><li><p><strong>对于简单效果, 用css替代图片</strong></p></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="资源预加载">资源预加载<a class="hash-link" href="#资源预加载" title="标题的直接链接">​</a></h3><p>浏览器渲染的流程, 可以参考本站 浏览器原理</p><h4 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="preload">preload<a class="hash-link" href="#preload" title="标题的直接链接">​</a></h4><p>在标签上添加<code>preload</code>, 这些资源会在页面加载的生命周期的早起阶段就开始获取. 而不是等到具体渲染的时候</p><p>详细的草案可以<a href="https://w3c.github.io/preload/#x2.link-type-preload" target="_blank" rel="noopener noreferrer">看这里</a></p><div class="language-html codeBlockContainer_y0vf theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Gfna"><pre tabindex="0" class="prism-code language-html codeBlock_GnFk thin-scrollbar"><code class="codeBlockLines_FgbJ"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">preload</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">style.css</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">as</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">style as=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-name" style="color:#00a4db">...&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag special-attr attr-name" style="color:#00a4db">onload</span><span class="token tag special-attr attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag special-attr attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag special-attr attr-value value javascript language-javascript function" style="color:#d73a49">preloadFinished</span><span class="token tag special-attr attr-value value javascript language-javascript punctuation" style="color:#393A34">(</span><span class="token tag special-attr attr-value value javascript language-javascript punctuation" style="color:#393A34">)</span><span class="token tag special-attr attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">preload</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">main.js</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">as</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-value" style="color:#e3116c">script as=</span><span class="token tag attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag attr-name" style="color:#00a4db">...&quot;</span><span class="token tag" style="color:#00009f"> </span><span class="token tag special-attr attr-name" style="color:#00a4db">onload</span><span class="token tag special-attr attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag special-attr attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag special-attr attr-value value javascript language-javascript function" style="color:#d73a49">preloadFinished</span><span class="token tag special-attr attr-value value javascript language-javascript punctuation" style="color:#393A34">(</span><span class="token tag special-attr attr-value value javascript language-javascript punctuation" style="color:#393A34">)</span><span class="token tag special-attr attr-value punctuation" style="color:#393A34">&quot;</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_Po1W"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_QRmS" aria-hidden="true"><svg class="copyButtonIcon_TxwO" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RKzi" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>preload的特点如下:</p><ul><li>将加载和执行分离, 提前加载, 在需要的时候执行</li><li>不论资源是否需要, 都会进行加载</li><li>perload有as属性, 可以设置正确的资源加载优先级, 比如<code>as=&quot;style&quot;</code>会获得最高的优先级, 设置<code>as=&quot;script&quot;</code>会获得低或者中优先级</li><li>可以定义资源的onload事件</li><li>对于跨域资源进行preload的时候, 必须添加<code>crossorigin</code>属性</li><li>preload字体如果没有crossorigin会进行二次获取, 字体文件会被下载两次</li><li>没有用到的preload资源在chrome的console中会在onload后的3s后发生警告</li></ul><ol><li>preload和HTTP2主动推送</li></ol><p>http2在服务端获取到html文件时就知道需要对应的资源, 因此会直接向客户端推送, 而perload会在浏览器接收到html文件的时候才开始扫描这些预加载文件. </p><p>但是HTTP2不能用于第三方的资源推送, 而且preload有益于浏览器确定资源加载的优先级</p><h4 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="prefetch">prefetch<a class="hash-link" href="#prefetch" title="标题的直接链接">​</a></h4><p>prefetch 是告诉浏览器下一页可能会用到的资源, 用于加速下一个页面的加载速度. </p><div class="language-html codeBlockContainer_y0vf theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Gfna"><pre tabindex="0" class="prism-code language-html codeBlock_GnFk thin-scrollbar"><code class="codeBlockLines_FgbJ"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">link</span><span class="token tag" style="color:#00009f"> </span><span class="token tag attr-name" style="color:#00a4db">rel</span><span class="token tag attr-value punctuation attr-equals" style="color:#393A34">=</span><span class="token tag attr-value" style="color:#e3116c">“prefetch”</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre><div class="buttonGroup_Po1W"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_QRmS" aria-hidden="true"><svg class="copyButtonIcon_TxwO" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RKzi" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>在vue ssr生成的页面中, 首页的资源都会使用preload, 而路由对应的页面则会有prefetch</p><p>注意, prefetch和preload不要混用, 会造成重复加载资源.</p><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="字体压缩">字体压缩<a class="hash-link" href="#字体压缩" title="标题的直接链接">​</a></h3><p>这里主要介绍两个工具吧,</p><p>一个是<code>font-spider</code>, 可以自动检测网页中引用的字体和文字, 来生成字体文件. </p><p>一个是<code>fontmin</code>, 可以将一个字体文件最小化, 比如:</p><div class="language-js codeBlockContainer_y0vf theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Gfna"><pre tabindex="0" class="prism-code language-js codeBlock_GnFk thin-scrollbar"><code class="codeBlockLines_FgbJ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> </span><span class="token maybe-class-name">Fontmin</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;fontmin&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> fontmin </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">Fontmin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">src</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;fonts/Microsoft Yahei.ttf&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 设置服务端源字体文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">dest</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;build/fonts&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 设置生成字体的目录</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Fontmin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">glyph</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">text</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;字体压缩&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 设置需要的自己</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fontmin</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">err</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> files</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 生成字体</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">err</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">throw</span><span class="token plain"> err</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">files</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 返回生成字体结果的Buffer文件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Po1W"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_QRmS" aria-hidden="true"><svg class="copyButtonIcon_TxwO" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RKzi" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>fontmin提供了webpack插件, 详细的使用说明可以参看<a href="https://github.com/patrickhulce/fontmin-webpack" target="_blank" rel="noopener noreferrer">这里</a></p><h2 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="网络优化">网络优化<a class="hash-link" href="#网络优化" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="静态资源使用cdn">静态资源使用CDN<a class="hash-link" href="#静态资源使用cdn" title="标题的直接链接">​</a></h3><p>内容分发网络(CDN)就是一组分布在多个不同地理位置的Web服务器. </p><p>CDN原理如下:</p><ol><li>当一个用户访问一个网站的时候, 浏览器要经过DNS解析, 然后浏览器想目标服务器发出IP请求并得到资源</li><li>如果网站部署了CDN, 浏览器进行DNS解析</li><li>DNS一次想根服务器, 顶级域名服务器, 权限服务器发出请求, 得到全局负载均衡系统(GSLB)的IP地址</li><li>本地DNS向GSLB发出请求, GSLB根据本地的DNS的IP地址判断用户的位置, 筛选出距离用户比较近的本地负载均衡系统(SLB), 并将该SLB的IP地址作为结果返回给本地的DNS</li><li>SLB根据浏览器请求的资源和地址, 选择最优的缓存服务器将内容发回给浏览器</li><li>缓存服务器查看是否命中资源, 如果没有命中, 就向源服务器发送请求, 再发给浏览器并缓存在缓存服务器中</li></ol><p>更多关于CND原理的描述参看 CDN原理</p><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="减少http请求针对http11">减少HTTP请求(针对http1.1)<a class="hash-link" href="#减少http请求针对http11" title="标题的直接链接">​</a></h3><p>一个HTTP请求会消耗比较大的资源, 一旦你body中传输的数据很少, 头部和协议的解析消耗的资源占比就会增加. </p><p>我们可以缓存ajax请求, 对重复的请求直接从缓存中获取, 可以减少http的请求数量.</p><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="使用http2">使用Http2<a class="hash-link" href="#使用http2" title="标题的直接链接">​</a></h3><p>HTTP2相比http1.1有很多的优势, 比如解析速度快, 多路复用, 头部压缩, 能够进行服务端推送, 能够控制流量和优先级</p><p>具体协议内容参考: 计算机网络/HTTP2</p><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="优化cookie的使用">优化Cookie的使用<a class="hash-link" href="#优化cookie的使用" title="标题的直接链接">​</a></h3><p>Cookie的优点是兼容性好, 可以在不出参数的情况下和后台进行数据交互, 比如自动登录</p><p>缺点是:</p><ol><li>IE老浏览器会显示Cookie的数量</li><li>域名设置不当会导致所有请求都带上Cookie信息</li><li>Cookie的读写性能非常的差</li></ol><p>优化的方式如下: </p><ol><li>尽可能减少网站中使用的cookie大小</li><li>给cookie设置合理的过期时间</li><li>静态资源不使用cookie, 进行cookie隔离</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="减少dns查询">减少DNS查询<a class="hash-link" href="#减少dns查询" title="标题的直接链接">​</a></h3><p>DNS负责将域名URL转化为服务器主机IP</p><p>DNS查找流程:</p><ol><li>查看浏览器缓存是否存在</li><li>查看本机DNS缓存</li><li>访问本地DNS服务器</li><li>...</li></ol><p>通常浏览器查找一个给定URL的IP地址需要花费20~120ms</p><p>TTL(Time to Live) 表示查找返回的DNS记录包含的一个存活之间, 过期则该DNS被抛弃</p><p>DNS缓存的TTL值有几个影响因素:</p><ol><li>服务器可以设置TTL表示DNS记录的存活时间. 本机DNS缓存将根据这个TTL值判断DNS记录什么时候被抛弃. TTL不能设置很大, 因为存在<a href="https://baike.baidu.com/item/%E6%95%85%E9%9A%9C%E8%BD%AC%E7%A7%BB/14768924?fr=aladdin" target="_blank" rel="noopener noreferrer">快速故障转移</a>的问题</li><li>浏览器DNS缓存也有自己的过期时间, 该事件独立于本机DNS缓存, 相对比较daunt, 例如chrome只有一分钟</li><li>浏览器DNS记录的数量是有限制的, 如果短时间访问大量不同域名的网站, 则比较早的DNS记录会被抛弃</li></ol><p>因此, 针对DNS优化, 我们需要恰当的减少主机域名的数量. 但是过少的主机名会限制并行下载的数量(注意: 针对http1.1), 比较恰当的数量是2-4个主机名能够获取加大收益</p><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="避免重定向">避免重定向<a class="hash-link" href="#避免重定向" title="标题的直接链接">​</a></h3><p>重定向用于将用户从一个URL重新路由到另一个URL, 一般有:</p><ol><li>301: 永久重定向</li><li>302: 临时重定向</li><li>304: Not Modified</li></ol><p>详情参照 HTTP1.x</p><p>页面发生重定向会延迟真个HTML文档的传输, 增长白屏的时间.</p><p>那什么时候会用到重定向呢:</p><ol><li>跟踪内部的流量: 用户离开主页之后的流量, 但最好用内部的referer日志来跟踪内部流量</li><li>跟踪出站的流量: 比如某些链接会出站, 我们可以将其包装在一个302的重定向连接中来解决跟踪的问题</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="启用-gzip">启用 Gzip<a class="hash-link" href="#启用-gzip" title="标题的直接链接">​</a></h3><p>Gzip能更进一步的压缩前端资源文件的大小.</p><p>但是不是每个浏览器都支持gzip的, 可以在请求头中配置<code>accept-encoding</code>来表示对压缩的支持, 客户端http请求头声明浏览器支持的压缩方式, 服务端配置启用压缩, 压缩的文件类型, 压缩方式, 当客户端请求到服务端的时候, 服务器解析请求头, 如果客户端支持gzip, 响应的时候就会进行资源的压缩并返回给客户端. 浏览器按照自己的方式解析. </p><p><img loading="lazy" alt="image" src="/assets/images/20210120104848-0ba55c06cc6a4d1c77681d33bd58b84e.jpg" width="686" height="478" class="img_SmpS"></p><p>如何启用Gzip这里不再赘述</p><h2 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="缓存控制">缓存控制<a class="hash-link" href="#缓存控制" title="标题的直接链接">​</a></h2><p>浏览器缓存可以参照: 缓存策略</p><ol><li>频繁变动的资源: <code>Cache-Control: no-cache</code></li><li>不常变化的资源: <code>Cache-Control: max-age=31536000</code></li></ol><p>具体的内容在这里就不展开了</p><h2 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="构建优化">构建优化<a class="hash-link" href="#构建优化" title="标题的直接链接">​</a></h2><p>目前主流的前端项目都是有构建过程的, 其中有许多优化技巧</p><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="tree-shaking">tree shaking<a class="hash-link" href="#tree-shaking" title="标题的直接链接">​</a></h3><p><code>tree shaking</code>意为将js文件中用不到的代码在打包的过程中删除. </p><p>webpack2以上以及rollup都能很好的支持该特性</p><p>无用代码消除广泛存在于编程语言编译器中, 称为DCE(dead code elimination)</p><p>其大致的实现原理简单的概括就是:</p><ol><li>ES6 Module引入进行静态分析, 编译的时候就可以正确判断加载了哪些模块</li><li>静态分析程序流, 判断哪些模块和变量未被使用或者引用, 进而删除对应的代码</li></ol><p>在webpack中, 可以通过在<code>package.json</code>中配置<code>sideEffects</code>表示可以进行treeshaking:</p><div class="language-json codeBlockContainer_y0vf theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Gfna"><pre tabindex="0" class="prism-code language-json codeBlock_GnFk thin-scrollbar"><code class="codeBlockLines_FgbJ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;your-project&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;sideEffects&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_Po1W"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_QRmS" aria-hidden="true"><svg class="copyButtonIcon_TxwO" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RKzi" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>或者表示那些文件具有副作用:</p><div class="language-json codeBlockContainer_y0vf theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Gfna"><pre tabindex="0" class="prism-code language-json codeBlock_GnFk thin-scrollbar"><code class="codeBlockLines_FgbJ"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;your-project&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;sideEffects&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;./src/some-side-effectful-file.js&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup_Po1W"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_QRmS" aria-hidden="true"><svg class="copyButtonIcon_TxwO" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RKzi" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>而对于<code>rollup</code>, 其默认支持treeshaking</p><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="代码压缩">代码压缩<a class="hash-link" href="#代码压缩" title="标题的直接链接">​</a></h3><p>webpack等打包插件可以会生产环境的代码进行压缩, 能够减小资源文件的大小, 优化前端的加载性能. </p><p>压缩能力目前都内置在打包工具中, 只要开始生产环境配置即可.</p><p>比如webpack配置<code>mode: &#x27;production&#x27;</code>就可以开启压缩:</p><div class="language-js codeBlockContainer_y0vf theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Gfna"><pre tabindex="0" class="prism-code language-js codeBlock_GnFk thin-scrollbar"><code class="codeBlockLines_FgbJ"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">mode</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;production&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Po1W"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_QRmS" aria-hidden="true"><svg class="copyButtonIcon_TxwO" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RKzi" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>rollup则需要安装对应的插件, 比如<code>terser</code>:</p><div class="language-js codeBlockContainer_y0vf theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Gfna"><pre tabindex="0" class="prism-code language-js codeBlock_GnFk thin-scrollbar"><code class="codeBlockLines_FgbJ"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> terser </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;rollup-plugin-terser&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">plugins</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">terser</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">compress</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#36acaa">drop_console</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Po1W"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_QRmS" aria-hidden="true"><svg class="copyButtonIcon_TxwO" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RKzi" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="打包分离bundle-splitting">打包分离(Bundle Splitting)<a class="hash-link" href="#打包分离bundle-splitting" title="标题的直接链接">​</a></h3><p>打包分离的思想是: 如果你有一个体积巨大的文件, 并且只修改了一行代码, 用户却仍然需要重新下载整个文件, 但是如果我把它分成了两个文件, 那么用户只需要下载那个被修改的文件, 而另一个文件直接从缓存中获取就可以了. </p><p>从这个角度看, 打包分离与缓存相关, 所以对站点的首次访问者来说没有区别. </p><p>webpack可以简单的配置:</p><div class="language-js codeBlockContainer_y0vf theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Gfna"><pre tabindex="0" class="prism-code language-js codeBlock_GnFk thin-scrollbar"><code class="codeBlockLines_FgbJ"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">entry</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;src/index.js&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">output</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;dist&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">filename</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;[name].[contenthash].js&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">optimization</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">splitChunks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">chunks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;all&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Po1W"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_QRmS" aria-hidden="true"><svg class="copyButtonIcon_TxwO" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RKzi" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>结果会生成一个main.js和一个vendor.js把第三方类库进行分离. 这个配置意味着: 把所有node_modules里的东西都然道verndors~main.js文件中去. </p><p>或者我们可以进行这样的配置:</p><div class="language-js codeBlockContainer_y0vf theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Gfna"><pre tabindex="0" class="prism-code language-js codeBlock_GnFk thin-scrollbar"><code class="codeBlockLines_FgbJ"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> path </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;path&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> webpack </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;webpack&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">entry</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;src/index.js&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">plugins</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name">webpack</span><span class="token class-name punctuation" style="color:#393A34">.</span><span class="token class-name">HashedModuleIdsPlugin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// so that file hashes don&#x27;t change unexpectedly</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">output</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;dist&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">filename</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;[name].[contenthash].js&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">optimization</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">runtimeChunk</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;single&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">splitChunks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">chunks</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;all&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">maxInitialRequests</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">Infinity</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">minSize</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token literal-property property" style="color:#36acaa">cacheGroups</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token literal-property property" style="color:#36acaa">vendor</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token literal-property property" style="color:#36acaa">test</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token regex regex-source language-regex" style="color:#36acaa">[\\/]node_modules[\\/]</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token function" style="color:#d73a49">name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">module</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// get the name. E.g. node_modules/packageName/not/this/part.js</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// or node_modules/packageName</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> packageName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">match</span><span class="token punctuation" style="color:#393A34">(</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token regex regex-source language-regex" style="color:#36acaa">[\\/]node_modules[\\/](.*?)([\\/]|$)</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// npm package names are URL-safe, but some servers don&#x27;t like @ symbols</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">npm.</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">packageName</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation method function property-access" style="color:#d73a49">replace</span><span class="token template-string interpolation punctuation" style="color:#393A34">(</span><span class="token template-string interpolation string" style="color:#e3116c">&#x27;@&#x27;</span><span class="token template-string interpolation punctuation" style="color:#393A34">,</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation string" style="color:#e3116c">&#x27;&#x27;</span><span class="token template-string interpolation punctuation" style="color:#393A34">)</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Po1W"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_QRmS" aria-hidden="true"><svg class="copyButtonIcon_TxwO" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RKzi" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里我们只是简单的介绍打包分离的思想和简单的使用示例, 详细的原理和细节可以参考这篇文章: <a href="https://zhuanlan.zhihu.com/p/66212099" target="_blank" rel="noopener noreferrer">深入理解WebPack打包分块</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="按需加载">按需加载<a class="hash-link" href="#按需加载" title="标题的直接链接">​</a></h3><p>按需加载和按需架子啊是两个意图不同的事情, 前者的意图参见上一小节, 按需加载目的是在用户首次访问的时候能尽量减少加载的文件大小, 对暂时不需要用到的代码进行动态加载. </p><p>比如这段代码:</p><div class="language-js codeBlockContainer_y0vf theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_Gfna"><pre tabindex="0" class="prism-code language-js codeBlock_GnFk thin-scrollbar"><code class="codeBlockLines_FgbJ"><span class="token-line" style="color:#393A34"><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">document</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getElementById</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;btn&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;click&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 当按钮被点击后才去加载 show.js 文件，文件加载成功后执行文件导出的函数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword module" style="color:#00009f">import</span><span class="token punctuation" style="color:#393A34">(</span><span class="token comment" style="color:#999988;font-style:italic">/* webpackChunkName: &quot;show&quot; */</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;./show&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">show</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">show</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;Webpack&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_Po1W"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_QRmS" aria-hidden="true"><svg class="copyButtonIcon_TxwO" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_RKzi" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>当 Webpack 遇到了类似的语句时会这样处理:</p><ol><li>以<code>./show.js</code>为入口新生成一个Chunk</li><li>当代码执行到import所在的语句是会去加载有chunk对应生成的文件</li><li>import返回一个promise, 当文件加载成功的时候可以在<code>promise</code>的<code>then</code>方法中获取到<code>show.js</code>导出的内容.</li></ol><blockquote><p><code>/* webpackChunkName: &quot;show&quot; */</code> 的含义是为动态生成的 Chunk 赋予一个名称，以方便我们追踪和调试代码。 如果不指定动态生成的 Chunk 的名称，默认名称将会是 <code>[id].js</code></p></blockquote><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="dllplugin-提升构建速度">Dllplugin 提升构建速度<a class="hash-link" href="#dllplugin-提升构建速度" title="标题的直接链接">​</a></h3><p>DLLPlugin 和 DLLReferencePlugin 用某种方法实现了拆分 bundles，同时还大大提升了构建的速度。</p><p>具体使用参考<a href="https://www.webpackjs.com/plugins/dll-plugin/" target="_blank" rel="noopener noreferrer">webpack-DllPlugin</a></p><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="ssr服务端渲染">ssr：服务端渲染<a class="hash-link" href="#ssr服务端渲染" title="标题的直接链接">​</a></h3><p>目前vue/react生成的前端项目, 其页面视图都是通过js动态生成的, 并且往往前端需要加载一个复杂的rumtime运行库. 对于首屏的渲染来说会比较慢. ssr就是把这部分的渲染过程放在服务端, 请求页面的时候就直接读取dom内容. </p><p>不但利于首屏渲染,也有利于SEO</p><p>缺点在于会增加服务端的压力, 并且会有一定的改造成本</p><h2 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="代码优化">代码优化<a class="hash-link" href="#代码优化" title="标题的直接链接">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="html性能优化">HTML性能优化<a class="hash-link" href="#html性能优化" title="标题的直接链接">​</a></h3><p>HTML的优化主要是规范化标签的使用, 比如:</p><ol><li>HTML标签始终闭合</li><li>script移到html文件的末尾, 因为JS会阻塞后面的页面的显示</li><li>减少iframe的使用</li><li>简化id和class</li><li>保持统一的大小写</li><li>清除空格</li><li>减少不必要的嵌套</li><li>减少注释</li><li>去除无用的标签和空标签</li><li>减少使用废弃的标签</li><li>避免空的<code>img:src</code></li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="css性能优化">CSS性能优化<a class="hash-link" href="#css性能优化" title="标题的直接链接">​</a></h3><p>CSS性能是个比较广泛的东西, 主要从四个方面:</p><ol><li>加载性能, 主要是从减少文件体积, 减少阻塞加载, 提高并发出发的</li><li>选择其性能, 但实际上对整体性能的影响忽略不计, selector的考察主要是规范化, 可维护性, 健壮性方面. 可以参考这篇文章: <a href="https://speakerdeck.com/jonrohan/githubs-css-performance" target="_blank" rel="noopener noreferrer">githubs-css-performance</a></li><li>渲染性能. 渲染性能是css优化的最重要的专注对象. 页面渲染junky过多, 看看是不是使用了text-shadow, 是不是开了字体抗锯齿, CSS动画的实现, 是否合理的使用了GPU加速. </li><li>可维护性, 健壮性. 命名是否合理, 结构层次设计是否健壮, 样式抽象复用了吗</li><li>减少重绘和回流</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="js-性能优化">JS 性能优化<a class="hash-link" href="#js-性能优化" title="标题的直接链接">​</a></h3><p>JS性能优化的方向就更多了</p><p>从工程角度讲:</p><ol><li>删除没有使用到的功能性代码</li><li>删除多余的依赖库</li><li>删除公共模板代码</li></ol><p>从使用内存角度讲:</p><ol><li>数组和对象避免使用构造函数</li><li>避免使用非必要的全局变量</li><li>合理的使用JS缓存机制, 即本地的loaclStorage, SessionStorage, cookie等</li><li>减少循环中的代码实例</li><li>减少比必要的变量声明</li><li>注意闭包的使用, 不要造成内存泄露</li><li>长列表优化</li><li>避免js运行时间过长, 合理的分解任务, 延迟执行高消耗的任务</li><li>利用好web worker, service worker等API</li><li>使用wasm</li><li>使用函数防抖/节流, 尾递归等优化技巧</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="vue-性能优化技巧">Vue 性能优化技巧<a class="hash-link" href="#vue-性能优化技巧" title="标题的直接链接">​</a></h3><ol><li>使用函数式组件</li><li>子组件拆分</li><li>使用局部变量</li><li>用<code>v-show</code>代替<code>v-if</code></li><li>使用<code>keepalive</code>缓存DOM</li><li>使用<code>deferred</code>组件延时分批渲染组件</li><li>使用<code>time slicing</code>时间片切割技术</li><li>合理使用非响应式数据</li><li>使用虚拟滚动组件</li></ol><p>......</p><h3 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="react-性能优化技巧">React 性能优化技巧<a class="hash-link" href="#react-性能优化技巧" title="标题的直接链接">​</a></h3><p>这部分的优化可以查看这里: React 性能优化</p><h2 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="尾声">尾声<a class="hash-link" href="#尾声" title="标题的直接链接">​</a></h2><p>性能优化深无止境, 我这篇短文就只能列举其中的部分能用并介绍一二, 甚至不能进行比较深入的讨论, 因为那样就实在太长了. 多积累, 多总结, 总能让技术越来越好的. </p><h2 class="anchor anchorWithHideOnScrollNavbar_IbQp" id="参考资料">参考资料<a class="hash-link" href="#参考资料" title="标题的直接链接">​</a></h2><ul><li><a href="https://my.oschina.net/u/4593024/blog/4898859" target="_blank" rel="noopener noreferrer">拯救你的年底 KPI：前端性能优化</a></li><li><a href="https://juejin.cn/post/6918936717311344647?utm_source=gold_browser_extension" target="_blank" rel="noopener noreferrer">换一个角度分析，网页性能优化</a></li><li><a href="https://zhuanlan.zhihu.com/p/121056616" target="_blank" rel="noopener noreferrer">前端性能优化 24 条建议(2020)</a></li><li><a href="https://blog.csdn.net/qq_32523587/article/details/79970471" target="_blank" rel="noopener noreferrer">HTTP/2 头部压缩技术介绍</a></li><li><a href="https://www.chinaz.com/web/2015/0417/399728.shtml" target="_blank" rel="noopener noreferrer">Web前端性能优化教程06：减少DNS查找、避免重定向</a></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文档分页导航"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/前端进阶/性能优化/性能-指标"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">性能-指标</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/前端进阶/性能优化/资源优化篇"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">资源优化篇</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_HamF thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#性能调优工具" class="table-of-contents__link toc-highlight">性能调优工具</a><ul><li><a href="#chrome-devtool-network" class="table-of-contents__link toc-highlight">chrome devtool: Network</a></li><li><a href="#chrome-devtool-lighthouse" class="table-of-contents__link toc-highlight">chrome devtool: Lighthouse</a></li><li><a href="#chrome-devtool-performance" class="table-of-contents__link toc-highlight">chrome devtool: Performance</a></li><li><a href="#webpagetest" class="table-of-contents__link toc-highlight">webPageTest</a></li><li><a href="#webpack-bundle-analyzer" class="table-of-contents__link toc-highlight">webpack-bundle-analyzer</a></li></ul></li><li><a href="#前端性能参数" class="table-of-contents__link toc-highlight">前端性能参数</a></li><li><a href="#资源优化" class="table-of-contents__link toc-highlight">资源优化</a><ul><li><a href="#图片资源优化" class="table-of-contents__link toc-highlight">图片资源优化</a></li><li><a href="#资源预加载" class="table-of-contents__link toc-highlight">资源预加载</a></li><li><a href="#字体压缩" class="table-of-contents__link toc-highlight">字体压缩</a></li></ul></li><li><a href="#网络优化" class="table-of-contents__link toc-highlight">网络优化</a><ul><li><a href="#静态资源使用cdn" class="table-of-contents__link toc-highlight">静态资源使用CDN</a></li><li><a href="#减少http请求针对http11" class="table-of-contents__link toc-highlight">减少HTTP请求(针对http1.1)</a></li><li><a href="#使用http2" class="table-of-contents__link toc-highlight">使用Http2</a></li><li><a href="#优化cookie的使用" class="table-of-contents__link toc-highlight">优化Cookie的使用</a></li><li><a href="#减少dns查询" class="table-of-contents__link toc-highlight">减少DNS查询</a></li><li><a href="#避免重定向" class="table-of-contents__link toc-highlight">避免重定向</a></li><li><a href="#启用-gzip" class="table-of-contents__link toc-highlight">启用 Gzip</a></li></ul></li><li><a href="#缓存控制" class="table-of-contents__link toc-highlight">缓存控制</a></li><li><a href="#构建优化" class="table-of-contents__link toc-highlight">构建优化</a><ul><li><a href="#tree-shaking" class="table-of-contents__link toc-highlight">tree shaking</a></li><li><a href="#代码压缩" class="table-of-contents__link toc-highlight">代码压缩</a></li><li><a href="#打包分离bundle-splitting" class="table-of-contents__link toc-highlight">打包分离(Bundle Splitting)</a></li><li><a href="#按需加载" class="table-of-contents__link toc-highlight">按需加载</a></li><li><a href="#dllplugin-提升构建速度" class="table-of-contents__link toc-highlight">Dllplugin 提升构建速度</a></li><li><a href="#ssr服务端渲染" class="table-of-contents__link toc-highlight">ssr：服务端渲染</a></li></ul></li><li><a href="#代码优化" class="table-of-contents__link toc-highlight">代码优化</a><ul><li><a href="#html性能优化" class="table-of-contents__link toc-highlight">HTML性能优化</a></li><li><a href="#css性能优化" class="table-of-contents__link toc-highlight">CSS性能优化</a></li><li><a href="#js-性能优化" class="table-of-contents__link toc-highlight">JS 性能优化</a></li><li><a href="#vue-性能优化技巧" class="table-of-contents__link toc-highlight">Vue 性能优化技巧</a></li><li><a href="#react-性能优化技巧" class="table-of-contents__link toc-highlight">React 性能优化技巧</a></li></ul></li><li><a href="#尾声" class="table-of-contents__link toc-highlight">尾声</a></li><li><a href="#参考资料" class="table-of-contents__link toc-highlight">参考资料</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 WIKI.JEIIZOU.SITE, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a3d1cba2.js"></script>
<script src="/assets/js/main.2bdd8cee.js"></script>
</body>
</html>
"use strict";(self.webpackChunk_jeiiz_wiki_site=self.webpackChunk_jeiiz_wiki_site||[]).push([[4346],{158:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>b});var l=t(6393);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);n&&(l=l.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,l)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,l,o=function(e,n){if(null==e)return{};var t,l,o={},a=Object.keys(e);for(l=0;l<a.length;l++)t=a[l],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)t=a[l],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var i=l.createContext({}),m=function(e){var n=l.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},p=function(e){var n=m(e.components);return l.createElement(i.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return l.createElement(l.Fragment,{},n)}},y=l.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,i=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),y=m(t),b=o,u=y["".concat(i,".").concat(b)]||y[b]||c[b]||a;return t?l.createElement(u,r(r({ref:n},p),{},{components:t})):l.createElement(u,r({ref:n},p))}));function b(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,r=new Array(a);r[0]=y;var s={};for(var i in n)hasOwnProperty.call(n,i)&&(s[i]=n[i]);s.originalType=e,s.mdxType="string"==typeof e?e:o,r[1]=s;for(var m=2;m<a;m++)r[m]=t[m];return l.createElement.apply(null,r)}return l.createElement.apply(null,t)}y.displayName="MDXCreateElement"},282:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>i,contentTitle:()=>r,default:()=>c,frontMatter:()=>a,metadata:()=>s,toc:()=>m});var l=t(9421),o=(t(6393),t(158));const a={},r="\u8bed\u6cd5\u7279\u6027-Symbol",s={unversionedId:"\u524d\u7aef\u57fa\u7840/JavsScript/\u8bed\u6cd5\u7279\u6027-Symbol",id:"\u524d\u7aef\u57fa\u7840/JavsScript/\u8bed\u6cd5\u7279\u6027-Symbol",title:"\u8bed\u6cd5\u7279\u6027-Symbol",description:"Symbol \u662f ES6 \u4e2d\u65b0\u589e\u52a0\u7684\u4e00\u79cd\u57fa\u7840\u7c7b\u578b, \u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u72ec\u4e00\u65e0\u4e8c\u7684\u503c.",source:"@site/docs/\u524d\u7aef\u57fa\u7840/JavsScript/\u8bed\u6cd5\u7279\u6027-Symbol.md",sourceDirName:"\u524d\u7aef\u57fa\u7840/JavsScript",slug:"/\u524d\u7aef\u57fa\u7840/JavsScript/\u8bed\u6cd5\u7279\u6027-Symbol",permalink:"/docs/\u524d\u7aef\u57fa\u7840/JavsScript/\u8bed\u6cd5\u7279\u6027-Symbol",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u8bed\u6cd5\u7279\u6027-Set&Map",permalink:"/docs/\u524d\u7aef\u57fa\u7840/JavsScript/\u8bed\u6cd5\u7279\u6027-Set&Map"},next:{title:"\u8bed\u6cd5\u7279\u6027-WebWorker",permalink:"/docs/\u524d\u7aef\u57fa\u7840/JavsScript/\u8bed\u6cd5\u7279\u6027-WebWorker"}},i={},m=[{value:"1. description",id:"1-description",level:2},{value:"2. Symbol \u4f5c\u4e3a\u5c5e\u6027\u540d",id:"2-symbol-\u4f5c\u4e3a\u5c5e\u6027\u540d",level:2},{value:"3. Symbol.for(), Symbol.keyFor()",id:"3-symbolfor-symbolkeyfor",level:2},{value:"4. Symbol \u5e94\u7528: \u6d88\u9664\u9b54\u672f\u5b57\u7b26\u4e32",id:"4-symbol-\u5e94\u7528-\u6d88\u9664\u9b54\u672f\u5b57\u7b26\u4e32",level:2},{value:"5. Symbol \u5e94\u7528: \u6a21\u5757\u7684 Singleton \u6a21\u578b",id:"5-symbol-\u5e94\u7528-\u6a21\u5757\u7684-singleton-\u6a21\u578b",level:2},{value:"6. Symbol \u5185\u7f6e\u503c",id:"6-symbol-\u5185\u7f6e\u503c",level:2},{value:"6.1 Symbol.hasInstance",id:"61-symbolhasinstance",level:3},{value:"6.2 Symbol.isConcatSpreadable",id:"62-symbolisconcatspreadable",level:3},{value:"6.3 Symbol.species",id:"63-symbolspecies",level:3},{value:"6.4 Symbol.match",id:"64-symbolmatch",level:3},{value:"6.5 Symbol.replace",id:"65-symbolreplace",level:3},{value:"6.6 Symbol.search",id:"66-symbolsearch",level:3},{value:"6.7 Symbol.split",id:"67-symbolsplit",level:3},{value:"6.8 Symbol.iterator",id:"68-symboliterator",level:3},{value:"6.9 Symbol.toPrimitive",id:"69-symboltoprimitive",level:3},{value:"6.10 Symbol.toStringTag",id:"610-symboltostringtag",level:3},{value:"6.11 Symbol.unscopables",id:"611-symbolunscopables",level:3}],p={toc:m};function c(e){let{components:n,...t}=e;return(0,o.kt)("wrapper",(0,l.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"\u8bed\u6cd5\u7279\u6027-symbol"},"\u8bed\u6cd5\u7279\u6027-Symbol"),(0,o.kt)("p",null,"Symbol \u662f ES6 \u4e2d\u65b0\u589e\u52a0\u7684\u4e00\u79cd\u57fa\u7840\u7c7b\u578b, \u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u72ec\u4e00\u65e0\u4e8c\u7684\u503c."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// \u6ca1\u6709\u53c2\u6570\u7684\u60c5\u51b5\nlet s1 = Symbol();\nlet s2 = Symbol();\n\ns1 === s2; // false\n\n// \u6709\u53c2\u6570\u7684\u60c5\u51b5\nlet s1 = Symbol('foo');\nlet s2 = Symbol('foo');\n\ns1 === s2; // false\n")),(0,o.kt)("p",null,"symbol \u4e0d\u80fd\u4e0e\u5176\u4ed6\u57fa\u7840\u7c7b\u578b\u8fdb\u884c\u8fd0\u7b97, \u56e0\u4e3a\u5b83\u4e0d\u80fd\u8fdb\u884c\u9690\u5f0f\u7684\u7c7b\u578b\u8f6c\u6362. \u4f46\u662f\u53ef\u4ee5\u8c03\u7528",(0,o.kt)("inlineCode",{parentName:"p"},"toString"),"\u65b9\u6cd5\u8fdb\u884c\u663e\u793a\u7684\u7c7b\u578b\u8f6c\u6362, \u4ee5\u53ca\u4f7f\u7528",(0,o.kt)("inlineCode",{parentName:"p"},"!"),"\u8fd0\u7b97\u7b26\u8f6c\u6362\u4e3a\u5e03\u5c14\u503c."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"let sym = Symbol('My symbol');\n\nString(sym); // 'Symbol(My symbol)'\nsym.toString(); // 'Symbol(My symbol)'\n\nlet sym = Symbol();\nBoolean(sym); // true\n!sym; // false\n\nif (sym) {\n    // ...\n}\n\nNumber(sym); // TypeError\nsym + 2; // TypeError\n")),(0,o.kt)("h2",{id:"1-description"},"1. description"),(0,o.kt)("p",null,"\u5728\u521b\u5efa ",(0,o.kt)("inlineCode",{parentName:"p"},"Symbol")," \u7684\u65f6\u5019, \u53ef\u4ee5\u6dfb\u52a0\u4e00\u4e2a\u63cf\u8ff0, \u901a\u8fc7",(0,o.kt)("inlineCode",{parentName:"p"},"description"),"\u65b9\u6cd5\u53ef\u4ee5\u7b80\u5355\u7684\u8c03\u7528\u8fd9\u4e2a\u63cf\u8ff0:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'const sym = Symbol(\'foo\');\n\nString(sym); // "Symbol(foo)"\nsym.toString(); // "Symbol(foo)"\n\nsym.description; // "foo"\n')),(0,o.kt)("h2",{id:"2-symbol-\u4f5c\u4e3a\u5c5e\u6027\u540d"},"2. Symbol \u4f5c\u4e3a\u5c5e\u6027\u540d"),(0,o.kt)("p",null,"\u7531\u4e8e\u6bcf\u4e00\u4e2a",(0,o.kt)("inlineCode",{parentName:"p"},"Symbol"),"\u503c\u90fd\u662f\u4e0d\u76f8\u7b49, \u6240\u4ee5\u4f5c\u4e3a\u5bf9\u8c61\u7684\u5c5e\u6027\u540d, \u53ef\u4ee5\u4fdd\u8bc1\u4e0d\u4f1a\u51fa\u73b0\u540c\u540d\u7684\u5c5e\u6027, \u53ef\u4ee5\u9632\u6b62\u952e\u503c\u88ab\u6539\u5199\u6216\u8986\u76d6:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"let mySymbol = Symbol();\n\n// \u7b2c\u4e00\u79cd\u5199\u6cd5\nlet a = {};\na[mySymbol] = 'Hello!';\n\n// \u7b2c\u4e8c\u79cd\u5199\u6cd5\nlet a = {\n    [mySymbol]: 'Hello!'\n};\n\n// \u7b2c\u4e09\u79cd\u5199\u6cd5\nlet a = {};\nObject.defineProperty(a, mySymbol, { value: 'Hello!' });\n\n// \u4ee5\u4e0a\u5199\u6cd5\u90fd\u5f97\u5230\u540c\u6837\u7ed3\u679c\na[mySymbol]; // \"Hello!\"\n")),(0,o.kt)("p",null,"\u4f46\u662f\u5f53",(0,o.kt)("inlineCode",{parentName:"p"},"symbol"),"\u4f5c\u4e3a\u5c5e\u6027\u540d\u7684\u65f6\u5019\u6211\u4eec\u65e0\u6cd5\u901a\u8fc7",(0,o.kt)("inlineCode",{parentName:"p"},"."),"\u8fd0\u7b97\u7b26\u6765\u8bbf\u95ee\u5bf9\u8c61\u5c5e\u6027."),(0,o.kt)("p",null,"\u540c\u7406\u5728\u5bf9\u8c61\u7684\u5185\u90e8, Symbol \u503c\u5fc5\u987b\u653e\u5728\u65b9\u62ec\u53f7\u4e4b\u4e2d:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"let s = Symbol();\n\nlet obj = {\n  [s](arg) { ... }\n};\n\nobj[s](123);\n")),(0,o.kt)("h2",{id:"3-symbolfor-symbolkeyfor"},"3. Symbol.for(), Symbol.keyFor()"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Symbol.for"),"\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u5b57\u7b26\u4e32, \u7136\u540e\u641c\u7d22\u662f\u5426\u6709\u8be5\u53c2\u6570\u4f5c\u4e3a\u540d\u79f0\u7684 Symbol, \u5982\u679c\u6709, \u5c31\u8fd4\u56de\u8fd9\u4e2a",(0,o.kt)("inlineCode",{parentName:"p"},"Symbol"),"\u503c, \u5426\u5219\u5c31\u65b0\u5efa\u5e76\u8fd4\u56de\u4e00\u4e2a\u4e00\u8be5\u5b57\u7b26\u4e32\u4e3a\u540d\u79f0\u7684 Symbol \u503c:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"let s1 = Symbol.for('foo');\nlet s2 = Symbol.for('foo');\n\ns1 === s2; // true\n")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Symbol.for()"),"\u4e0e",(0,o.kt)("inlineCode",{parentName:"p"},"Symbol()"),"\u8fd9\u4e24\u79cd\u5199\u6cd5, \u90fd\u4f1a\u751f\u6210\u65b0\u7684 Symbol. \u5176\u533a\u522b\u5728\u4e8e\u524d\u8005\u4f1a\u88ab\u767b\u8bb0\u5728\u5168\u5c40\u73af\u5883\u4e2d\u4f9b\u641c\u7d22, \u540e\u8005\u4e0d\u4f1a."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Symbol.keyFor()"),"\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u5df2\u767b\u8bb0\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"Symbol"),"\u7c7b\u578b\u503c\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"key"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"let s1 = Symbol.for('foo');\nSymbol.keyFor(s1); // \"foo\"\n\nlet s2 = Symbol('foo');\nSymbol.keyFor(s2); // undefined\n")),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Symbol.for"),"\u6ce8\u518c\u7684\u503c\u662f\u5168\u5c40\u73af\u5883\u7684, \u53ef\u4ee5\u5728\u4e0d\u540c\u7684 iframe \u6216 service worker \u4e2d\u53d6\u5230\u540c\u4e00\u4e2a\u503c:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"iframe = document.createElement('iframe');\niframe.src = String(window.location);\ndocument.body.appendChild(iframe);\n\niframe.contentWindow.Symbol.for('foo') === Symbol.for('foo');\n// true\n")),(0,o.kt)("h2",{id:"4-symbol-\u5e94\u7528-\u6d88\u9664\u9b54\u672f\u5b57\u7b26\u4e32"},"4. Symbol \u5e94\u7528: \u6d88\u9664\u9b54\u672f\u5b57\u7b26\u4e32"),(0,o.kt)("p",null,"\u9b54\u672f\u5b57\u7b26\u4e32\u503c\u7684\u662f, \u5728\u4ee3\u7801\u4e4b\u4e2d\u591a\u6b21\u51fa\u73b0, \u4e0e\u4ee3\u7801\u5f62\u6210\u5f3a\u8026\u5408\u7684\u67d0\u4e00\u4e2a\u5177\u4f53\u7684\u5b57\u7b26\u4e32\u6216\u8005\u6570\u503c. \u98ce\u683c\u826f\u597d\u7684\u4ee3\u7801, \u5e94\u8be5\u662f\u5c3d\u91cf\u6d88\u9664\u9b54\u672f\u5b57\u7b26\u4e32, \u6539\u6709\u542b\u4e49\u6e05\u6670\u7684\u53d8\u91cf\u4ee3\u66ff:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"function getArea(shape, options) {\n    let area = 0;\n\n    switch (shape) {\n        case 'Triangle': // \u9b54\u672f\u5b57\u7b26\u4e32\n            area = 0.5 * options.width * options.height;\n            break;\n        /* ... more code ... */\n    }\n\n    return area;\n}\n\ngetArea('Triangle', { width: 100, height: 100 }); // \u9b54\u672f\u5b57\u7b26\u4e32\n")),(0,o.kt)("p",null,"\u6211\u4eec\u53ef\u4ee5\u628a\u5176\u4e2d\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"Triangle"),"\u63d0\u5347\u4e3a\u4e00\u4e2a\u53d8\u91cf, \u5e76\u4e14\u53ef\u4ee5\u628a\u4e2a\u53d8\u91cf\u8bbe\u7f6e\u4e3a Symbol(\u56e0\u4e3a\u53d8\u91cf\u672c\u8eab\u662f\u4ec0\u4e48\u6ca1\u6709\u610f\u4e49):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const shapeType = {\n    triangle: Symbol()\n};\n\nfunction getArea(shape, options) {\n    let area = 0;\n    switch (shape) {\n        case shapeType.triangle:\n            area = 0.5 * options.width * options.height;\n            break;\n    }\n    return area;\n}\n\ngetArea(shapeType.triangle, { width: 100, height: 100 });\n")),(0,o.kt)("p",null,"\u4e0d\u8fc7, Symbol \u4f5c\u4e3a\u5c5e\u6027\u540d\u4e0d\u4f1a\u88ab\u679a\u4e3e, \u8fd9\u610f\u5473\u7740\u4e0d\u4f1a\u518d",(0,o.kt)("inlineCode",{parentName:"p"},"for...in"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"for...of"),"\u5faa\u73af\u4e2d, ",(0,o.kt)("inlineCode",{parentName:"p"},"Obejct.keys"),",",(0,o.kt)("inlineCode",{parentName:"p"},"Object.getOwnPropertyNames"),",",(0,o.kt)("inlineCode",{parentName:"p"},"JSON.stringify"),"\u4e2d\u51fa\u73b0, \u4f46\u662f\u53ef\u4ee5\u901a\u8fc7",(0,o.kt)("inlineCode",{parentName:"p"},"Obejct.getOwnPropertySymbols"),"\u53ef\u4ee5\u83b7\u53d6\u6307\u5b9a\u5bf9\u8c61\u7684 SYmbol \u5c5e\u6027\u540d."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Object.getOwnPropertySymbols"),"\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u6570\u7ec4, \u6210\u5458\u662f\u5f53\u524d\u5bf9\u8c61\u7684\u6240\u6709\u7528\u4f5c\u5c5e\u6027\u540d\u7684 Symbol \u503c:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const obj = {};\nlet a = Symbol('a');\nlet b = Symbol('b');\n\nobj[a] = 'Hello';\nobj[b] = 'World';\n\nconst objectSymbols = Object.getOwnPropertySymbols(obj);\n\nobjectSymbols;\n// [Symbol(a), Symbol(b)]\n")),(0,o.kt)("p",null,"\u6b64\u5916, \u4f7f\u7528",(0,o.kt)("inlineCode",{parentName:"p"},"Reflect.ownKeys"),"\u65b9\u6cd5\u53ef\u4ee5\u8fd4\u56de\u6240\u6709\u7c7b\u578b\u7684\u952e\u540d, \u5305\u62ec\u5e38\u89c4\u952e\u540d\u548c Symbol \u952e\u540d:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'let obj = {\n    [Symbol(\'my_key\')]: 1,\n    enum: 2,\n    nonEnum: 3\n};\n\nReflect.ownKeys(obj);\n//  ["enum", "nonEnum", Symbol(my_key)]\n')),(0,o.kt)("p",null,"\u5229\u7528\u8fd9\u4e2a\u7279\u6027\u53ef\u4ee5\u7528",(0,o.kt)("inlineCode",{parentName:"p"},"Symbol"),"\u6765\u5b9a\u4e49\u4e00\u4e9b\u975e\u79c1\u6709, \u4f46\u662f\u53c8\u5e0c\u671b\u53ea\u7528\u4e8e\u5185\u90e8\u7684\u65b9\u6cd5."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"let size = Symbol('size');\n\nclass Collection {\n    constructor() {\n        this[size] = 0;\n    }\n\n    add(item) {\n        this[this[size]] = item;\n        this[size]++;\n    }\n\n    static sizeOf(instance) {\n        return instance[size];\n    }\n}\n\nlet x = new Collection();\nCollection.sizeOf(x); // 0\n\nx.add('foo');\nCollection.sizeOf(x); // 1\n\nObject.keys(x); // ['0']\nObject.getOwnPropertyNames(x); // ['0']\nObject.getOwnPropertySymbols(x); // [Symbol(size)]\n")),(0,o.kt)("h2",{id:"5-symbol-\u5e94\u7528-\u6a21\u5757\u7684-singleton-\u6a21\u578b"},"5. Symbol \u5e94\u7528: \u6a21\u5757\u7684 Singleton \u6a21\u578b"),(0,o.kt)("p",null,"Singleton, \u5373\u6211\u4eec\u8bf4\u7684\u5355\u4f8b\u6a21\u5f0f, \u662f\u4e00\u79cd\u5728\u7f16\u7a0b\u4e2d\u5e94\u7528\u5f88\u5e7f\u6cdb\u7684\u8bbe\u8ba1\u6a21\u5f0f. \u4f7f\u7528 Symbol \u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u66f4\u597d\u7684\u4f7f\u7528\u8fd9\u79cd\u6a21\u5f0f:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const FOO_KEY = Symbol.for('foo');\n\nfunction A() {\n    this.foo = 'hello';\n}\n\nif (!global[FOO_KEY]) {\n    global[FOO_KEY] = new A();\n}\n\nmodule.exports = global[FOO_KEY];\n")),(0,o.kt)("p",null,"\u8fd9\u4e2a\u6a21\u5757\u53ef\u4ee5\u4fdd\u8bc1\u5728\u8c03\u7528\u8be5\u6a21\u5757\u7684\u65f6\u5019, \u6bcf\u6b21\u8fd4\u56de\u7684\u90fd\u662f\u540c\u4e00\u4e2a\u5b9e\u4f8b, \u5e76\u4e14",(0,o.kt)("inlineCode",{parentName:"p"},"global[FOO_KEY]"),"\u4e0d\u4f1a\u88ab\u65e0\u610f\u95f4\u8986\u76d6, \u4f46\u662f\u8be5\u662f\u53ef\u4ee5\u8fdb\u884c\u6539\u5199\u7684, \u6539\u5199\u65b9\u5f0f\u5982\u4e0b:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"global[Symbol.for('foo')] = { foo: 'world' };\n\nconst a = require('./mod.js');\n")),(0,o.kt)("p",null,"\u5982\u679c\u4f7f\u7528",(0,o.kt)("inlineCode",{parentName:"p"},"Symbol"),"\u6765\u4ee3\u66ff",(0,o.kt)("inlineCode",{parentName:"p"},"Symbol.for()"),", \u5219\u5916\u90e8\u5c31\u65e0\u6cd5\u6539\u5199\u8fd9\u4e2a\u503c\u4e86."),(0,o.kt)("h2",{id:"6-symbol-\u5185\u7f6e\u503c"},"6. Symbol \u5185\u7f6e\u503c"),(0,o.kt)("h3",{id:"61-symbolhasinstance"},"6.1 Symbol.hasInstance"),(0,o.kt)("p",null,"\u5bf9\u8c61\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"Symbol.hasInstance"),"\u5c5e\u6027, \u6307\u5411\u4e00\u4e2a\u5185\u90e8\u65b9\u6cd5. \u5f53\u5176\u4ed6\u5bf9\u8c61\u4f7f\u7528",(0,o.kt)("inlineCode",{parentName:"p"},"instanceof"),"\u8fd0\u7b97\u7b26, \u5224\u65ad\u662f\u5426\u4e3a\u8be5\u5bf9\u8c61\u7684\u5b9e\u4f8b\u662f, \u4f1a\u8c03\u7528\u8be5\u65b9\u6cd5, \u6bd4\u5982",(0,o.kt)("inlineCode",{parentName:"p"},"foo instanceof Foo"),"\u5b9e\u9645\u8c03\u7528\u7684\u662f",(0,o.kt)("inlineCode",{parentName:"p"},"Foo[Symbol.hasInstance](foo)"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"class MyClass {\n    [Symbol.hasInstance](foo) {\n        return foo instanceof Array;\n    }\n}\n\n[1, 2, 3] instanceof new MyClass(); // true\n")),(0,o.kt)("h3",{id:"62-symbolisconcatspreadable"},"6.2 Symbol.isConcatSpreadable"),(0,o.kt)("p",null,"\u5bf9\u8c61\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"Symbol.isConcatSpreadable"),"\u4e3a\u4e00\u4e2a boolean, \u8868\u793a\u5728\u7528\u4e8e",(0,o.kt)("inlineCode",{parentName:"p"},"Array.prototype.concat()"),"\u65f6\u662f\u5426\u80fd\u5c55\u5f00."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"let arr1 = ['c', 'd'];\n['a', 'b'].concat(arr1, 'e'); // ['a', 'b', 'c', 'd', 'e']\narr1[Symbol.isConcatSpreadable]; // undefined\n\nlet arr2 = ['c', 'd'];\narr2[Symbol.isConcatSpreadable] = false;\n['a', 'b'].concat(arr2, 'e'); // ['a', 'b', ['c','d'], 'e']\n")),(0,o.kt)("p",null,"\u5bf9\u4e8e\u6570\u7ec4, \u5b83\u662f\u9ed8\u8ba4\u5c55\u5f00\u7684, \u5bf9\u4e8e\u7c7b\u4f3c\u6570\u7ec4\u7684\u5bf9\u8c61, \u5219\u6b63\u597d\u76f8\u53cd, \u5b83\u9ed8\u8ba4\u662f\u4e0d\u5c55\u5f00\u7684."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"let obj = { length: 2, 0: 'c', 1: 'd' };\n['a', 'b'].concat(obj, 'e'); // ['a', 'b', obj, 'e']\n\nobj[Symbol.isConcatSpreadable] = true;\n['a', 'b'].concat(obj, 'e'); // ['a', 'b', 'c', 'd', 'e']\n")),(0,o.kt)("p",null,"\u8be5\u5c5e\u6027\u53ef\u4ee5\u5b9a\u4e49\u5728\u7c7b\u7684\u5185\u90e8:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"//\u5b9a\u4e49\u5728\u5b9e\u4f8b\u4e0a\nclass A1 extends Array {\n    constructor(args) {\n        super(args);\n        this[Symbol.isConcatSpreadable] = true;\n    }\n}\n//\u5b9a\u4e49\u5728\u7c7b\u672c\u8eab\nclass A2 extends Array {\n    constructor(args) {\n        super(args);\n    }\n    get [Symbol.isConcatSpreadable]() {\n        return false;\n    }\n}\nlet a1 = new A1();\na1[0] = 3;\na1[1] = 4;\nlet a2 = new A2();\na2[0] = 5;\na2[1] = 6;\n[1, 2].concat(a1).concat(a2);\n// [1, 2, 3, 4, [5, 6]]\n")),(0,o.kt)("h3",{id:"63-symbolspecies"},"6.3 Symbol.species"),(0,o.kt)("p",null,"\u5bf9\u8c61\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"Symbol.species"),"\u5c5e\u6027\uff0c\u6307\u5411\u4e00\u4e2a\u6784\u9020\u51fd\u6570\u3002\u521b\u5efa\u884d\u751f\u5bf9\u8c61\u65f6\uff0c\u4f1a\u4f7f\u7528\u8be5\u5c5e\u6027\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"class MyArray extends Array {}\n\nconst a = new MyArray(1, 2, 3);\nconst b = a.map(x => x);\nconst c = a.filter(x => x > 1);\n\nb instanceof MyArray; // true\nc instanceof MyArray; // true\n")),(0,o.kt)("p",null,"\u4f7f\u7528",(0,o.kt)("inlineCode",{parentName:"p"},"Symbol.species"),"\u53ef\u4ee5\u5b9a\u4e49\u521b\u5efa\u5b9e\u4f8b\u7684\u65f6\u5019\u8c03\u7528\u7684\u6784\u9020\u51fd\u6570:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"class MyArray extends Array {\n    static get [Symbol.species]() {\n        return Array;\n    }\n}\n\nconst a = new MyArray();\nconst b = a.map(x => x);\n\nb instanceof MyArray; // false\nb instanceof Array; // true\n")),(0,o.kt)("h3",{id:"64-symbolmatch"},"6.4 Symbol.match"),(0,o.kt)("p",null,"\u5bf9\u8c61",(0,o.kt)("inlineCode",{parentName:"p"},"Symbol.match"),"\u5c5e\u6027, \u6307\u5411\u4e00\u4e2a\u51fd\u6570, \u5f53\u6267\u884c",(0,o.kt)("inlineCode",{parentName:"p"},"str.match(myobject)"),"\u65f6, \u5982\u679c\u5c5e\u6027\u5b58\u5728, \u4f1a\u8c03\u7528, \u8fd4\u56de\u8be5\u65b9\u6cd5\u7684\u8fd4\u56de\u503c."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"String.prototype.match(regexp);\n// \u7b49\u540c\u4e8e\nregexp[Symbol.match](this);\n\nclass MyMatcher {\n    [Symbol.match](string) {\n        return 'hello world'.indexOf(string);\n    }\n}\n\n'e'.match(new MyMatcher()); // 1\n")),(0,o.kt)("h3",{id:"65-symbolreplace"},"6.5 Symbol.replace"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const x = {};\nx[Symbol.replace] = (...s) => console.log(s);\n\n'Hello'.replace(x, 'World'); // [\"Hello\", \"World\"]\n")),(0,o.kt)("h3",{id:"66-symbolsearch"},"6.6 Symbol.search"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"String.prototype.search(regexp);\n// \u7b49\u540c\u4e8e\nregexp[Symbol.search](this);\n\nclass MySearch {\n    constructor(value) {\n        this.value = value;\n    }\n    [Symbol.search](string) {\n        return string.indexOf(this.value);\n    }\n}\n'foobar'.search(new MySearch('foo')); // 0\n")),(0,o.kt)("h3",{id:"67-symbolsplit"},"6.7 Symbol.split"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"String.prototype.split(separator, limit);\n// \u7b49\u540c\u4e8e\nseparator[Symbol.split](this, limit);\n\nclass MySplitter {\n    constructor(value) {\n        this.value = value;\n    }\n    [Symbol.split](string) {\n        let index = string.indexOf(this.value);\n        if (index === -1) {\n            return string;\n        }\n        return [string.substr(0, index), string.substr(index + this.value.length)];\n    }\n}\n\n'foobar'.split(new MySplitter('foo'));\n// ['', 'bar']\n\n'foobar'.split(new MySplitter('bar'));\n// ['foo', '']\n\n'foobar'.split(new MySplitter('baz'));\n// 'foobar'\n")),(0,o.kt)("h3",{id:"68-symboliterator"},"6.8 Symbol.iterator"),(0,o.kt)("p",null,"\u5bf9\u8c61\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"Symbol.iterator"),"\u5c5e\u6027\uff0c\u6307\u5411\u8be5\u5bf9\u8c61\u7684\u9ed8\u8ba4\u904d\u5386\u5668\u65b9\u6cd5\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const myIterable = {};\nmyIterable[Symbol.iterator] = function*() {\n    yield 1;\n    yield 2;\n    yield 3;\n};\n\n[...myIterable]; // [1, 2, 3]\n")),(0,o.kt)("h3",{id:"69-symboltoprimitive"},"6.9 Symbol.toPrimitive"),(0,o.kt)("p",null,"\u5bf9\u8c61\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"Symbol.toPrimitive"),"\u5c5e\u6027\uff0c\u6307\u5411\u4e00\u4e2a\u65b9\u6cd5\u3002\u8be5\u5bf9\u8c61\u88ab\u8f6c\u4e3a\u539f\u59cb\u7c7b\u578b\u7684\u503c\u65f6\uff0c\u4f1a\u8c03\u7528\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u8fd4\u56de\u8be5\u5bf9\u8c61\u5bf9\u5e94\u7684\u539f\u59cb\u7c7b\u578b\u503c\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"let obj = {\n    [Symbol.toPrimitive](hint) {\n        switch (hint) {\n            case 'number':\n                return 123;\n            case 'string':\n                return 'str';\n            case 'default':\n                return 'default';\n            default:\n                throw new Error();\n        }\n    }\n};\n\n2 * obj; // 246\n3 + obj; // '3default'\nobj == 'default'; // true\nString(obj); // 'str'\n")),(0,o.kt)("h3",{id:"610-symboltostringtag"},"6.10 Symbol.toStringTag"),(0,o.kt)("p",null,"\u5bf9\u8c61\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"Symbol.toStringTag"),"\u5c5e\u6027\uff0c\u6307\u5411\u4e00\u4e2a\u65b9\u6cd5\u3002\u5728\u8be5\u5bf9\u8c61\u4e0a\u9762\u8c03\u7528",(0,o.kt)("inlineCode",{parentName:"p"},"Object.prototype.toStrin"),"g \u65b9\u6cd5\u65f6\uff0c\u5982\u679c\u8fd9\u4e2a\u5c5e\u6027\u5b58\u5728\uff0c\u5b83\u7684\u8fd4\u56de\u503c\u4f1a\u51fa\u73b0\u5728",(0,o.kt)("inlineCode",{parentName:"p"},"toString"),"\u65b9\u6cd5\u8fd4\u56de\u7684\u5b57\u7b26\u4e32\u4e4b\u4e2d\uff0c\u8868\u793a\u5bf9\u8c61\u7684\u7c7b\u578b\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u8fd9\u4e2a\u5c5e\u6027\u53ef\u4ee5\u7528\u6765\u5b9a\u5236",(0,o.kt)("inlineCode",{parentName:"p"},"[object Object]"),"\u6216",(0,o.kt)("inlineCode",{parentName:"p"},"[object Array]"),"\u4e2d",(0,o.kt)("inlineCode",{parentName:"p"},"object"),"\u540e\u9762\u7684\u90a3\u4e2a\u5b57\u7b26\u4e32\u3002"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// \u4f8b\u4e00\n({ [Symbol.toStringTag]: 'Foo' }.toString());\n// \"[object Foo]\"\n\n// \u4f8b\u4e8c\nclass Collection {\n    get [Symbol.toStringTag]() {\n        return 'xxx';\n    }\n}\nlet x = new Collection();\nObject.prototype.toString.call(x); // \"[object xxx]\"\n")),(0,o.kt)("h3",{id:"611-symbolunscopables"},"6.11 Symbol.unscopables"),(0,o.kt)("p",null,"\u5bf9\u8c61\u7684",(0,o.kt)("inlineCode",{parentName:"p"},"Symbol.unscopables"),"\u5c5e\u6027\uff0c\u6307\u5411\u4e00\u4e2a\u5bf9\u8c61\u3002\u8be5\u5bf9\u8c61\u6307\u5b9a\u4e86\u4f7f\u7528 with \u5173\u952e\u5b57\u65f6\uff0c\u54ea\u4e9b\u5c5e\u6027\u4f1a\u88ab with \u73af\u5883\u6392\u9664\u3002"))}c.isMDXComponent=!0}}]);
"use strict";(self.webpackChunkwiki_site=self.webpackChunkwiki_site||[]).push([[1728],{50158:(n,e,t)=>{t.d(e,{Zo:()=>m,kt:()=>s});var r=t(46393);function a(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function o(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function i(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?o(Object(t),!0).forEach((function(e){a(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}function l(n,e){if(null==n)return{};var t,r,a=function(n,e){if(null==n)return{};var t,r,a={},o=Object.keys(n);for(r=0;r<o.length;r++)t=o[r],e.indexOf(t)>=0||(a[t]=n[t]);return a}(n,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);for(r=0;r<o.length;r++)t=o[r],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(n,t)&&(a[t]=n[t])}return a}var g=r.createContext({}),u=function(n){var e=r.useContext(g),t=e;return n&&(t="function"==typeof n?n(e):i(i({},e),n)),t},m=function(n){var e=u(n.components);return r.createElement(g.Provider,{value:e},n.children)},v={inlineCode:"code",wrapper:function(n){var e=n.children;return r.createElement(r.Fragment,{},e)}},c=r.forwardRef((function(n,e){var t=n.components,a=n.mdxType,o=n.originalType,g=n.parentName,m=l(n,["components","mdxType","originalType","parentName"]),c=u(t),s=a,f=c["".concat(g,".").concat(s)]||c[s]||v[s]||o;return t?r.createElement(f,i(i({ref:e},m),{},{components:t})):r.createElement(f,i({ref:e},m))}));function s(n,e){var t=arguments,a=e&&e.mdxType;if("string"==typeof n||a){var o=t.length,i=new Array(o);i[0]=c;var l={};for(var g in e)hasOwnProperty.call(e,g)&&(l[g]=e[g]);l.originalType=n,l.mdxType="string"==typeof n?n:a,i[1]=l;for(var u=2;u<o;u++)i[u]=t[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}c.displayName="MDXCreateElement"},57396:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>g,contentTitle:()=>i,default:()=>v,frontMatter:()=>o,metadata:()=>l,toc:()=>u});var r=t(39421),a=(t(46393),t(50158));const o={slug:"/Graphics/WebGLCommonFragments"},i="WebGL-\u5e38\u89c1\u7247\u6bb5",l={unversionedId:"\u56fe\u5f62\u5b66/WebGL-\u5e38\u89c1\u7247\u6bb5",id:"\u56fe\u5f62\u5b66/WebGL-\u5e38\u89c1\u7247\u6bb5",title:"WebGL-\u5e38\u89c1\u7247\u6bb5",description:"\u521b\u5efa webgl \u73af\u5883",source:"@site/docs/07-\u56fe\u5f62\u5b66/WebGL-\u5e38\u89c1\u7247\u6bb5.md",sourceDirName:"07-\u56fe\u5f62\u5b66",slug:"/Graphics/WebGLCommonFragments",permalink:"/docs/Graphics/WebGLCommonFragments",draft:!1,tags:[],version:"current",frontMatter:{slug:"/Graphics/WebGLCommonFragments"},sidebar:"tutorialSidebar",previous:{title:"WebGL-\u5e38\u7528\u51fd\u6570",permalink:"/docs/Graphics/WebGLCommonFunctions"},next:{title:"\u57fa\u7840-\u77e9\u9635",permalink:"/docs/Graphics/BasicMatrix"}},g={},u=[{value:"\u521b\u5efa webgl \u73af\u5883",id:"\u521b\u5efa-webgl-\u73af\u5883",level:2},{value:"\u52a0\u8f7d\u7740\u8272\u5668",id:"\u52a0\u8f7d\u7740\u8272\u5668",level:2},{value:"\u4f20\u9012\u53c2\u6570\u548c\u53d8\u91cf",id:"\u4f20\u9012\u53c2\u6570\u548c\u53d8\u91cf",level:2},{value:"\u521b\u5efa\u7f13\u51b2\u533a\u5bf9\u8c61",id:"\u521b\u5efa\u7f13\u51b2\u533a\u5bf9\u8c61",level:2},{value:"\u53d8\u6362\u77e9\u9635\u7684\u4f7f\u7528",id:"\u53d8\u6362\u77e9\u9635\u7684\u4f7f\u7528",level:2},{value:"\u57fa\u7840\u52a8\u753b",id:"\u57fa\u7840\u52a8\u753b",level:2},{value:"\u4ea4\u9519\u7ec4\u7ec7(interleaving)",id:"\u4ea4\u9519\u7ec4\u7ec7interleaving",level:2},{value:"varying \u53d8\u91cf\u7684\u4f20\u9012",id:"varying-\u53d8\u91cf\u7684\u4f20\u9012",level:2},{value:"\u521b\u5efa\u56fe\u7247\u7eb9\u7406\u6620\u5c04",id:"\u521b\u5efa\u56fe\u7247\u7eb9\u7406\u6620\u5c04",level:2},{value:"\u9690\u85cf\u9762\u6d88\u9664",id:"\u9690\u85cf\u9762\u6d88\u9664",level:2},{value:"\u591a\u8fb9\u5f62\u504f\u79fb(polygon offset)",id:"\u591a\u8fb9\u5f62\u504f\u79fbpolygon-offset",level:2},{value:"\u521b\u5efa\u6b63\u65b9\u4f53",id:"\u521b\u5efa\u6b63\u65b9\u4f53",level:2},{value:"\u591a\u989c\u8272\u7684\u6b63\u65b9\u4f53",id:"\u591a\u989c\u8272\u7684\u6b63\u65b9\u4f53",level:2},{value:"\u5e73\u884c\u5149\u4e0b\u7684\u6f2b\u53cd\u5c04",id:"\u5e73\u884c\u5149\u4e0b\u7684\u6f2b\u53cd\u5c04",level:2},{value:"\u73af\u5883\u5149\u4e0b\u7684\u6f2b\u53cd\u5c04",id:"\u73af\u5883\u5149\u4e0b\u7684\u6f2b\u53cd\u5c04",level:2},{value:"\u8fd0\u52a8\u7269\u4f53\u7684\u5149\u7167\u6548\u679c",id:"\u8fd0\u52a8\u7269\u4f53\u7684\u5149\u7167\u6548\u679c",level:2},{value:"\u70b9\u5149\u6e90\u5149",id:"\u70b9\u5149\u6e90\u5149",level:2},{value:"\u9010\u7247\u5143\u5149\u7167",id:"\u9010\u7247\u5143\u5149\u7167",level:2}],m={toc:u};function v(n){let{components:e,...t}=n;return(0,a.kt)("wrapper",(0,r.Z)({},m,t,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"webgl-\u5e38\u89c1\u7247\u6bb5"},"WebGL-\u5e38\u89c1\u7247\u6bb5"),(0,a.kt)("h2",{id:"\u521b\u5efa-webgl-\u73af\u5883"},"\u521b\u5efa webgl \u73af\u5883"),(0,a.kt)("p",null,"\u8d85\u7ea7\u7b80\u5316\u7248:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"//\u83b7\u53d6\u8282\u70b9\u5bf9\u8c61\nlet canvas = document.getElementById('canvas-example');\n//\u521b\u5efawebgl\u73af\u5883\nlet gl = canvas.getContext('webgl');\n")),(0,a.kt)("p",null,"\u8fd9\u91cc\u7684\u521d\u59cb\u5316\u73af\u5883\u7701\u7565\u4e86\u5f88\u591a\u73af\u5883\u5224\u65ad\u548c\u5f02\u5e38\u5904\u7406."),(0,a.kt)("h2",{id:"\u52a0\u8f7d\u7740\u8272\u5668"},"\u52a0\u8f7d\u7740\u8272\u5668"),(0,a.kt)("p",null,"\u8d85\u7ea7\u7b80\u5316\u7248(\u7701\u7565\u6240\u6709\u5f02\u5e38\u5904\u7406):"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"//\u9876\u70b9\u7740\u8272\u5668\nlet VSHADER_SOURCE = `\nattribute vec4 a_Position;\nvoid main(){\n    gl_Position=a_Position;\n    gl_PointSize=10.0;\n}\n`;\n\n//\u7247\u5143\u7740\u8272\u5668\nlet FSHADER_SOURCE = `\nprecision mediump float;\nuniform vec4 u_FragColor;\nvoid main(){\ngl_FragColor=u_FragColor;\n}`; //\u8bbe\u7f6e\u989c\u8272\n\n//\u73b0\u5728\u6211\u4eec\u6709\u4e24\u4e2a\u975e\u5e38\u7b80\u5355\u7684\u9876\u70b9\u7740\u8272\u5668\u7247\u6bb5\u548c\u7247\u5143\u7740\u8272\u5668\u7247\u6bb5\n//\u5e76\u4e14\u5728\u524d\u9762\u5df2\u7ecf\u83b7\u53d6\u5230\u4e86webgl\u4e0a\u4e0b\u6587\u5bf9\u8c61gl\nlet gl;\n\nvar program = createProgram(gl, VSHADER_SOURCE, FSHADER_SOURCE);\ngl.useProgram(program);\ngl.program = program;\n\nfunction createProgram(gl, vshader, fshader) {\n    var vertexShader = loadShader(gl, gl.VERTEX_SHADER, vshader);\n    var fragmentShader = loadShader(gl, gl.FRAGMENT_SHADER, fshader);\n\n    var program = gl.createProgram();\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    gl.getProgramParameter(program, gl.LINK_STATUS);\n\n    return program;\n}\n\nfunction loadShader(gl, type, source) {\n    var shader = gl.createShader(type);\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n\n    var compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n    return shader;\n}\n")),(0,a.kt)("h2",{id:"\u4f20\u9012\u53c2\u6570\u548c\u53d8\u91cf"},"\u4f20\u9012\u53c2\u6570\u548c\u53d8\u91cf"),(0,a.kt)("p",null,"webgl \u6709\u4e24\u79cd\u4e3b\u8981\u7684\u53d8\u91cf\u4e13\u7528\u4e8e\u5916\u90e8\u8fdb\u884c\u4f20\u9012, \u5206\u522b\u662f\u4e13\u7528\u4e8e\u9876\u70b9\u7740\u8272\u5668\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"attribute"),"\u548c\u4e13\u7528\u4e8e\u7247\u6e90\u7740\u8272\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"uniform"),";"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"//\u8fd8\u662f\u4e0a\u9762\u7684\u7740\u8272\u4ee3\u7801\n//\u6211\u4eec\u73b0\u5728\u5728\u7740\u8272\u5668\u6e90\u7801\u4e2d\u5b9a\u4e49\u8fd9\u4e24\u79cd\u53d8\u91cf\n//\u9876\u70b9\u7740\u8272\u5668\nlet VSHADER_SOURCE = `\nattribute vec4 a_Position;\nvoid main(){\n    gl_Position=a_Position;\n    gl_PointSize=10.0;\n}\n`;\n\n//\u7247\u5143\u7740\u8272\u5668\nlet FSHADER_SOURCE = `\nprecision mediump float;\nuniform vec4 u_FragColor;\nvoid main(){\ngl_FragColor=u_FragColor;\n}`; //\u8bbe\u7f6e\u989c\u8272\n\n//\u5047\u5b9a\u6211\u4eec\u5df2\u7ecf\u83b7\u53d6\u5230gl\u5e76\u4e14\u521d\u59cb\u5316\u7740\u8272\u5668\u5b8c\u6210\n//\u63a5\u4e0b\u53bb\u5c31\u662f\u83b7\u53d6\u5230\u5bf9\u5e94\u53d8\u91cf\u7684\u5b58\u50a8\u5730\u5740\nlet a_Position = gl.getAttribLocation(gl.program, 'a_Position'); //\u53d8\u91cf\u540d\u79f0\u662f\u5bf9\u5e94\u7684\nlet u_FragColor = gl.getUniformLocation(gl.program, 'u_FragColor');\n\n//\u5c06\u70b9\u7684\u4f4d\u7f6e\u4f20\u9012\u5230\u53d8\u91cfa_Position\u4e2d\ngl.vertexAttrib3f(a_Position, xy[0], xy[1], 0.0);\n//\u5c06\u70b9\u7684\u989c\u8272\u4f20\u8f93\u5230u_FragColor\u53d8\u91cf\u4e2d\ngl.uniform4f(u_FragColor, rgba[0], rgba[1], rgba[2], rgba[3]);\n//\u7ed8\u5236\u70b9\ngl.drawArrays(gl.POINTS, 0, 1);\n")),(0,a.kt)("h2",{id:"\u521b\u5efa\u7f13\u51b2\u533a\u5bf9\u8c61"},"\u521b\u5efa\u7f13\u51b2\u533a\u5bf9\u8c61"),(0,a.kt)("p",null,"\u5148\u770b\u4ee3\u7801\u6d41\u7a0b:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'//\u8bbe\u7f6e\u9876\u70b9\u4f4d\u7f6e: \u521b\u5efa\u9876\u70b9\u7f13\u51b2\u533a\u5e76\u4e14\u628a\u9876\u70b9\u6570\u636e\u5199\u5165\nlet n = initVertexBuffers(gl);\nif (n < 0) {\n    console.log(\'Failed to set the positions of the vertices\');\n    return;\n}\n\n//\u7ee7\u7eed\u6267\u884c\n...\n\n//\u4e00\u6b21\u7ed8\u5236\u4e09\u4e2a\u70b9\ngl.drawArrays(gl.POINTS, 0, n);\n\n\nfunction initVertexBuffers(gl) {\n  let vertices = new Float32Array([0, 0.5, -0.5, -0.5, 0.5, -0.5]);\n  let n = 3; // \u9876\u70b9\u6570\u91cf\n\n  // \u521b\u5efa\u7f13\u51b2\u533a\u5bf9\u8c61\n  let vertexBuffer = gl.createBuffer();\n  if (!vertexBuffer) {\n    console.log("\u521b\u5efa\u7f13\u51b2\u533a\u5bf9\u8c61\u5931\u8d25");\n    return -1;\n  }\n\n  // \u7ed1\u5b9a\u7f13\u51b2\u533a\u5bf9\u8c61\u5230\u76ee\u6807\n  gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n  // \u5411\u7f13\u51b2\u533a\u5bf9\u8c61\u4e2d\u5199\u5165\u6570\u636e\n  gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n  //\u83b7\u53d6\u53d8\u91cf\u5730\u5740\n  let a_Position = gl.getAttribLocation(gl.program, "a_Position");\n  if (a_Position < 0) {\n    console.log("Failed to get the storage location of a_Position");\n    return -1;\n  }\n  //\u5c06\u7f13\u51b2\u533a\u5bf9\u8c61\u5206\u914d\u7ed9a_Position\u53d8\u91cf\n  gl.vertexAttribPointer(a_Position, 2, gl.FLOAT, false, 0, 0);\n\n  // \u94fe\u63a5a_Postion\u53d8\u91cf\u4e0e\u5206\u914d\u7ed9\u5b83\u7684\u7f13\u51b2\u533a\u5bf9\u8c61\n  gl.enableVertexAttribArray(a_Position);\n\n  return n;\n}\n')),(0,a.kt)("p",null,"\u518d\u6574\u7406\u4e00\u4e0b:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u521b\u5efa\u7f13\u51b2\u533a\u5bf9\u8c61(",(0,a.kt)("inlineCode",{parentName:"li"},"gl.createBuffer()"),")."),(0,a.kt)("li",{parentName:"ol"},"\u7ed1\u5b9a\u7f13\u51b2\u533a\u5bf9\u8c61(",(0,a.kt)("inlineCode",{parentName:"li"},"gl.bindBuffer()"),")."),(0,a.kt)("li",{parentName:"ol"},"\u5c06\u6570\u636e\u5199\u5165\u7f13\u51b2\u533a\u5bf9\u8c61(",(0,a.kt)("inlineCode",{parentName:"li"},"gl.bufferDate()"),")."),(0,a.kt)("li",{parentName:"ol"},"\u5c06\u7f13\u51b2\u533a\u5bf9\u8c61\u5206\u914d\u7ed9\u4e00\u4e2a ",(0,a.kt)("inlineCode",{parentName:"li"},"attribute")," \u5bf9\u8c61(",(0,a.kt)("inlineCode",{parentName:"li"},"gl.vertexAttribPointer()"),")."),(0,a.kt)("li",{parentName:"ol"},"\u5f00\u542f ",(0,a.kt)("inlineCode",{parentName:"li"},"attribute")," \u53d8\u91cf(",(0,a.kt)("inlineCode",{parentName:"li"},"gl.enableVertexAttribArray()"),").")),(0,a.kt)("h2",{id:"\u53d8\u6362\u77e9\u9635\u7684\u4f7f\u7528"},"\u53d8\u6362\u77e9\u9635\u7684\u4f7f\u7528"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'//\u9876\u70b9\u7740\u8272\u6570\u636e\n//\u5728\u4e09\u89d2\u9762\u4e0d\u7528\u6307\u5b9a\u70b9\u7684\u5927\u5c0f\nlet VSHADER_SOURCE =\n  "attribute vec4 a_Position;\\n" +\n  "uniform mat4 u_xformMatrix;\\n" +\n  "void main() {\\n" +\n  "  gl_Position = u_xformMatrix * a_Position;\\n" +\n  "}\\n";\n\nlet radian = (Math.PI * ANGLE) / 180.0; //\u8f6c\u5f27\u5ea6\u5236\nlet cosB = Math.cos(radian),\n    sinB = Math.sin(radian);\n\n//\u6ce8\u610f. WEbGL\u4e2d\u77e9\u9635\u662f\u5217\u4e3b\u5e8f\u7684\nlet xformMatrix=new Float32Array([\n    cosB,sinB,0.0,0.0,\n    -sinB,cosB,0.0,0.0,\n    0.0,0.0,1.0,0.0,\n    0.0,0.0,0.0,1.0\n]);\n\n//\u5c06\u53d8\u6362\u77e9\u9635\u4f20\u9012\u7ed9\u5bf9\u5e94\u7684\u53c2\u6570\nlet u_xformMatrix = gl.getUniformLocation(gl.program, \'u_xformMatrix\');\n\n//...\n\n//\u7ed8\u5236\u8be5\u4e09\u89d2\u5f62\ngl.drawArrays(gl.TRIANGLES, 0, n);\n')),(0,a.kt)("h2",{id:"\u57fa\u7840\u52a8\u753b"},"\u57fa\u7840\u52a8\u753b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"//\u83b7\u53d6u_ModelMatrix\u53d8\u91cf\u7684\u5b58\u50a8\u4f4d\u7f6e\nlet u_ModelMatrix = gl.getUniformLocation(gl.program, 'u_ModelMatrix');\nif (!u_ModelMatrix) {\n    console.log('Failed to get the storage location of u_ModelMatrix');\n    return;\n}\n\n//\u4e09\u89d2\u5f62\u7684\u5f53\u524d\u65cb\u8f6c\u89d2\u5ea6\nlet currentAngle = 0.0;\n//\u6a21\u578b\u77e9\u9635, Matrix4\u5bf9\u8c61, \u8fd9\u91cc\u4f7f\u7528\u4e86\u4e00\u4e2a\u7b2c\u4e09\u65b9\u7684\u77e9\u9635\u5e93\u7528\u6765\u66f4\u52a0\u65b9\u4fbf\u7684\u521b\u5efa\u77e9\u9635\u548c\u8fdb\u884c\u77e9\u9635\u8fd0\u7b97\nlet modelMatrix = new Matrix4();\n\n//\u5f00\u59cb\u7ed8\u5236\u4e09\u89d2\u5f62\nlet tick = function() {\n    currentAngle = animate(currentAngle); //\u66f4\u65b0\u65cb\u8f6c\u89d2\n    draw(gl, n, currentAngle, modelMatrix, u_ModelMatrix);\n    requestAnimationFrame(tick, canvas); //\u8bf7\u6c42\u6d4f\u89c8\u5668\u8c03\u7528tick\n};\ntick();\n\n//\u91cd\u7ed8\u4e09\u89d2\u5f62\nfunction draw(gl, n, currentAngle, modelMatrix, u_ModelMatrix) {\n    // \u8bbe\u7f6e\u53d8\u6362\u77e9\u9635\n    modelMatrix.setRotate(currentAngle, 0, 0, 1); //\u65cb\u8f6c\u89d2\u5ea6, \u65cb\u8f6c\u8f74(0, 0, 1)\n    modelMatrix.translate(0.35, 0, 0);\n    //\u91cd\u65b0\u4f20\u9012\u7ed9\u5bf9\u5e94\u7684\u53d8\u91cf\n    gl.uniformMatrix4fv(u_ModelMatrix, false, modelMatrix.elements);\n\n    // \u6e05\u7406\u753b\u5e03\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    // \u7ed8\u5236\u4e09\u89d2\u5f62\n    gl.drawArrays(gl.TRIANGLES, 0, n);\n}\n")),(0,a.kt)("h2",{id:"\u4ea4\u9519\u7ec4\u7ec7interleaving"},"\u4ea4\u9519\u7ec4\u7ec7(interleaving)"),(0,a.kt)("p",null,"\u6307\u7684\u662f\u5c06\u4e0d\u540c\u7684\u6570\u636e\u6bd4\u5982\u9876\u70b9\u7684\u5750\u6807\u548c\u5c3a\u5bf8\u6253\u5305\u5230\u540c\u4e00\u4e2a\u7f13\u51b2\u533a\u5bf9\u8c61\u4e2d, \u5e76\u901a\u8fc7\u67d0\u79cd\u673a\u5236\u5206\u522b\u8bbf\u95ee\u7f13\u51b2\u533a\u5bf9\u8c61\u4e2d\u4e0d\u540c\u79cd\u7c7b\u7684\u6570\u636e."),(0,a.kt)("p",null,"\u6bd4\u5982\u8bf4, \u6570\u636e\u662f\u8fd9\u6837\u7684:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let verticesSizes = new Float32Array([\n    // \u9876\u70b9\u7684\u5750\u6807\u548c\u5c3a\u5bf8\n    0.0, 0.5, 10.0,\n    -0.5, -0.5, 20.0,\n    0.5, -0.5, 30.0\n]);\n")),(0,a.kt)("p",null,"\u90a3\u4e48\u5728\u7f13\u51b2\u533a\u8fdb\u884c\u5206\u914d\u7684\u65f6\u5019\u53ef\u4ee5\u501f\u52a9",(0,a.kt)("inlineCode",{parentName:"p"},"gl.vertexAttribPointer"),"\u7684\u7b2c 5 \u4e2a\u53c2\u6570\u548c\u7b2c 6 \u4e2a\u53c2\u6570\u5dee\u522b\u5730\u8bfb\u53d6\u4e0d\u540c\u7684\u6570\u636e. \u4ee5\u4e0a\u9762\u7684\u6570\u636e\u4e3a\u4f8b:"),(0,a.kt)("p",null,"\u9996\u5148\u8bfb\u53d6\u9876\u70b9\u4f4d\u7f6e\u53c2\u6570:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"stride: \u5728\u7f13\u51b2\u533a\u5bf9\u8c61\u4e2d, \u5355\u4e2a\u9876\u70b9\u7684\u6240\u6709\u6570\u636e\u7684\u5b57\u8282\u6570, \u4e5f\u5c31\u662f\u76f8\u90bb\u4e24\u4e2a\u9876\u70b9\u4e4b\u95f4\u7684\u8ddd\u79bb, \u4e5f\u53eb\u6b65\u8fdb\u53c2\u6570, \u5728\u524d\u9762\u7684\u5b9e\u4f8b\u4e2d, \u7f13\u51b2\u533a\u53ea\u6709\u9876\u70b9\u7684\u5750\u6807\u6570\u636e, \u6240\u4ee5\u8bbe\u7f6e\u4e3a 0 \u5373\u53ef"),(0,a.kt)("li",{parentName:"ul"},"offset: \u8868\u793a\u5f53\u524d\u8003\u8651\u7684\u6570\u636e\u8ddd\u79bb\u9996\u4e2a\u5143\u7d20\u7684\u8ddd\u79bb, \u4e5f\u53eb\u504f\u79fb\u53c2\u6570, \u9876\u70b9\u7684\u5750\u6807\u6570\u636e\u662f\u653e\u5728\u6700\u524d\u9762\u7684, \u6240\u4ee5 offset \u4e3a 0.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// \u7f13\u51b2\u533a\u5bf9\u8c61\nvar vertexTexCoordBuffer = gl.createBuffer();\n// \u5b57\u8282\u5355\u4f4d\u957f\u5ea6\nvar FSIZE = verticesTexCoords.BYTES_PER_ELEMENT;\n\ngl.vertexAttribPointer(a_Position, 2, gl.FLOAT, false, FSIZE * 4, 0);\n")),(0,a.kt)("p",null,"\u7136\u540e\u6309\u7167\u4e00\u6837\u7684\u539f\u7406, \u8bfb\u53d6\u9876\u70b9\u7684\u5927\u5c0f\u6570\u636e:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"//\u5c06\u9876\u70b9\u5c3a\u5bf8\u5199\u5165\u7f13\u51b2\u533a\u5bf9\u8c61\u5e76\u5f00\u542f\nlet a_PointSize = gl.getAttribLocation(gl.program, 'a_PointSize');\n\ngl.vertexAttribPointer(a_PointSize, 1, gl.FLOAT, false, FSIZE * 3, FSIZE * 2);\ngl.enableVertexAttribArray(a_PointSize);\n")),(0,a.kt)("h2",{id:"varying-\u53d8\u91cf\u7684\u4f20\u9012"},"varying \u53d8\u91cf\u7684\u4f20\u9012"),(0,a.kt)("p",null,"\u9996\u5148\u4fee\u6539\u7740\u8272\u5668\u7684\u4ee3\u7801, \u5b83\u770b\u8d77\u6765\u5dee\u4e0d\u591a\u8fd9\u6837:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let VSHADER_SOURCE =\n    'attribute vec4 a_Position;\\n' +\n    'attribute vec4 a_Color;\\n' +\n    'varying vec4 v_Color;\\n' + //varying\u53d8\u91cf\n    'void main() {\\n' +\n    '  gl_Position = a_Position;\\n' +\n    '  gl_PointSize = 10.0;' +\n    '  v_Color = a_Color;\\n' + //\u5c06\u6570\u636e\u4f20\u7ed9\u7247\u5143\u7740\u8272\u5668\n    '}\\n';\n\n// Fragment shader program\nlet FSHADER_SOURCE =\n    '#ifdef GL_ES\\n' +\n    'precision mediump float;\\n' +\n    '#endif\\n' +\n    'varying vec4 v_Color;\\n' +\n    'void main() {\\n' +\n    '  gl_FragColor = v_Color;\\n' +\n    '}\\n';\n")),(0,a.kt)("p",null,"\u5728 WebGL \u4e2d, \u5982\u679c\u9876\u70b9\u7740\u8272\u5668\u4e0e\u7247\u5143\u7740\u8272\u5668\u4e2d\u7c7b\u578b\u548c\u547d\u540d\u90fd\u76f8\u540c\u7684 varying \u53d8\u91cf, \u90a3\u4e48\u9876\u70b9\u7740\u8272\u5668\u8d4b\u503c\u7ed9\u8be5\u53d8\u91cf\u7684\u503c\u5c31\u4f1a\u88ab\u81ea\u52a8\u5730\u4f20\u5165\u7247\u5143\u7740\u8272\u5668."),(0,a.kt)("p",null,"\u8981\u5bf9 ",(0,a.kt)("inlineCode",{parentName:"p"},"varying")," \u66f4\u6df1\u523b\u7684\u7406\u89e3, \u9700\u8981\u7406\u89e3\u9876\u70b9\u7740\u8272\u5668\u5230\u7247\u5143\u7740\u8272\u5668\u4e4b\u95f4\u7684\u56fe\u5143\u88c5\u914d\u8fc7\u7a0b\u548c varying \u7684\u63d2\u503c\u8fc7\u7a0b. \u6b64\u5904\u4e0d\u518d\u5c55\u5f00\u8bb0\u8ff0"),(0,a.kt)("h2",{id:"\u521b\u5efa\u56fe\u7247\u7eb9\u7406\u6620\u5c04"},"\u521b\u5efa\u56fe\u7247\u7eb9\u7406\u6620\u5c04"),(0,a.kt)("p",null,"\u5728 webgl \u4e2d, \u8981\u8fdb\u884c\u7eb9\u7406\u6620\u5c04, \u9700\u8981\u9075\u5faa\u4ee5\u4e0b\u56db\u6b65:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u51c6\u5907\u6620\u5c04\u5230\u51e0\u4f55\u56fe\u5f62\u4e0a\u7684\u7eb9\u7406\u56fe\u50cf"),(0,a.kt)("li",{parentName:"ol"},"\u4e3a\u51e0\u4f55\u56fe\u5f62\u914d\u7f6e\u7eb9\u7406\u6620\u5c04\u65b9\u5f0f"),(0,a.kt)("li",{parentName:"ol"},"\u52a0\u8f7d\u7eb9\u7406\u56fe\u50cf,\u8fdb\u884c\u914d\u7f6e\u548c\u4f7f\u7528"),(0,a.kt)("li",{parentName:"ol"},"\u5728\u7247\u5143\u7740\u8272\u5668\u4e2d\u5c06\u76f8\u5e94\u7684\u7eb9\u7d20\u4ece\u7eb9\u7406\u4e2d\u62bd\u53d6\u51fa\u6765, \u5e76\u5c06\u7eb9\u7d20\u7684\u989c\u8272\u8d4b\u7ed9\u7247\u5143")),(0,a.kt)("p",null,"\u6765\u770b\u4e00\u6bb5\u4ee3\u7801\u793a\u4f8b:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'//\u77e9\u9635\u7eb9\u7406\u6e32\u67d3\n// \u9876\u70b9\u7740\u8272\u5668\nvar VSHADER_SOURCE =\n  "attribute vec4 a_Position;\\n" +\n  "attribute vec2 a_TexCoord;\\n" +\n  "varying vec2 v_TexCoord;\\n" +\n  "void main() {\\n" +\n  "  gl_Position = a_Position;\\n" +\n  "  v_TexCoord = a_TexCoord;\\n" +\n  "}\\n";\n\n// \u7247\u5143\u7740\u8272\u5668\nvar FSHADER_SOURCE =\n  "#ifdef GL_ES\\n" +\n  "precision mediump float;\\n" +\n  "#endif\\n" +\n  "uniform sampler2D u_Sampler;\\n" +\n  "varying vec2 v_TexCoord;\\n" +\n  "void main() {\\n" +\n  "  gl_FragColor = texture2D(u_Sampler, v_TexCoord);\\n" +\n  "}\\n";\n\nfunction main() {\n  ...\n\n  //\u8bbe\u7f6e\u9876\u70b9\u4fe1\u606f\n  var n = initVertexBuffers(gl);\n  if (n < 0) {\n    console.log("Failed to set the vertex information");\n    return;\n  }\n\n  // Specify the color for clearing <canvas>\n  gl.clearColor(0.0, 0.0, 0.0, 1.0);\n\n  // \u914d\u7f6e\u7eb9\u7406\n  if (!initTextures(gl, n)) {\n    console.log("Failed to intialize the texture.");\n    return;\n  }\n}\n\nfunction initVertexBuffers(gl) {\n  var verticesTexCoords = new Float32Array([\n    // \u9876\u70b9\u5750\u6807\u548c\u7eb9\u7406\u5750\u6807\n    -0.5,  0.5,   0.0, 1.0,\n    -0.5, -0.5,   0.0, 0.0,\n     0.5,  0.5,   1.0, 1.0,\n     0.5, -0.5,   1.0, 0.0,\n  ]);\n  var n = 4; // The number of vertices\n\n  // \u521b\u5efa\u7f13\u51b2\u533a\u5bf9\u8c61\n  var vertexTexCoordBuffer = gl.createBuffer();\n  if (!vertexTexCoordBuffer) {\n    console.log("Failed to create the buffer object");\n    return -1;\n  }\n\n  // \u5c06\u9876\u70b9\u5750\u6807\u548c\u7eb9\u7406\u5750\u6807\u5199\u5165\u7f13\u51b2\u533a\u5bf9\u8c61\n  gl.bindBuffer(gl.ARRAY_BUFFER, vertexTexCoordBuffer);\n  gl.bufferData(gl.ARRAY_BUFFER, verticesTexCoords, gl.STATIC_DRAW);\n\n  var FSIZE = verticesTexCoords.BYTES_PER_ELEMENT;\n  //Get the storage location of a_Position, assign and enable buffer\n  var a_Position = gl.getAttribLocation(gl.program, "a_Position");\n  if (a_Position < 0) {\n    console.log("Failed to get the storage location of a_Position");\n    return -1;\n  }\n  gl.vertexAttribPointer(a_Position, 2, gl.FLOAT, false, FSIZE * 4, 0);\n  gl.enableVertexAttribArray(a_Position); // Enable the assignment of the buffer object\n\n  //\u83b7\u53d6\u7eb9\u7406\u5750\u6807\u5730\u5740\n  var a_TexCoord = gl.getAttribLocation(gl.program, "a_TexCoord");\n  if (a_TexCoord < 0) {\n    console.log("Failed to get the storage location of a_TexCoord");\n    return -1;\n  }\n  // Assign the buffer object to a_TexCoord variable\n  gl.vertexAttribPointer(a_TexCoord, 2, gl.FLOAT, false, FSIZE * 4, FSIZE * 2);\n  gl.enableVertexAttribArray(a_TexCoord); // \u5f00\u542f\u7eb9\u7406\u5750\u6807\n\n  return n;\n}\n\nfunction initTextures(gl, n) {\n  var texture = gl.createTexture(); // \u521b\u5efa\u7eb9\u7406\u5bf9\u8c61\n  if (!texture) {\n    console.log("Failed to create the texture object");\n    return false;\n  }\n\n  // \u83b7\u53d6u_Smapler\u7684\u5b58\u50a8\u4f4d\u7f6e\n  var u_Sampler = gl.getUniformLocation(gl.program, "u_Sampler");\n  if (!u_Sampler) {\n    console.log("Failed to get the storage location of u_Sampler");\n    return false;\n  }\n  var image = new Image(); // \u521b\u5efaimage\u5bf9\u8c61\n  if (!image) {\n    console.log("Failed to create the image object");\n    return false;\n  }\n  // \u6ce8\u518c\u56fe\u50cf\u52a0\u8f7d\u4e8b\u4ef6\u54cd\u5e94\u51fd\u6570\n  image.onload = function() {\n    loadTexture(gl, n, texture, u_Sampler, image);\n  };\n  // \u544a\u8bc9\u6d4f\u89c8\u5668\u53bb\u52a0\u8f7d\u56fe\u50cf\n  image.src = "../resources/sky.jpg";\n\n  return true;\n}\n\nfunction loadTexture(gl, n, texture, u_Sampler, image) {\n  gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, 1); //\u5bf9\u7eb9\u7406\u56fe\u50cf\u8fdb\u884cy\u5468\u7ffb\u8f6c\n  // \u5f00\u542f0\u53f7\u7eb9\u7406\u5355\u5143\n  gl.activeTexture(gl.TEXTURE0);\n  // \u5411target\u7ed1\u5b9a\u7eb9\u7406\u5bf9\u8c61\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n\n  // \u914d\u7f6e\u7eb9\u7406\u53c2\u6570\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n  // \u914d\u7f6e\u7eb9\u7406\u56fe\u50cf\n  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGB, gl.RGB, gl.UNSIGNED_BYTE, image);\n\n  //\u5c060\u53f7\u7eb9\u7406\u4f20\u9012\u7ed9\u7740\u8272\u5668\n  gl.uniform1i(u_Sampler, 0);\n\n  gl.clear(gl.COLOR_BUFFER_BIT); // Clear <canvas>\n\n  gl.drawArrays(gl.TRIANGLE_STRIP, 0, n); // Draw the rectangle\n}\n')),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u9996\u5148\u5728",(0,a.kt)("inlineCode",{parentName:"li"},"initVertexBuffers()"),"\u51fd\u6570\u4e2d\u5c06\u7eb9\u7406\u5750\u6807\u4f20\u5165\u9876\u70b9\u7740\u8272\u5668, \u7136\u540e\u5c06\u7eb9\u7406\u5750\u6807\u5206\u914d\u7ed9",(0,a.kt)("inlineCode",{parentName:"li"},"a_TextCoord"),", \u5e76\u5f00\u542f\u5b83."),(0,a.kt)("li",{parentName:"ol"},"\u7136\u540e\u518d",(0,a.kt)("inlineCode",{parentName:"li"},"initTextures()"),"\u51fd\u6570\u4e2d\u521b\u5efa\u7eb9\u7406\u5bf9\u8c61"),(0,a.kt)("li",{parentName:"ol"},"\u521b\u5efa image \u5bf9\u8c61\u5f02\u6b65\u52a0\u8f7d\u7eb9\u7406\u56fe\u50cf, \u4e4b\u540e\u8c03\u7528",(0,a.kt)("inlineCode",{parentName:"li"},"loadTexture()"),"\u51fd\u6570\u5904\u7406\u7eb9\u7406\u56fe\u50cf"),(0,a.kt)("li",{parentName:"ol"},"\u5728",(0,a.kt)("inlineCode",{parentName:"li"},"loadTexture()"),"\u4e2d, \u9996\u5148\u4f7f\u7528",(0,a.kt)("inlineCode",{parentName:"li"},"gl.pixelStorei()"),"\u9700\u8981\u5bf9\u7eb9\u7406\u56fe\u50cf\u8fdb\u884c y \u8f74\u53cd\u8f6c, \u56e0\u4e3a\u5728 webgl \u4e2d\u7eb9\u7406\u7cfb\u7edf\u4e2d\u7684 t \u8f74\u7684\u65b9\u5411\u548c\u56fe\u7247\u7684\u5750\u6807\u7cfb\u7edf\u4e2d\u7684 y \u8f74\u7684\u65b9\u5411\u662f\u76f8\u53cd\u7684."),(0,a.kt)("li",{parentName:"ol"},"\u7136\u540e\u4f7f\u7528",(0,a.kt)("inlineCode",{parentName:"li"},"gl.activeTexture()"),"\u6fc0\u6d3b\u7eb9\u7406\u5355\u5143."),(0,a.kt)("li",{parentName:"ol"},"\u7ed1\u5b9a\u7eb9\u7406\u5bf9\u8c61(",(0,a.kt)("inlineCode",{parentName:"li"},"gl.bindTexture()"),")"),(0,a.kt)("li",{parentName:"ol"},"\u914d\u7f6e\u7eb9\u7406\u5bf9\u8c61\u7684\u53c2\u6570(",(0,a.kt)("inlineCode",{parentName:"li"},"gl.texParameteri()"),")"),(0,a.kt)("li",{parentName:"ol"},"\u5c06\u56fe\u50cf\u5206\u914d\u7ed9\u7eb9\u7406\u5bf9\u8c61(",(0,a.kt)("inlineCode",{parentName:"li"},"gl.texImageD()"),")"),(0,a.kt)("li",{parentName:"ol"},"\u5c06\u7eb9\u7406\u5355\u5143\u4f20\u9012\u7ed9\u7247\u5143\u7740\u8272\u5668(",(0,a.kt)("inlineCode",{parentName:"li"},"gl.uniform1i()"),")"),(0,a.kt)("li",{parentName:"ol"},"\u9876\u70b9\u7740\u8272\u5668\u83b7\u5f97\u7eb9\u7406\u5750\u6807, \u4f20\u9012\u7ed9\u7247\u5143\u7740\u8272\u5668"),(0,a.kt)("li",{parentName:"ol"},"\u7247\u5143\u7740\u8272\u5668\u4f7f\u7528\u5185\u7f6e\u51fd\u6570 ",(0,a.kt)("inlineCode",{parentName:"li"},"texture2D"),"\u62bd\u53d6\u7eb9\u7d20\u989c\u8272")),(0,a.kt)("p",null,"\u4f20\u9012\u591a\u5e45\u7eb9\u7406\u7684\u65b9\u6cd5, \u53ef\u4ee5\u770b\u7247\u5143\u7740\u8272\u5668\u4ee3\u7801:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-glsl"},"uniform sampler2D u_Sampler0;\nuniform sampler2D u_Sampler1;\nvarying vec2 v_TexCoord;\nvoid main() {\n  vec4 color0 = texture2D(u_Sampler0, v_TexCoord);\n  vec4 color1 = texture2D(u_Sampler1, v_TexCoord);\n  gl_FragColor = color0 * color1;\n};\n")),(0,a.kt)("p",null,"\u4e3b\u8981\u5c31\u662f\u91cd\u590d\u7684\u4f20\u5165\u4e24\u5f20\u7eb9\u7406, \u7136\u540e\u8fdb\u884c\u77e2\u91cf\u76f8\u4e58"),(0,a.kt)("h2",{id:"\u9690\u85cf\u9762\u6d88\u9664"},"\u9690\u85cf\u9762\u6d88\u9664"),(0,a.kt)("p",null,"webgl \u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f1a\u6309\u7167\u7f13\u51b2\u533a\u4e2d\u7684\u987a\u5e8f\u7ed8\u5236\u56fe\u5f62, \u800c\u4e14\u540e\u7ed8\u5236\u7684\u56fe\u5f62\u4f1a\u8986\u76d6\u5148\u7ed8\u5236\u7684\u56fe\u5f62, \u56e0\u4e3a\u8fd9\u6837\u505a\u5f88\u9ad8\u6548. \u5982\u679c\u573a\u666f\u4e2d\u7684\u5bf9\u8c61\u4e0d\u53d1\u751f\u8fd0\u52a8, \u8fd9\u6837\u505a\u662f\u6ca1\u6709\u95ee\u9898\u7684, \u4f46\u662f\u5f53\u6211\u4eec\u79fb\u52a8\u89c6\u89d2\u7684\u65f6\u5019, \u662f\u4e0d\u53ef\u80fd\u4e8b\u5148\u51b3\u5b9a\u4e8b\u7269\u7684\u51fa\u73b0\u987a\u5e8f\u7684."),(0,a.kt)("p",null,"\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898, WebGL \u63d0\u4f9b\u4e86 ",(0,a.kt)("strong",{parentName:"p"},"\u9690\u85cf\u9762\u6d88\u9664(hidden surface removal)")," , \u8fd9\u4e2a\u529f\u80fd\u4f1a\u5e2e\u52a9\u6211\u4eec\u6d88\u9664\u90a3\u4e9b\u88ab\u906e\u6321\u7684\u8868\u9762(\u9690\u85cf\u9762), \u4f7f\u6211\u4eec\u53ef\u4ee5\u653e\u5fc3\u7684\u7ed8\u5236\u573a\u666f, \u4ea4\u7ed9\u7cfb\u7edf\u53bb\u5224\u65ad\u7269\u4f53\u7684\u8fdc\u666f\u5173\u7cfb. \u5f00\u542f\u8fd9\u4e2a\u529f\u80fd\u53ea\u9700\u8981\u4e24\u6b65:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"//\u5f00\u542f\u9690\u85cf\u9762\u6d88\u9664\u529f\u80fd\ngl.enable(gl.DEPTH_TEST);\n\n//\u7ed8\u5236\u4e4b\u524d, \u6e05\u9664\u6df1\u5ea6\u7f13\u51b2\u533a\ngl.clear(gl.DEPTH_BUFFER_BIT);\n")),(0,a.kt)("h2",{id:"\u591a\u8fb9\u5f62\u504f\u79fbpolygon-offset"},"\u591a\u8fb9\u5f62\u504f\u79fb(polygon offset)"),(0,a.kt)("p",null,"\u591a\u8fb9\u5f62\u504f\u79fb\u662f\u4e3a\u4e86\u89e3\u51b3\u6df1\u5ea6\u51b2\u7a81\u7684\u95ee\u9898, \u8be5\u673a\u5236\u5c31\u662f\u81ea\u52a8\u5728 Z \u503c\u4e0a\u9762\u589e\u52a0\u4e00\u4e2a\u504f\u79fb\u91cf, \u504f\u79fb\u91cf\u7684\u503c\u7531\u7269\u4f53\u8868\u9762\u76f8\u5bf9\u4e8e\u89c2\u5bdf\u8005\u89c6\u7ebf\u7684\u89d2\u5ea6\u6765\u786e\u5b9a. \u542f\u7528\u8be5\u673a\u5236\u53ea\u9700\u8981\u4e24\u884c\u4ee3\u7801:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"//\u542f\u7528\u591a\u8fb9\u5f62\u504f\u79fb\ngl.enable(gl.POLYGON_OFFSET_FILL);\n//\u5728\u7ed8\u5236\u4e4b\u524d\u6307\u5b9a\u7528\u6765\u8ba1\u7b97\u504f\u79fb\u91cf\u7684\u53c2\u6570\ngl.polyginOffset(1.0, 1.0);\n")),(0,a.kt)("h2",{id:"\u521b\u5efa\u6b63\u65b9\u4f53"},"\u521b\u5efa\u6b63\u65b9\u4f53"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"//\u9876\u70b9\u7740\u8272\u5668\nvar VSHADER_SOURCE =\n    'attribute vec4 a_Position;\\n' +\n    'attribute vec4 a_Color;\\n' +\n    'uniform mat4 u_MvpMatrix;\\n' +\n    'varying vec4 v_Color;\\n' +\n    'void main() {\\n' +\n    '  gl_Position = u_MvpMatrix * a_Position;\\n' +\n    '  v_Color = a_Color;\\n' +\n    '}\\n';\n\n// \u7247\u5143\u7740\u8272\u5668\nvar FSHADER_SOURCE =\n    '#ifdef GL_ES\\n' +\n    'precision mediump float;\\n' +\n    '#endif\\n' +\n    'varying vec4 v_Color;\\n' +\n    'void main() {\\n' +\n    '  gl_FragColor = v_Color;\\n' +\n    '}\\n';\n\nfunction main() {\n    var canvas = document.getElementById('webgl');\n\n    var gl = getWebGLContext(canvas);\n    if (!gl) {\n        console.log('Failed to get the rendering context for WebGL');\n        return;\n    }\n\n    if (!initShaders(gl, VSHADER_SOURCE, FSHADER_SOURCE)) {\n        console.log('Failed to intialize shaders.');\n        return;\n    }\n\n    var n = initVertexBuffers(gl);\n    if (n < 0) {\n        console.log('Failed to set the vertex information');\n        return;\n    }\n\n    //\u5f00\u542f\u6df1\u5ea6\u68c0\u6d4b\n    gl.clearColor(0.0, 0.0, 0.0, 1.0);\n    gl.enable(gl.DEPTH_TEST);\n\n    var u_MvpMatrix = gl.getUniformLocation(gl.program, 'u_MvpMatrix');\n    if (!u_MvpMatrix) {\n        console.log('Failed to get the storage location of u_MvpMatrix');\n        return;\n    }\n\n    // \u8bbe\u7f6e\u89c2\u5bdf\u70b9\u548c\u900f\u89c6\u6295\u5f71\n    var mvpMatrix = new Matrix4();\n    mvpMatrix.setPerspective(30, 1, 1, 100);\n    mvpMatrix.lookAt(3, 3, 7, 0, 0, 0, 0, 1, 0);\n\n    // Pass the model view projection matrix to u_MvpMatrix\n    gl.uniformMatrix4fv(u_MvpMatrix, false, mvpMatrix.elements);\n\n    // Clear color and depth buffer\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n\n    // Draw the cube\n    gl.drawElements(gl.TRIANGLES, n, gl.UNSIGNED_BYTE, 0);\n}\n\nfunction initVertexBuffers(gl) {\n    // Create a cube\n    //    v6----- v5\n    //   /|      /|\n    //  v1------v0|\n    //  | |     | |\n    //  | |v7---|-|v4\n    //  |/      |/\n    //  v2------v3\n    var verticesColors = new Float32Array([\n        // Vertex coordinates and color\n        1.0,1.0,1.0,1.0,1.0,1.0, // v0 White\n        -1.0,1.0,1.0,1.0,0.0,1.0, // v1 Magenta\n        -1.0,-1.0,1.0,1.0,0.0,0.0, // v2 Red\n        1.0,-1.0,1.0,1.0,1.0,0.0, // v3 Yellow\n        1.0,-1.0,-1.0,0.0,1.0,0.0, // v4 Green\n        1.0,1.0,-1.0,0.0,1.0,1.0, // v5 Cyan\n        -1.0,1.0,-1.0,0.0,0.0,1.0, // v6 Blue\n        -1.0,-1.0,-1.0,0.0,0.0,0.0 // v7 Black\n    ]);\n\n    // Indices of the vertices\n    var indices = new Uint8Array([\n        0,1,2,0,2,3, // front\n        0,3,4,0,4,5, // right\n        0,5,6,0,6,1, // up\n        1,6,7,1,7,2, // left\n        7,4,3,7,3,2, // down\n        4,7,6,4,6,5 // back\n    ]);\n\n    // Create a buffer object\n    var vertexColorBuffer = gl.createBuffer();\n    var indexBuffer = gl.createBuffer();\n    if (!vertexColorBuffer || !indexBuffer) {\n        return -1;\n    }\n\n    // Write the vertex coordinates and color to the buffer object\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertexColorBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, verticesColors, gl.STATIC_DRAW);\n\n    var FSIZE = verticesColors.BYTES_PER_ELEMENT;\n    // Assign the buffer object to a_Position and enable the assignment\n    var a_Position = gl.getAttribLocation(gl.program, 'a_Position');\n    if (a_Position < 0) {\n        console.log('Failed to get the storage location of a_Position');\n        return -1;\n    }\n    gl.vertexAttribPointer(a_Position, 3, gl.FLOAT, false, FSIZE * 6, 0);\n    gl.enableVertexAttribArray(a_Position);\n    // Assign the buffer object to a_Color and enable the assignment\n    var a_Color = gl.getAttribLocation(gl.program, 'a_Color');\n    if (a_Color < 0) {\n        console.log('Failed to get the storage location of a_Color');\n        return -1;\n    }\n    gl.vertexAttribPointer(a_Color, 3, gl.FLOAT, false, FSIZE * 6, FSIZE * 3);\n    gl.enableVertexAttribArray(a_Color);\n\n    // Write the indices to the buffer object\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indices, gl.STATIC_DRAW);\n\n    return indices.length;\n}\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"main"),"\u51fd\u6570\u7684\u6d41\u7a0b\u5982\u4e0b:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u9996\u5148\u4f7f\u7528",(0,a.kt)("inlineCode",{parentName:"li"},"initVertexBuffers()"),"\u51fd\u6570\u5c06\u9876\u70b9\u6570\u636e\u5199\u5165\u7f13\u51b2\u533a. "),(0,a.kt)("li",{parentName:"ol"},"\u7136\u540e\u5f00\u542f\u9690\u85cf\u9762\u6d88\u9664, \u4f7fWebGL\u80fd\u591f\u6839\u636e\u7acb\u65b9\u4f53\u5404\u8868\u9762\u7684\u524d\u540e\u5173\u7cfb\u6b63\u786e\u7684\u8fdb\u884c\u7ed8\u5236."),(0,a.kt)("li",{parentName:"ol"},"\u8bbe\u7f6e\u89c6\u70b9\u548c\u53ef\u89c6\u7a7a\u95f4, \u5427\u6a21\u578b\u89c6\u56fe\u6295\u5f71\u77e9\u9635\u4f20\u7ed9\u9876\u70b9\u7740\u8272\u5668\u4e2d\u7684",(0,a.kt)("inlineCode",{parentName:"li"},"u_MvpMatrix"),"\u53d8\u91cf"),(0,a.kt)("li",{parentName:"ol"},"\u6e05\u7a7a\u989c\u8272\u548c\u6df1\u5ea6\u7f13\u51b2\u533a, \u4f7f\u7528",(0,a.kt)("inlineCode",{parentName:"li"},"gl.drawElements"),"\u7ed8\u5236\u7acb\u65b9\u4f53.")),(0,a.kt)("p",null,"\u8fd9\u79cd\u60c5\u51b5\u4e0b, \u6211\u4eec\u65e0\u6cd5\u5c06\u989c\u8272\u5b9a\u4e49\u5728\u7d22\u5f15\u503c\u4e0a, \u989c\u8272\u4ecd\u7136\u662f\u4f9d\u8d56\u4e8e\u9876\u70b9\u7684."),(0,a.kt)("p",null,"\u5982\u679c\u9700\u8981\u521b\u5efa\u6bcf\u4e2a\u8868\u9762\u90fd\u662f\u4e0d\u540c\u989c\u8272\u7684\u6b63\u65b9\u4f53, \u6211\u4eec\u9700\u8981\u5c06\u9876\u70b9\u91cd\u7ed8\u4e09\u6b21. "),(0,a.kt)("h2",{id:"\u591a\u989c\u8272\u7684\u6b63\u65b9\u4f53"},"\u591a\u989c\u8272\u7684\u6b63\u65b9\u4f53"),(0,a.kt)("p",null,"\u672c\u8282\u4e2d\u7684\u4ee3\u7801\u4e0e\u4e0a\u4e00\u8282\u7684\u675f\u8170\u533a\u522b\u5728\u4e8e\u9876\u70b9\u6570\u636e\u5b58\u50a8\u5728\u7f13\u51b2\u533a\u4e2d\u7684\u5f62\u5f0f:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u672c\u8282\u4e2d\u5c06\u9876\u70b9\u5750\u6807\u548c\u989c\u8272\u5206\u522b\u5b58\u50a8\u5728\u4e0d\u540c\u7684\u7f13\u51b2\u533a\u4e2d"),(0,a.kt)("li",{parentName:"ol"},"\u9876\u70b9\u6570\u636e, \u989c\u8272\u6570\u7ec4\u548c\u7d22\u5f15\u6570\u7ec4\u8fdb\u884c\u4e86\u4fee\u6539"),(0,a.kt)("li",{parentName:"ol"},"\u4e3a\u4e86\u7a0b\u5e8f\u7ed3\u6784\u7d27\u51d1, \u5b9a\u4e49\u4e86\u51fd\u6570",(0,a.kt)("inlineCode",{parentName:"li"},"initArrayBuffer()"),", \u5c01\u88c5\u4e86\u7f13\u51b2\u533a\u5bf9\u8c61\u7684\u521b\u5efa, \u7ed1\u5b9a, \u6570\u636e\u5199\u5165\u548c\u5f00\u542f\u7b49\u64cd\u4f5c.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"...\nfunction main() {\n  ...\n  var n = initVertexBuffers(gl);\n  ...\n  gl.drawElements(gl.TRIANGLES, n, gl.UNSIGNED_BYTE, 0);\n}\n\nfunction initVertexBuffers(gl) {\n  // Create a cube\n  //    v6----- v5\n  //   /|      /|\n  //  v1------v0|\n  //  | |     | |\n  //  | |v7---|-|v4\n  //  |/      |/\n  //  v2------v3\n\n  var vertices = new Float32Array([   // Vertex coordinates\n     1.0, 1.0, 1.0,  -1.0, 1.0, 1.0,  -1.0,-1.0, 1.0,   1.0,-1.0, 1.0,  // v0-v1-v2-v3 front\n   ...\n     1.0,-1.0,-1.0,  -1.0,-1.0,-1.0,  -1.0, 1.0,-1.0,   1.0, 1.0,-1.0   // v4-v7-v6-v5 back\n  ]);\n\n  var colors = new Float32Array([     // Colors\n    0.4, 0.4, 1.0,  0.4, 0.4, 1.0,  0.4, 0.4, 1.0,  0.4, 0.4, 1.0,  ...\n    0.4, 1.0, 1.0,  0.4, 1.0, 1.0,  0.4, 1.0, 1.0,  0.4, 1.0, 1.0   // v4-v7-v6-v5 back\n  ]);\n\n  var indices = new Uint8Array([       // Indices of the vertices\n     0, 1, 2,   0, 2, 3,    // front\n     4, 5, 6,   4, 6, 7,    // right\n     8, 9,10,   8,10,11,    // up\n    12,13,14,  12,14,15,    // left\n    16,17,18,  16,18,19,    // down\n    20,21,22,  20,22,23     // back\n  ]);\n\n  // Create a buffer object\n  var indexBuffer = gl.createBuffer();\n  if (!indexBuffer)\n    return -1;\n\n  // Write the vertex coordinates and color to the buffer object\n  if (!initArrayBuffer(gl, vertices, 3, gl.FLOAT, 'a_Position'))\n    return -1;\n\n  if (!initArrayBuffer(gl, colors, 3, gl.FLOAT, 'a_Color'))\n    return -1;\n\n  // Write the indices to the buffer object\n  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\n  gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indices, gl.STATIC_DRAW);\n\n  return indices.length;\n}\n\nfunction initArrayBuffer(gl, data, num, type, attribute) {\n  var buffer = gl.createBuffer();   // Create a buffer object\n  ...\n  // Write date into the buffer object\n  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n  gl.bufferData(gl.ARRAY_BUFFER, data, gl.STATIC_DRAW);\n  // Assign the buffer object to the attribute variable\n  var a_attribute = gl.getAttribLocation(gl.program, attribute);\n ...\n  gl.vertexAttribPointer(a_attribute, num, type, false, 0, 0);\n  // Enable the assignment of the buffer object to the attribute variable\n  gl.enableVertexAttribArray(a_attribute);\n\n  return true;\n}\n")),(0,a.kt)("h2",{id:"\u5e73\u884c\u5149\u4e0b\u7684\u6f2b\u53cd\u5c04"},"\u5e73\u884c\u5149\u4e0b\u7684\u6f2b\u53cd\u5c04"),(0,a.kt)("p",null,'\u4ee5\u4e00\u4e2a\u7acb\u65b9\u4f53\u4e3a\u4f8b\u5c55\u793a\u4e0d\u540c\u6761\u4ef6\u4e0b\u7684\u5149\u7167\u6548\u679c, \u9996\u5148\u8ba1\u7b97\u597d\u6bcf\u4e2a\u5e73\u9762\u7684\u6cd5\u5411\u91cf, \u63a5\u4e0b\u6765\u5c31\u662f\u5c06\u6570\u636e\u4f20\u7ed9\u7740\u8272\u5668\u7a0b\u5e8f. \u4ee5\u524d\u7684\u7a0b\u5e8f\u628a\u989c\u8272\u4f5c\u4e3a"\u9010\u9876\u70b9\u6570\u636e"\u5b58\u50a8\u5728\u7f13\u51b2\u533a\u4e2d, \u5e76\u4f20\u7ed9\u505a\u8272\u5668, \u5bf9\u6cd5\u5411\u91cf\u6570\u636e\u4e5f\u53ef\u4ee5\u8fd9\u6837. '),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// LightedCube.js\n// \u9876\u70b9\u7740\u8272\u5668\nvar VSHADER_SOURCE =\n  'attribute vec4 a_Position;\\n' +\n  'attribute vec4 a_Color;\\n' +\n  'attribute vec4 a_Normal;\\n' +        //\u6cd5\u5411\u91cf\n  'uniform mat4 u_MvpMatrix;\\n' +\n  'uniform vec3 u_LightColor;\\n' +     // \u5149\u7ebf\u989c\u8272\n  'uniform vec3 u_LightDirection;\\n' + // \u5f52\u4e00\u5316\u7684\u4e16\u754c\u5750\u6807\n  'varying vec4 v_Color;\\n' +\n  'void main() {\\n' +\n  '  gl_Position = u_MvpMatrix * a_Position ;\\n' +\n  // \u5bf9\u6cd5\u5411\u91cf\u8fdb\u884c\u5f52\u4e00\u5316\n  '  vec3 normal = normalize(a_Normal.xyz);\\n' +\n  //\u8ba1\u7b97\u5149\u7ebf\u65b9\u5411\u548c\u6cd5\u5411\u91cf\u7684\u70b9\u51fb\n  '  float nDotL = max(dot(u_LightDirection, normal), 0.0);\\n' +\n  // \u8ba1\u7b97\u6f2b\u53cd\u5c04\u5149\u7684\u989c\u8272\n  '  vec3 diffuse = u_LightColor * a_Color.rgb * nDotL;\\n' +\n  '  v_Color = vec4(diffuse, a_Color.a);\\n' +\n  '}\\n';\n...\n\nfunction main() {\n...\n\n  // Initialize shaders\n  if (!initShaders(gl, VSHADER_SOURCE, FSHADER_SOURCE)) {\n    console.log('Failed to intialize shaders.');\n    return;\n  }\n\n  // \u8bbe\u7f6e\u9876\u70b9\u5750\u6807, \u989c\u8272\u548c\u6cd5\u5411\u91cf\n  var n = initVertexBuffers(gl);\n...\n\n  // Get the storage locations of uniform variables and so on\n  var u_MvpMatrix = gl.getUniformLocation(gl.program, 'u_MvpMatrix');\n  var u_LightColor = gl.getUniformLocation(gl.program, 'u_LightColor');\n  var u_LightDirection = gl.getUniformLocation(gl.program, 'u_LightDirection');\n...\n\n  // \u8bbe\u7f6e\u5149\u7ebf\u989c\u8272\u4e3a\u767d\u8272\n  gl.uniform3f(u_LightColor, 1.0, 1.0, 1.0);\n  // \u8bbe\u7f6e\u5149\u7ebf\u65b9\u5411\n  var lightDirection = new Vector3([0.5, 3.0, 4.0]);\n  lightDirection.normalize();     // \u5f52\u4e00\u5316\n  gl.uniform3fv(u_LightDirection, lightDirection.elements);\n\n  // \u8ba1\u7b97\u6a21\u578b\u89c6\u56fe\u6295\u5f71\u77e9\u9635\n  var mvpMatrix = new Matrix4();    // Model view projection matrix\n  mvpMatrix.setPerspective(30, canvas.width/canvas.height, 1, 100);\n  mvpMatrix.lookAt(3, 3, 7, 0, 0, 0, 0, 1, 0);\n  // \u5c06\u6a21\u578b\u89c6\u56fe\u6295\u5f71\u77e9\u9635\u4f20\u7ed9u_MvpMatrix\u53d8\u91cf\n  gl.uniformMatrix4fv(u_MvpMatrix, false, mvpMatrix.elements);\n...\n}\n\nfunction initVertexBuffers(gl) {\n  // Create a cube\n  //    v6----- v5\n  //   /|      /|\n  //  v1------v0|\n  //  | |     | |\n  //  | |v7---|-|v4\n  //  |/      |/\n  //  v2------v3\n  var vertices = new Float32Array([   // \u9876\u70b9\u5750\u6807\n     1.0, 1.0, 1.0,  -1.0, 1.0, 1.0,  -1.0,-1.0, 1.0,   1.0,-1.0, 1.0, // v0-v1-v2-v3 front\n     1.0, 1.0, 1.0,   1.0,-1.0, 1.0,   1.0,-1.0,-1.0,   1.0, 1.0,-1.0, // v0-v3-v4-v5 right\n     1.0, 1.0, 1.0,   1.0, 1.0,-1.0,  -1.0, 1.0,-1.0,  -1.0, 1.0, 1.0, // v0-v5-v6-v1 up\n    -1.0, 1.0, 1.0,  -1.0, 1.0,-1.0,  -1.0,-1.0,-1.0,  -1.0,-1.0, 1.0, // v1-v6-v7-v2 left\n    -1.0,-1.0,-1.0,   1.0,-1.0,-1.0,   1.0,-1.0, 1.0,  -1.0,-1.0, 1.0, // v7-v4-v3-v2 down\n     1.0,-1.0,-1.0,  -1.0,-1.0,-1.0,  -1.0, 1.0,-1.0,   1.0, 1.0,-1.0  // v4-v7-v6-v5 back\n  ]);\n\n...\n\n  var normals = new Float32Array([    // \u6cd5\u5411\u91cf\n    0.0, 0.0, 1.0,   0.0, 0.0, 1.0,   0.0, 0.0, 1.0,   0.0, 0.0, 1.0,  // v0-v1-v2-v3 front\n    1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0,   1.0, 0.0, 0.0,  // v0-v3-v4-v5 right\n    0.0, 1.0, 0.0,   0.0, 1.0, 0.0,   0.0, 1.0, 0.0,   0.0, 1.0, 0.0,  // v0-v5-v6-v1 up\n   -1.0, 0.0, 0.0,  -1.0, 0.0, 0.0,  -1.0, 0.0, 0.0,  -1.0, 0.0, 0.0,  // v1-v6-v7-v2 left\n    0.0,-1.0, 0.0,   0.0,-1.0, 0.0,   0.0,-1.0, 0.0,   0.0,-1.0, 0.0,  // v7-v4-v3-v2 down\n    0.0, 0.0,-1.0,   0.0, 0.0,-1.0,   0.0, 0.0,-1.0,   0.0, 0.0,-1.0   // v4-v7-v6-v5 back\n  ]);\n\n...\n  // Write the vertex property to buffers (coordinates, colors and normals)\n  if (!initArrayBuffer(gl, 'a_Position', vertices, 3, gl.FLOAT)) return -1;\n  if (!initArrayBuffer(gl, 'a_Color', colors, 3, gl.FLOAT)) return -1;\n  if (!initArrayBuffer(gl, 'a_Normal', normals, 3, gl.FLOAT)) return -1;\n\n...\n\n  return indices.length;\n}\n...\n")),(0,a.kt)("p",null,"\u9876\u70b9\u7740\u8272\u5668\u4e2d",(0,a.kt)("inlineCode",{parentName:"p"},"a_Color"),"\u53d8\u91cf\u8868\u793a\u8868\u9762\u57fa\u5e95\u8272, ",(0,a.kt)("inlineCode",{parentName:"p"},"a_Normal"),"\u53d8\u91cf\u8868\u793a\u8868\u9762\u6cd5\u7ebf\u65b9\u5411, ",(0,a.kt)("inlineCode",{parentName:"p"},"u_LightColor"),"\u53d8\u91cf\u8868\u793a\u5165\u5c04\u5149\u989c\u8272, ",(0,a.kt)("inlineCode",{parentName:"p"},"u_LightDirection"),"\u53d8\u91cf\u8868\u793a\u5165\u5c04\u5149\u65b9\u5411. \u6ce8\u610f, \u5165\u5c04\u5149\u65b9\u5411",(0,a.kt)("inlineCode",{parentName:"p"},"u_LightDirection"),"\u662f\u5728\u4e16\u754c\u5750\u6807\u7cfb\u4e0b\u7684, \u800c\u4e14\u5728\u8f6c\u5165\u7740\u8272\u5668\u4e4b\u524d\u5df2\u7ecf\u5728 js \u4e2d\u5f52\u4e00\u5316\u4e86, \u8fd9\u6837\u5c31\u80fd\u907f\u514d\u5728\u9876\u70b9\u7740\u8272\u5668\u6bcf\u6b21\u6267\u884c\u7684\u65f6\u5019\u90fd\u5bf9\u5b83\u8fdb\u884c\u5f52\u4e00\u5316."),(0,a.kt)("p",null,"\u6709\u4e86\u8fd9\u4e9b\u4fe1\u606f, \u5c31\u53ef\u4ee5\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d\u8fdb\u884c\u8ba1\u7b97\u4e86. ",(0,a.kt)("inlineCode",{parentName:"p"},"a_Normal"),"\u53d8\u91cf\u662f vec4 \u7c7b\u578b\u7684, \u4f7f\u7528\u524d\u4e09\u4e2a\u5206\u91cf x,y,z \u8868\u793a\u6cd5\u7ebf\u65b9\u5411, \u6240\u4ee5\u6211\u4eec\u5c06\u8fd9\u4e09\u4e2a\u5206\u91cf\u63d0\u53d6\u51fa\u6765\u8fdb\u884c\u5f52\u4e00\u5316, \u5bf9 vec3 \u7c7b\u578b\u7684\u53d8\u91cf\u8fdb\u884c\u5f52\u4e00\u5316\u5c31\u4e0d\u5fc5\u8fd9\u6837. \u672c\u4f8b\u4f7f\u7528 vec4 \u7c7b\u578b\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"a_Normal"),"\u53d8\u91cf\u662f\u4e3a\u4e86\u65b9\u4fbf\u5bf9\u4e0b\u4e00\u4e2a\u793a\u4f8b\u7a0b\u5e8f\u8fdb\u884c\u6269\u5c55. GLSL ES \u63d0\u4f9b\u4e86\u5185\u7f6e\u51fd\u6570",(0,a.kt)("inlineCode",{parentName:"p"},"normalize()"),"\u5bf9\u77e2\u91cf\u5e38\u51fd\u6570\u8fdb\u884c\u5f52\u4e00\u5316. \u5f52\u4e00\u5316\u7684\u7ed3\u679c\u8d4b\u7ed9 vec3 \u7c7b\u578b\u7684 normal \u53d8\u91cf\u4f9b\u4e4b\u540e\u4f7f\u7528."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-GLSL"},"float nDotL = max(dot(u_LightDirection, normal), 0.0);\n")),(0,a.kt)("p",null,"\u5149\u7ebf\u65b9\u5411\u5b58\u50a8\u5728",(0,a.kt)("inlineCode",{parentName:"p"},"u_lightDirection"),"\u53d8\u91cf\u4e2d, \u800c\u4e14\u5df2\u7ecf\u88ab\u5f52\u4e00\u5316\u4e86, \u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528. \u6cd5\u7ebf\u65b9\u5411\u5b58\u50a8\u5728\u4e4b\u524d\u8fdb\u884c\u5f52\u4e00\u5316\u540e\u7684\u7ed3\u679c normal \u53d8\u91cf\u4e2d. \u4f7f\u7528 GLSL ES \u63d0\u4f9b\u7684\u5185\u7f6e\u51fd\u6570",(0,a.kt)("inlineCode",{parentName:"p"},"dot()"),"\u8ba1\u7b97\u4e24\u4e2a\u77e2\u91cf\u7684\u70b9\u51fb",(0,a.kt)("inlineCode",{parentName:"p"},"<\u5149\u7ebf\u65b9\u5411>\xb7<\u6cd5\u7ebf\u65b9\u5411>"),", \u8be5\u51fd\u6570\u63a5\u53d7\u4e24\u4e2a\u77e2\u91cf\u4f5c\u4e3a\u53c2\u6570, \u8fd4\u56de\u5b83\u4eec\u7684\u70b9\u79ef, \u5982\u679c\u70b9\u79ef\u5927\u4e8e 0, \u90a3\u5c31\u5c06\u70b9\u79ef\u8d4b\u503c\u7ed9",(0,a.kt)("inlineCode",{parentName:"p"},"nDotL"),", \u5982\u679c\u5c0f\u4e8e 0, \u5c31\u76f4\u63a5\u8d4b\u503c 0. \u56e0\u4e3a\u70b9\u79ef\u503c\u5c0f\u4e8e 0 \u610f\u5473\u7740 cos\u03b8 \u5927\u4e8e 90 \u5ea6.\u8bf4\u660e\u5149\u7ebf\u7167\u5c04\u5728\u8868\u9762\u7684\u80cc\u9762\u4e0a, \u56e0\u6b64\u8d4b\u503c 0."),(0,a.kt)("p",null,"a_Color \u53d8\u91cf\u5c31\u662f\u9876\u70b9\u7684\u989c\u8272. \u88ab\u4ece vec4 \u5bf9\u8c61\u8f6c\u6362\u6210\u4e86 vec3 \u5bf9\u8c61, \u56e0\u4e3a\u5176\u7b2c\u56db\u4e2a\u5206\u91cf(\u900f\u660e\u5ea6)\u4e0e\u8ba1\u7b97\u7684\u5f0f\u5b50\u65e0\u5173."),(0,a.kt)("p",null,"\u5b9e\u9645\u4e0a, \u7269\u4f53\u8868\u9762\u7684\u900f\u660e\u5ea6\u786e\u662f\u4f1a\u5f71\u54cd\u7269\u4f53\u7684\u5916\u89c2. \u4f46\u8fd9\u91cc\u7684\u5149\u7167\u8ba1\u7b97\u8f83\u4e3a\u590d\u6742, \u6211\u4eec\u6682\u65f6\u8ba4\u4e3a\u7269\u4f53\u662f\u4e0d\u900f\u660e\u7684, \u8fd9\u6837\u5c31\u8ba1\u7b97\u51fa\u4e86\u6f2b\u53cd\u5c04\u5149\u7684\u989c\u8272",(0,a.kt)("inlineCode",{parentName:"p"},"diffuse"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-GLSL"},"vec3 diffuse = u_LightColor * a_Color.rgb * nDotL;\nv_Color = vec4(diffuse, a_Color.a);\n")),(0,a.kt)("p",null,"\u7136\u540e, \u5c06",(0,a.kt)("inlineCode",{parentName:"p"},"diffuse"),"\u7684\u503c\u8d4b\u7ed9",(0,a.kt)("inlineCode",{parentName:"p"},"v_Color"),"\u5e76\u8865\u4e0a\u7b2c 4 \u5206\u91cf."),(0,a.kt)("p",null,"\u9876\u70b9\u7740\u8272\u5668\u8fd0\u884c\u7684\u7ed3\u679c\u5c31\u662f\u8ba1\u7b97\u51fa\u4e86",(0,a.kt)("inlineCode",{parentName:"p"},"v_Color"),"\u53d8\u91cf. \u4e0b\u9762\u770b\u4e00\u4e0b js \u5982\u4f55\u5c06\u6570\u636e\u4f20\u7ed9\u9876\u70b9\u7740\u8272\u5668\u7684."),(0,a.kt)("p",null,"\u63a5\u4e0b\u6765\u5c31\u662fjs\u7684\u7a0b\u5e8f\u6d41\u7a0b:"),(0,a.kt)("p",null,"js \u5c06\u5149\u7684\u989c\u8272",(0,a.kt)("inlineCode",{parentName:"p"},"u_LightColor"),"\u548c\u65b9\u5411",(0,a.kt)("inlineCode",{parentName:"p"},"u_LightDirection"),"\u4f20\u7ed9\u9876\u70b9\u7740\u8272\u5668. \u9996\u5148\u7528",(0,a.kt)("inlineCode",{parentName:"p"},"gl.uniform3f"),"\u51fd\u6570\u5c06",(0,a.kt)("inlineCode",{parentName:"p"},"u_LightColor"),"\u8d4b\u503c\u4e3a(1.0,1.0,1.0),\u8868\u793a\u5165\u5c04\u5149\u662f\u767d\u5149."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"gl.uniform3f(u_LightColor, 1.0, 1.0, 1.0);\n")),(0,a.kt)("p",null,"\u4e0b\u4e00\u6b65\u662f\u8bbe\u7f6e\u5149\u7ebf\u65b9\u5411, \u6ce8\u610f\u5149\u7ebf\u65b9\u5411\u5fc5\u987b\u88ab\u5f52\u4e00\u5316. cuon-matrix \u4e3a vector3 \u7c7b\u578b\u63d0\u4f9b\u4e86\u5f52\u4e00\u5316\u51fd\u6570,\u4f7f\u7528\u65b9\u6cd5\u5c31\u50cf\u4ee3\u7801\u6240\u5c55\u793a\u7684\u90a3\u6837. \u6ce8\u610f js \u548c GLSL ES \u5bf9\u77e2\u91cf\u5f52\u4e00\u5316\u6709\u4e0d\u540c\u4e4b\u5904."),(0,a.kt)("p",null,"\u5f52\u4e00\u5316\u4e4b\u540e, \u4f7f\u7528",(0,a.kt)("inlineCode",{parentName:"p"},"gl.uniform3fv"),"\u5c06\u5176\u5206\u914d\u7ed9\u7740\u8272\u5668\u4e2d\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"u_LightDirection"),"\u53d8\u91cf, \u6700\u540e\u518d",(0,a.kt)("inlineCode",{parentName:"p"},"initVertexBuffers"),"\u51fd\u6570\u4e2d\u4e3a\u6bcf\u4e2a\u9876\u70b9\u5b9a\u4e49\u6cd5\u5411\u91cf. \u6cd5\u5411\u91cf\u6570\u636e\u5b58\u50a8\u5728 normal \u6570\u7ec4\u4e2d, \u7136\u540e\u88ab",(0,a.kt)("inlineCode",{parentName:"p"},"initArrayBuffer()"),"\u51fd\u6570\u4f20\u7ed9\u4e86\u9876\u70b9\u7740\u8272\u5668\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"a_Normal"),"\u53d8\u91cf."),(0,a.kt)("h2",{id:"\u73af\u5883\u5149\u4e0b\u7684\u6f2b\u53cd\u5c04"},"\u73af\u5883\u5149\u4e0b\u7684\u6f2b\u53cd\u5c04"),(0,a.kt)("p",null,"\u73af\u5883\u5149\u662f\u7531\u5899\u58c1\u7b49\u5176\u4ed6\u7269\u4f53\u53cd\u5c04\u4ea7\u751f\u7684, \u6240\u4ee5\u73af\u5883\u5149\u7684\u5f3a\u5ea6\u901a\u5e38\u6bd4\u8f83\u5f31, \u5047\u8bbe\u73af\u5883\u5149\u662f\u8f83\u5f31\u7684\u767d\u5149(0.2,0.2,0.2), \u800c\u7269\u4f53\u8868\u9762\u662f\u7ea2\u8272\u7684(1.0,0.0,0.0), \u6839\u636e\u5f0f\u5b50, \u6709\u73af\u5883\u5149\u4ea7\u751f\u7684\u53cd\u5c04\u5149\u989c\u8272\u5c31\u662f\u6697\u7ea2\u8272(0.2,0.0,0.0)."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// LightedCube_ambient.js (c) 2012 matsuda\n// Vertex shader program\nvar VSHADER_SOURCE =\n ...\n  'uniform vec3 u_AmbientLight;\\n' +   // Color of an ambient light\n  'varying vec4 v_Color;\\n' +\n  'void main() {\\n' +\n...\n  '  vec3 ambient = u_AmbientLight * a_Color.rgb;\\n' +\n     // Add the surface colors due to diffuse reflection and ambient reflection\n  '  v_Color = vec4(diffuse + ambient, a_Color.a);\\n' +\n  '}\\n';\n\n...\n\nfunction main() {\n ..\n  var u_AmbientLight = gl.getUniformLocation(gl.program, 'u_AmbientLight');\n ...\n  gl.uniform3f(u_AmbientLight, 0.2, 0.2, 0.2);\n\n ...\n}\n\n...\n")),(0,a.kt)("p",null,"\u8fd9\u4e2a\u793a\u4f8b\u7a0b\u5e8f\u76f8\u6bd4\u8f83\u4e0a\u4e00\u4e2a\u800c\u8a00, \u53ea\u4fee\u6539\u4e86\u5173\u952e\u7684\u51e0\u5904\u4ee3\u7801."),(0,a.kt)("p",null,"\u9876\u70b9\u7740\u8272\u5668\u4e2d\u65b0\u589e\u4e86",(0,a.kt)("inlineCode",{parentName:"p"},"u_AmbientLight"),"\u53d8\u91cf\u7528\u6765\u63a5\u53d7\u73af\u5883\u5149\u7684\u989c\u8272\u503c. \u63a5\u7740\u6839\u636e\u5f0f\u5b50, \u4f7f\u7528\u8be5\u53d8\u91cf\u548c\u8868\u9762\u7684\u57fa\u5e95\u8272",(0,a.kt)("inlineCode",{parentName:"p"},"a_Color"),"\u8ba1\u7b97\u51fa\u53cd\u5c04\u5149\u7684\u989c\u8272, \u5c06\u5176\u5b58\u50a8\u5728",(0,a.kt)("inlineCode",{parentName:"p"},"ambient"),"\u53d8\u91cf\u4e2d. \u8fd9\u6837\u6211\u4eec\u5c31\u6709\u73af\u5883\u53cd\u5c04\u4ea7\u751f\u7684\u989c\u8272",(0,a.kt)("inlineCode",{parentName:"p"},"ambient"),"\u548c\u5e73\u884c\u5149\u6f2b\u53cd\u5c04\u4ea7\u751f\u7684\u989c\u8272",(0,a.kt)("inlineCode",{parentName:"p"},"diffuse"),". \u6700\u540e\u6839\u636e\u5f0f\u5b50\u8fdb\u884c\u8ba1\u7b97."),(0,a.kt)("h2",{id:"\u8fd0\u52a8\u7269\u4f53\u7684\u5149\u7167\u6548\u679c"},"\u8fd0\u52a8\u7269\u4f53\u7684\u5149\u7167\u6548\u679c"),(0,a.kt)("p",null,"\u7acb\u65b9\u4f53\u65cb\u8f6c\u65f6, \u6bcf\u4e2a\u8868\u9762\u7684\u6cd5\u5411\u91cf\u4e5f\u4f1a\u968f\u4e4b\u53d8\u5316. \u4e00\u822c\u89c4\u5f8b\u5982\u4e0b:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5e73\u79fb\u53d8\u6362\u4e0d\u4f1a\u6539\u53d8\u6cd5\u5411\u91cf, \u56e0\u4e3a\u5e73\u79fb\u4e0d\u4f1a\u6539\u53d8\u7269\u4f53\u7684\u65b9\u5411."),(0,a.kt)("li",{parentName:"ul"},"\u65cb\u8f6c\u53d8\u6362\u4f1a\u6539\u53d8\u6cd5\u5411\u91cf"),(0,a.kt)("li",{parentName:"ul"},"\u7f29\u653e\u53d8\u6362\u5bf9\u6cd5\u5411\u91cf\u7684\u5f71\u54cd\u6bd4\u8f83\u590d\u6742, \u5982\u679c\u7f29\u653e\u6bd4\u4f8b\u5728\u6240\u6709\u8f74\u4e0a\u90fd\u4e00\u81f4\u7684\u8bdd, \u6cd5\u5411\u91cf\u4e0d\u4f1a\u53d8\u5316. \u5373\u662f\u7269\u4f53\u5728\u67d0\u4e9b\u8f74\u4e0a\u7684\u7f29\u653e\u6bd4\u4f8b\u5e76\u4e0d\u4e00\u81f4, \u6cd5\u5411\u91cf\u4e5f\u5e76\u4e0d\u4e00\u5b9a\u4f1a\u53d8\u5316.")),(0,a.kt)("h2",{id:"\u70b9\u5149\u6e90\u5149"},"\u70b9\u5149\u6e90\u5149"),(0,a.kt)("p",null,"\u4e0e\u5e73\u884c\u5149\u76f8\u6bd4, \u70b9\u5149\u6e90\u53d1\u51fa\u7684\u5149, \u5728\u4e09\u7ef4\u7a7a\u95f4\u7684\u4e0d\u540c\u4f4d\u7f6e\u4e0a\u5176\u65b9\u5411\u4e5f\u4e0d\u540c. \u6240\u4ee5\u5bf9\u70b9\u5149\u6e90\u5149\u4e0b\u7684\u7269\u4f53\u8fdb\u884c\u7740\u8272\u65f6\u9700\u8981\u5728\u6bcf\u4e2a\u5165\u5c04\u70b9\u8ba1\u7b97\u70b9\u5149\u6e90\u5149\u5728\u8be5\u5904\u7684\u65b9\u5411."),(0,a.kt)("p",null,"\u4e0b\u9762\u6765\u770b\u4e00\u4e2a\u793a\u4f8b\u7a0b\u5e8f:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// PointLightedCube.js (c) 2012 matsuda\n// \u9876\u70b9\u7740\u8272\u5668\u7a0b\u5e8f\nvar VSHADER_SOURCE =\n  'attribute vec4 a_Position;\\n' +\n  ...\n  'uniform mat4 u_ModelMatrix;\\n' +   // \u6a21\u578b\u77e9\u9635\n  'uniform mat4 u_NormalMatrix;\\n' +  // \u7528\u6765\u53d8\u6362\u6cd5\u5411\u91cf\u7684\u77e9\u9635\n  'uniform vec3 u_LightColor;\\n' +    // \u5149\u7684\u989c\u8272\n  'uniform vec3 u_LightPosition;\\n' + // \u5149\u6e90\u4f4d\u7f6e(\u4e16\u754c\u5750\u6807\u7cfb)\n  'uniform vec3 u_AmbientLight;\\n' +  // \u73af\u5883\u5149\u989c\u8272\n  'varying vec4 v_Color;\\n' +\n  'void main() {\\n' +\n  '  gl_Position = u_MvpMatrix * a_Position;\\n' +\n     // \u8ba1\u7b97\u6bd4\u90a3\u6362\u540e\u7684\u6cd5\u5411\u91cf\u5e76\u5f52\u4e00\u5316\n  '  vec3 normal = normalize(vec3(u_NormalMatrix * a_Normal));\\n' +\n  '  vec4 vertexPosition = u_ModelMatrix * a_Position;\\n' +\n  '  vec3 lightDirection = normalize(u_LightPosition - vec3(vertexPosition));\\n' +\n  '  float nDotL = max(dot(lightDirection, normal), 0.0);\\n' +\n  '  vec3 diffuse = u_LightColor * a_Color.rgb * nDotL;\\n' +\n  '  vec3 ambient = u_AmbientLight * a_Color.rgb;\\n' +\n  '  v_Color = vec4(diffuse + ambient, a_Color.a);\\n' +\n  '}\\n';\n\n...\n\nfunction main() {\n ...\n\n  var u_ModelMatrix = gl.getUniformLocation(gl.program, 'u_ModelMatrix');\n ...\n  var u_LightColor = gl.getUniformLocation(gl.program, 'u_LightColor');\n  var u_LightPosition = gl.getUniformLocation(gl.program, 'u_LightPosition');\n...\n\n  //\u8bbe\u7f6e\u5149\u7684\u989c\u8272\n  gl.uniform3f(u_LightColor, 1.0, 1.0, 1.0);\n ...\n\n  var modelMatrix = new Matrix4();  // \u6a21\u578b\u77e9\u9635\n  var mvpMatrix = new Matrix4();\n  var normalMatrix = new Matrix4();\n\n  modelMatrix.setRotate(90, 0, 1, 0);\n  gl.uniformMatrix4fv(u_ModelMatrix, false, modelMatrix.elements);\n\n  ...\n}\n")),(0,a.kt)("p",null,"\u6700\u5173\u952e\u7684\u53d8\u5316\u53d1\u751f\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d. \u9996\u5148\u4f7f\u7528\u6a21\u578b\u77e9\u9635\u53d8\u6362\u9876\u70b9\u5750\u6807, \u83b7\u5f97\u9876\u70b9\u5728\u4e16\u754c\u5750\u6807\u7cfb\u4e2d\u7684\u5750\u6807(\u5373\u53d8\u6362\u540e\u7684\u5750\u6807), \u4ee5\u4fbf\u8ba1\u7b97\u70b9\u5149\u6e90\u5149\u5728\u9876\u70b9\u51fa\u7684\u65b9\u5411. \u70b9\u5149\u6e90\u5411\u56db\u5468\u653e\u5c04\u5149\u7ebf, \u6240\u4ee5\u9876\u70b9\u51fa\u7684\u5149\u7ebf\u65b9\u5411\u662f\u7531\u70b9\u5149\u6e90\u5750\u6807\u51cf\u53bb\u9876\u70b9\u5750\u6807\u800c\u5f97\u5230\u7684\u77e2\u91cf. \u70b9\u5149\u6e90\u5728\u4e16\u754c\u5750\u6807\u7cfb\u4e2d\u7684\u5750\u6807\u5df2\u7ecf\u4f20\u7ed9\u4e86\u7740\u8272\u5668\u4e2d\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"u_LightPosition"),", \u800c\u524d\u9762\u5df2\u7ecf\u7b97\u51fa\u4e86\u9876\u70b9\u5728\u4e16\u754c\u5750\u6807\u7cfb\u4e2d\u7684\u5750\u6807, \u8fd9\u6837\u5c31\u8ba1\u7b97\u51fa\u4e86\u5149\u7ebf\u65b9\u5411\u77e2\u91cf. \u6ce8\u610f\u5f52\u4e00\u5316. \u6700\u540e\u70b9\u79ef\u8fd0\u7b97."),(0,a.kt)("h2",{id:"\u9010\u7247\u5143\u5149\u7167"},"\u9010\u7247\u5143\u5149\u7167"),(0,a.kt)("p",null,"\u8981\u5728\u8868\u9762\u7684\u6bcf\u4e00\u70b9\u4e0a\u8ba1\u7b97\u5149\u7167\u4ea7\u751f\u7684\u989c\u8272, \u4f3c\u4e4e\u65f6\u523b\u4e0d\u53ef\u80fd\u5b8c\u6210\u7684\u4efb\u52a1. \u4f46\u5b9e\u9645\u4e0a, \u6211\u4eec\u53ea\u9700\u8981\u9010\u7247\u5143\u7684\u8fdb\u884c\u8ba1\u7b97. \u7ec8\u4e8e\u4f7f\u7528\u4e0a\u7247\u5143\u7740\u8272\u5668\u4e86."),(0,a.kt)("p",null,"\u5148\u6765\u770b\u793a\u4f8b\u7a0b\u5e8f:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"var VSHADER_SOURCE =\n    'attribute vec4 a_Position;\\n' +\n    //  'attribute vec4 a_Color;\\n' + // Defined constant in main()\n    'attribute vec4 a_Normal;\\n' +\n    'uniform mat4 u_MvpMatrix;\\n' +\n    'uniform mat4 u_ModelMatrix;\\n' + // Model matrix\n    'uniform mat4 u_NormalMatrix;\\n' + // Transformation matrix of the normal\n    'varying vec4 v_Color;\\n' +\n    'varying vec3 v_Normal;\\n' +\n    'varying vec3 v_Position;\\n' +\n    'void main() {\\n' +\n    '  vec4 color = vec4(1.0, 1.0, 1.0, 1.0);\\n' + // Sphere color\n    '  gl_Position = u_MvpMatrix * a_Position;\\n' +\n    // Calculate the vertex position in the world coordinate\n    '  v_Position = vec3(u_ModelMatrix * a_Position);\\n' +\n    '  v_Normal = normalize(vec3(u_NormalMatrix * a_Normal));\\n' +\n    '  v_Color = color;\\n' +\n    '}\\n';\n\n// Fragment shader program\nvar FSHADER_SOURCE =\n    '#ifdef GL_ES\\n' +\n    'precision mediump float;\\n' +\n    '#endif\\n' +\n    'uniform vec3 u_LightColor;\\n' + // Light color\n    'uniform vec3 u_LightPosition;\\n' + // Position of the light source\n    'uniform vec3 u_AmbientLight;\\n' + // Ambient light color\n    'varying vec3 v_Normal;\\n' +\n    'varying vec3 v_Position;\\n' +\n    'varying vec4 v_Color;\\n' +\n    'void main() {\\n' +\n    // Normalize the normal because it is interpolated and not 1.0 in length any more\n    '  vec3 normal = normalize(v_Normal);\\n' +\n    // Calculate the light direction and make it 1.0 in length\n    '  vec3 lightDirection = normalize(u_LightPosition - v_Position);\\n' +\n    // The dot product of the light direction and the normal\n    '  float nDotL = max(dot(lightDirection, normal), 0.0);\\n' +\n    // Calculate the final color from diffuse reflection and ambient reflection\n    '  vec3 diffuse = u_LightColor * v_Color.rgb * nDotL;\\n' +\n    '  vec3 ambient = u_AmbientLight * v_Color.rgb;\\n' +\n    '  gl_FragColor = vec4(diffuse + ambient, v_Color.a);\\n' +\n    '}\\n';\n")),(0,a.kt)("p",null,"\u4e3a\u4e86\u9010\u7247\u5143\u7684\u8ba1\u7b97\u5149\u7167, \u4f60\u9700\u8981\u77e5\u9053:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u7247\u5143\u5728\u4e16\u754c\u5750\u6807\u7cfb\u4e0b\u7684\u5750\u6807"),(0,a.kt)("li",{parentName:"ol"},"\u7247\u5143\u51fa\u8868\u9762\u7684\u6cd5\u5411\u91cf.")),(0,a.kt)("p",null,"\u53ef\u4ee5\u5728\u9876\u70b9\u7740\u8272\u5668\u4e2d, \u5c06\u9876\u70b9\u7684\u4e16\u754c\u5750\u6807\u548c\u6cd5\u5411\u91cf\u4ee5 varying \u53d8\u91cf\u7684\u5f62\u5f0f\u4f20\u5165\u7247\u5143\u7740\u8272\u5668, \u7247\u5143\u7740\u8272\u5668\u4e2d\u7684\u540c\u540d\u53d8\u91cf\u5c31\u5df2\u7ecf\u662f\u5185\u63d2\u540e\u7684\u9010\u7247\u5143\u503c\u4e86."),(0,a.kt)("p",null,"\u9876\u70b9\u7740\u8272\u5668\u4f7f\u7528\u6a21\u578b\u77e9\u9635\u4e58\u4ee5\u9876\u70b9\u5750\u6807\u8ba1\u7b97\u51fa\u9876\u70b9\u7684\u4e16\u754c\u5750\u6807, \u5c06\u5176\u8d4b\u503c\u975e v_Position \u53d8\u91cf. \u7ecf\u8fc7\u5185\u63d2\u8fc7\u7a0b\u540e, \u7247\u5143\u7740\u8272\u5668\u5c31\u83b7\u5f97\u4e86\u9010\u7247\u5143\u7684 v_Position \u53d8\u91cf, \u4e5f\u5c31\u662f\u7247\u5143\u7684\u4e16\u754c\u5750\u6807, \u7c7b\u4f3c\u7684, \u540c\u6837\u7684\u53bb\u83b7\u53d6\u6cd5\u5411\u91cf."),(0,a.kt)("p",null,"\u7247\u5143\u7740\u8272\u5668\u8ba1\u7b97\u5149\u7167\u6548\u679c\u7684\u65b9\u6cd5\u548c\u524d\u9762\u76f8\u540c, \u9996\u5148\u5bf9\u6cd5\u5411\u91cf\u8fdb\u884c\u5f52\u4e00\u5316,\u996d\u540e\u5206\u522b\u8ba1\u7b97\u70b9\u5149\u6e90\u5149\u548c\u73af\u5883\u5149\u4ea7\u751f\u7684\u53cd\u5c04\u5149\u7684\u989c\u8272, \u5e76\u5c06\u4e24\u4e2a\u7ed3\u679c\u52a0\u8d77\u6765, \u8d4b\u503c\u7ed9 gl_FragColor, \u7247\u5143\u5c31\u4f1a\u663e\u793a\u4e3a\u8fd9\u4e2a\u989c\u8272."),(0,a.kt)("p",null,"\u5982\u679c\u573a\u666f\u4e2d\u6709\u8d85\u8fc7\u4e00\u4e2a\u70b9\u5149\u6e90, \u90a3\u4e48\u5c31\u9700\u8981\u5728\u7247\u5143\u7740\u8272\u5668\u4e2d\u8ba1\u7b97\u6bcf\u4e00\u4e2a\u70b9\u5149\u6e90(\u4ee5\u53ca\u73af\u5883\u5149)\u5bf9\u7247\u5143\u7684\u989c\u8272\u8d21\u732e, \u5e76\u5c06\u4ed6\u4eec\u5168\u90e8\u52a0\u8d77\u6765."))}v.isMDXComponent=!0}}]);
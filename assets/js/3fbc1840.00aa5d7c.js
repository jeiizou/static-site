"use strict";(self.webpackChunk_jeiiz_wiki_site=self.webpackChunk_jeiiz_wiki_site||[]).push([[7990],{158:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>m});var a=t(6393);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function p(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o=a.createContext({}),s=function(e){var n=a.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},d=function(e){var n=s(e.components);return a.createElement(o.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},c=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,o=e.parentName,d=p(e,["components","mdxType","originalType","parentName"]),c=s(t),m=r,y=c["".concat(o,".").concat(m)]||c[m]||u[m]||l;return t?a.createElement(y,i(i({ref:n},d),{},{components:t})):a.createElement(y,i({ref:n},d))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,i=new Array(l);i[0]=c;var p={};for(var o in n)hasOwnProperty.call(n,o)&&(p[o]=n[o]);p.originalType=e,p.mdxType="string"==typeof e?e:r,i[1]=p;for(var s=2;s<l;s++)i[s]=t[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}c.displayName="MDXCreateElement"},5411:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>u,frontMatter:()=>l,metadata:()=>p,toc:()=>s});var a=t(9421),r=(t(6393),t(158));const l={},i="TS-\u7c7b\u578b\u7cfb\u7edf",p={unversionedId:"\u524d\u7aef\u57fa\u7840/TypeScript/TS-\u7c7b\u578b\u7cfb\u7edf",id:"\u524d\u7aef\u57fa\u7840/TypeScript/TS-\u7c7b\u578b\u7cfb\u7edf",title:"TS-\u7c7b\u578b\u7cfb\u7edf",description:"\u7c7b\u578b\u4fdd\u62a4",source:"@site/docs/\u524d\u7aef\u57fa\u7840/TypeScript/TS-\u7c7b\u578b\u7cfb\u7edf.md",sourceDirName:"\u524d\u7aef\u57fa\u7840/TypeScript",slug:"/\u524d\u7aef\u57fa\u7840/TypeScript/TS-\u7c7b\u578b\u7cfb\u7edf",permalink:"/static-site/docs/\u524d\u7aef\u57fa\u7840/TypeScript/TS-\u7c7b\u578b\u7cfb\u7edf",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Node-\u8fdb\u7a0b",permalink:"/static-site/docs/\u524d\u7aef\u57fa\u7840/Node/Node-\u8fdb\u7a0b"},next:{title:"TS-\u8bed\u6cd5\u901f\u89c8",permalink:"/static-site/docs/\u524d\u7aef\u57fa\u7840/TypeScript/TS-\u8bed\u6cd5\u901f\u89c8"}},o={},s=[{value:"\u7c7b\u578b\u4fdd\u62a4",id:"\u7c7b\u578b\u4fdd\u62a4",level:2},{value:"\u7c7b\u578b\u4fdd\u62a4\u548c\u533a\u5206\u7c7b\u578b",id:"\u7c7b\u578b\u4fdd\u62a4\u548c\u533a\u5206\u7c7b\u578b",level:3},{value:"<code>in</code>\u8fd0\u7b97\u7b26",id:"in\u8fd0\u7b97\u7b26",level:3},{value:"<code>typeof</code>\u7c7b\u578b\u4fdd\u62a4",id:"typeof\u7c7b\u578b\u4fdd\u62a4",level:3},{value:"<code>instanceof</code>\u7c7b\u578b\u4fdd\u62a4",id:"instanceof\u7c7b\u578b\u4fdd\u62a4",level:3},{value:"\u5b57\u9762\u91cf\u7c7b\u578b\u4fdd\u62a4",id:"\u5b57\u9762\u91cf\u7c7b\u578b\u4fdd\u62a4",level:3},{value:"\u81ea\u5b9a\u4e49\u7c7b\u578b\u4fdd\u62a4",id:"\u81ea\u5b9a\u4e49\u7c7b\u578b\u4fdd\u62a4",level:3},{value:"Null",id:"null",level:2},{value:"\u7c7b\u578b\u522b\u540d",id:"\u7c7b\u578b\u522b\u540d",level:2},{value:"\u63a5\u53e3\u548c\u7c7b\u578b\u522b\u540d",id:"\u63a5\u53e3\u548c\u7c7b\u578b\u522b\u540d",level:3},{value:"\u591a\u6001<code>this</code>\u7c7b\u578b",id:"\u591a\u6001this\u7c7b\u578b",level:2},{value:"\u7d22\u5f15\u7c7b\u578b",id:"\u7d22\u5f15\u7c7b\u578b",level:2},{value:"\u7d22\u5f15\u7c7b\u578b\u548c\u7d22\u5f15\u7b7e\u540d",id:"\u7d22\u5f15\u7c7b\u578b\u548c\u7d22\u5f15\u7b7e\u540d",level:2},{value:"\u7c7b\u578b\u6620\u5c04",id:"\u7c7b\u578b\u6620\u5c04",level:2},{value:"\u7531\u6620\u5c04\u7c7b\u578b\u8fdb\u884c\u63a8\u65ad",id:"\u7531\u6620\u5c04\u7c7b\u578b\u8fdb\u884c\u63a8\u65ad",level:3},{value:"\u9884\u5b9a\u4e49\u7684\u6709\u6761\u4ef6\u7c7b\u578b",id:"\u9884\u5b9a\u4e49\u7684\u6709\u6761\u4ef6\u7c7b\u578b",level:3},{value:"\u6761\u4ef6\u7c7b\u578b",id:"\u6761\u4ef6\u7c7b\u578b",level:2},{value:"\u5206\u5e03\u6761\u4ef6\u7c7b\u578b",id:"\u5206\u5e03\u6761\u4ef6\u7c7b\u578b",level:3},{value:"\u6761\u4ef6\u7c7b\u578b\u4e2d\u7684\u7c7b\u578b\u63a8\u65ad",id:"\u6761\u4ef6\u7c7b\u578b\u4e2d\u7684\u7c7b\u578b\u63a8\u65ad",level:3},{value:"\u5b9e\u7528\u7684\u7c7b\u578b\u51fd\u6570",id:"\u5b9e\u7528\u7684\u7c7b\u578b\u51fd\u6570",level:2},{value:"<code>Partial&lt;Type&gt;</code>",id:"partialtype",level:3},{value:"<code>Readonly&lt;Type&gt;</code>",id:"readonlytype",level:3},{value:"<code>Record&lt;Keys,Type&gt;</code>",id:"recordkeystype",level:3},{value:"<code>Pick&lt;Type, Keys&gt;</code>",id:"picktype-keys",level:3},{value:"<code>Omit&lt;Type, Keys&gt;</code>",id:"omittype-keys",level:3},{value:"<code>Exclude&lt;Type, ExcludedUnion&gt;</code>",id:"excludetype-excludedunion",level:3},{value:"<code>Extract&lt;Type, Union&gt;</code>",id:"extracttype-union",level:3},{value:"<code>NonNullable&lt;Type&gt;</code>",id:"nonnullabletype",level:3},{value:"<code>Parameters&lt;Type&gt;</code>",id:"parameterstype",level:3},{value:"<code>ConstructorParameters&lt;Type&gt;</code>",id:"constructorparameterstype",level:3},{value:"<code>ReturnType&lt;Type&gt;</code>",id:"returntypetype",level:3},{value:"<code>InstanceType&lt;Type&gt;</code>",id:"instancetypetype",level:3},{value:"<code>Required&lt;Type&gt;</code>",id:"requiredtype",level:3},{value:"<code>ThisParameterType&lt;Type&gt;</code>",id:"thisparametertypetype",level:3},{value:"<code>OmitThisParameter&lt;Type&gt;</code>",id:"omitthisparametertype",level:3},{value:"<code>ThisType&lt;Type&gt;</code>",id:"thistypetype",level:3},{value:"\u6cdb\u578b\u7684\u5e94\u7528",id:"\u6cdb\u578b\u7684\u5e94\u7528",level:2},{value:"\u81ea\u52a8\u68c0\u67e5\u7ed3\u6784",id:"\u81ea\u52a8\u68c0\u67e5\u7ed3\u6784",level:3},{value:"\u6cdb\u578b\u7c7b",id:"\u6cdb\u578b\u7c7b",level:3},{value:"\u53ef\u53d8\u53c2\u6570\u5143\u7ec4(Variadic Tuples)",id:"\u53ef\u53d8\u53c2\u6570\u5143\u7ec4variadic-tuples",level:3},{value:"\u53c2\u8003",id:"\u53c2\u8003",level:2}],d={toc:s};function u(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"ts-\u7c7b\u578b\u7cfb\u7edf"},"TS-\u7c7b\u578b\u7cfb\u7edf"),(0,r.kt)("h2",{id:"\u7c7b\u578b\u4fdd\u62a4"},"\u7c7b\u578b\u4fdd\u62a4"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"interface Bird {\n    fly();\n    layEggs();\n}\n\ninterface Fish {\n    swim();\n    layEggs();\n}\n\nfunction getSmallPet(): Fish | Bird {\n    // ...\n}\n\nlet pet = getSmallPet();\npet.layEggs(); // okay\npet.swim();    // errors\n")),(0,r.kt)("p",null,"\u5047\u5b9a\u6211\u4eec\u786e\u5b9e\u9700\u8981\u8bbf\u95ee",(0,r.kt)("inlineCode",{parentName:"p"},"swim"),"\u65b9\u6cd5, \u6211\u4eec\u8be5\u5982\u4f55\u4fee\u6539\u5462?"),(0,r.kt)("h3",{id:"\u7c7b\u578b\u4fdd\u62a4\u548c\u533a\u5206\u7c7b\u578b"},"\u7c7b\u578b\u4fdd\u62a4\u548c\u533a\u5206\u7c7b\u578b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"let pet = getSmallPet();\n\n// \u6bcf\u4e00\u4e2a\u6210\u5458\u8bbf\u95ee\u90fd\u4f1a\u62a5\u9519\nif (pet.swim) {\n    pet.swim();\n}\nelse if (pet.fly) {\n    pet.fly();\n}\n")),(0,r.kt)("p",null,"\u4e3a\u4e86\u8fd9\u6bb5\u4ee3\u7801\u6b63\u5e38\u5de5\u4f5c, \u6211\u4eec\u53ef\u80fd\u9700\u8981\u4f7f\u7528\u7c7b\u578b\u65ad\u8a00:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"let pet = getSmallPet();\nlet fishPet = pet as Fish;\nlet birdPet = pet as Bird;\n\nif (fishPet.swim) {\n  fishPet.swim();\n} else if (birdPet.fly) {\n  birdPet.fly();\n}\n")),(0,r.kt)("p",null,"\u4f46\u662f\u8fd9\u6837\u7684\u4ee3\u7801\u5c31\u6bd4\u8f83\u4e11\u964b\u4e86. \u56e0\u6b64, \u4f7f\u7528\u7c7b\u578b\u4fdd\u62a4(Type Guards)\u5c31\u662f\u6bd4\u8f83\u597d\u7684\u65b9\u5f0f. \u5176\u4e2d\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"pet is Fish"),"\u88ab\u79f0\u4e3a\u7c7b\u578b\u8c13\u8bcd(Type predicate)"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"function isFish(pet: Fish | Bird): pet is Fish {\n  return (pet as Fish).swim !== undefined;\n}\n")),(0,r.kt)("p",null,"\u5bf9\u4e8e\u7c7b\u578b\u8c13\u8bcd, \u5f62\u5f0f\u5982",(0,r.kt)("inlineCode",{parentName:"p"},"parameterName is Type"),", \u5176\u4e2d\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"parameterName"),"\u5fc5\u987b\u662f\u5f53\u524d\u51fd\u6570\u7b7e\u540d\u4e2d\u53c2\u6570\u7684\u540d\u79f0."),(0,r.kt)("p",null,"\u4efb\u4f55\u65f6\u5019",(0,r.kt)("inlineCode",{parentName:"p"},"isFish"),"\u4f7f\u7528\u67d0\u4e2a\u53d8\u91cf\u8c03\u7528\u65f6, \u5982\u679c\u539f\u59cb\u7c7b\u578b\u517c\u5bb9, ts\u5c31\u4f1a\u5c06\u8be5\u53d8\u91cf\u7f29\u5c0f\u4e3a\u7279\u5b9a\u7c7b\u578b. "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"// Both calls to 'swim' and 'fly' are now okay.\nlet pet = getSmallPet();\n\nif (isFish(pet)) {\n  pet.swim();\n} else {\n  pet.fly();\n}\n")),(0,r.kt)("p",null,"\u6ce8\u610f\u5728\u8fd9\u91cc, ts\u4e0d\u4ec5\u77e5\u9053",(0,r.kt)("inlineCode",{parentName:"p"},"if"),"\u5206\u652f\u4e2d\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"pet"),"\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"Fish"),"\u7c7b\u578b, \u5b83\u540c\u65f6\u4e5f\u77e5\u9053",(0,r.kt)("inlineCode",{parentName:"p"},"else"),"\u5206\u652f\u4e2d\u4e00\u5b9a\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"Bird"),"\u7c7b\u578b."),(0,r.kt)("h3",{id:"in\u8fd0\u7b97\u7b26"},(0,r.kt)("inlineCode",{parentName:"h3"},"in"),"\u8fd0\u7b97\u7b26"),(0,r.kt)("p",null,"\u4f7f\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"in"),"\u64cd\u4f5c\u7b26\u4e5f\u53ef\u4ee5\u8fdb\u884c\u7c7b\u578b\u6536\u7f29."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'function move(pet: Fish | Bird) {\n  if ("swim" in pet) {\n    return pet.swim();\n  }\n  return pet.fly();\n}\n')),(0,r.kt)("h3",{id:"typeof\u7c7b\u578b\u4fdd\u62a4"},(0,r.kt)("inlineCode",{parentName:"h3"},"typeof"),"\u7c7b\u578b\u4fdd\u62a4"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'function isNumber(x: any): x is number {\n    return typeof x === "number";\n}\n\nfunction isString(x: any): x is string {\n    return typeof x === "string";\n}\n\nfunction padLeft(value: string, padding: string | number) {\n    if (isNumber(padding)) {\n        return Array(padding + 1).join(" ") + value;\n    }\n    if (isString(padding)) {\n        return padding + value;\n    }\n    throw new Error(`Expected string or number, got \'${padding}\'.`);\n}\n')),(0,r.kt)("p",null,"\u4e0d\u8fc7\u8fd9\u6837\u7684\u5199\u6cd5\u975e\u5e38\u4e0d\u8212\u670d, ts\u5185\u7f6e\u8bc6\u522b\u8fd9\u6837\u7684\u539f\u59cb\u7c7b\u578b\u7c7b\u578b\u5224\u65ad:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'function padLeft(value: string, padding: string | number) {\n    if (typeof padding === "number") {\n        return Array(padding + 1).join(" ") + value;\n    }\n    if (typeof padding === "string") {\n        return padding + value;\n    }\n    throw new Error(`Expected string or number, got \'${padding}\'.`);\n}\n')),(0,r.kt)("p",null,"\u4e0d\u8fc7\u8fd9\u6837\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"typeof"),"\u7c7b\u578b\u4fdd\u62a4\u53ea\u6709\u4e24\u79cd\u5f62\u5f0f\u80fd\u591f\u88ab\u8bc6\u522b: ",(0,r.kt)("inlineCode",{parentName:"p"},'typeof v === "typename"'),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},'typeof v !== "typename"'),". "),(0,r.kt)("h3",{id:"instanceof\u7c7b\u578b\u4fdd\u62a4"},(0,r.kt)("inlineCode",{parentName:"h3"},"instanceof"),"\u7c7b\u578b\u4fdd\u62a4"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"interface Padder {\n    getPaddingString(): string\n}\n\nclass SpaceRepeatingPadder implements Padder {\n    constructor(private numSpaces: number) { }\n    getPaddingString() {\n        return Array(this.numSpaces + 1).join(\" \");\n    }\n}\n\nclass StringPadder implements Padder {\n    constructor(private value: string) { }\n    getPaddingString() {\n        return this.value;\n    }\n}\n\nfunction getRandomPadder() {\n    return Math.random() < 0.5 ?\n        new SpaceRepeatingPadder(4) :\n        new StringPadder(\"  \");\n}\n\n// \u7c7b\u578b\u4e3aSpaceRepeatingPadder | StringPadder\nlet padder: Padder = getRandomPadder();\n\nif (padder instanceof SpaceRepeatingPadder) {\n    padder; // \u7c7b\u578b\u7ec6\u5316\u4e3a'SpaceRepeatingPadder'\n}\nif (padder instanceof StringPadder) {\n    padder; // \u7c7b\u578b\u7ec6\u5316\u4e3a'StringPadder'\n}\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"instanceof"),"\u8981\u6c42\u53f3\u8fb9\u662f\u6784\u9020\u51fd\u6570, \u5e76\u4e14\u4f1a\u628a\u7c7b\u578b\u8303\u56f4\u6309\u7167\u4e0b\u9762\u7684\u987a\u5e8f\u8fdb\u884c\u7f29\u5c0f:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u8be5\u7c7b\u578b\u4e0d\u4e3aany\u5219\u4e3a\u51fd\u6570",(0,r.kt)("inlineCode",{parentName:"li"},"prototype"),"\u7684\u7c7b\u578b"),(0,r.kt)("li",{parentName:"ol"},"\u8be5\u7c7b\u578b\u7684\u6784\u9020\u7b7e\u540d\u8fd4\u56de\u7684\u7c7b\u578b\u7684\u5e76\u96c6")),(0,r.kt)("h3",{id:"\u5b57\u9762\u91cf\u7c7b\u578b\u4fdd\u62a4"},"\u5b57\u9762\u91cf\u7c7b\u578b\u4fdd\u62a4"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type Foo = {\n  kind: 'foo'; // \u5b57\u9762\u91cf\u7c7b\u578b\n  foo: number;\n};\n\ntype Bar = {\n  kind: 'bar'; // \u5b57\u9762\u91cf\u7c7b\u578b\n  bar: number;\n};\n\nfunction doStuff(arg: Foo | Bar) {\n  if (arg.kind === 'foo') {\n    console.log(arg.foo); // ok\n    console.log(arg.bar); // Error\n  } else {\n    // \u4e00\u5b9a\u662f Bar\n    console.log(arg.foo); // Error\n    console.log(arg.bar); // ok\n  }\n}\n")),(0,r.kt)("h3",{id:"\u81ea\u5b9a\u4e49\u7c7b\u578b\u4fdd\u62a4"},"\u81ea\u5b9a\u4e49\u7c7b\u578b\u4fdd\u62a4"),(0,r.kt)("p",null,"js\u6ca1\u6709\u5185\u7f6e\u7684\u8fd0\u884c\u65f6\u7684\u81ea\u6211\u68c0\u67e5\u673a\u5236. \u6240\u4ee5\u53ef\u4ee5\u81ea\u5efa\u4e00\u4e2a\u7c7b\u578b\u4fdd\u62a4\u51fd\u6570:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"// \u4ec5\u4ec5\u662f\u4e00\u4e2a interface\ninterface Foo {\n  foo: number;\n  common: string;\n}\n\ninterface Bar {\n  bar: number;\n  common: string;\n}\n\n// \u7528\u6237\u81ea\u5df1\u5b9a\u4e49\u7684\u7c7b\u578b\u4fdd\u62a4\uff01\nfunction isFoo(arg: Foo | Bar): arg is Foo {\n  return (arg as Foo).foo !== undefined;\n}\n\n// \u7528\u6237\u81ea\u5df1\u5b9a\u4e49\u7684\u7c7b\u578b\u4fdd\u62a4\u4f7f\u7528\u7528\u4f8b\uff1a\nfunction doStuff(arg: Foo | Bar) {\n  if (isFoo(arg)) {\n    console.log(arg.foo); // ok\n    console.log(arg.bar); // Error\n  } else {\n    console.log(arg.foo); // Error\n    console.log(arg.bar); // ok\n  }\n}\n\ndoStuff({ foo: 123, common: '123' });\ndoStuff({ bar: 123, common: '123' });\n")),(0,r.kt)("h2",{id:"null"},"Null"),(0,r.kt)("p",null,"\u5728ts\u4e2d, null\u548cundefined\u4f1a\u88ab\u533a\u522b\u5bf9\u5f85"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"let exampleString = \"foo\";\nexampleString = null;\n// Type 'null' is not assignable to type 'string'.\n\nlet stringOrNull: string | null = \"bar\";\nstringOrNull = null;\n\nstringOrNull = undefined;\n// Type 'undefined' is not assignable to type 'string | null'.\n")),(0,r.kt)("h2",{id:"\u7c7b\u578b\u522b\u540d"},"\u7c7b\u578b\u522b\u540d"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type Second = number;\n\nlet timeInSecond: number = 10;\nlet time: Second = 10;\n")),(0,r.kt)("p",null,"\u8fd9\u91cc\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"timeInSecond"),"\u4e0d\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7c7b\u578b. \u540c\u65f6\u8fd9\u6837\u7684\u522b\u540d\u4e5f\u53ef\u4ee5\u5728\u6cdb\u578b\u4e2d\u4f7f\u7528"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type Container<T> = { value: T };\n")),(0,r.kt)("p",null,"\u4e5f\u53ef\u4ee5\u4f7f\u7528\u7c7b\u578b\u522b\u540d\u6765\u5728\u5c5e\u6027\u91cc\u9762\u5f15\u7528\u81ea\u8eab"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type Tree<T> = {\n    value: T;\n    left: Tree<T>;\n    right: Tree<T>;\n}\n")),(0,r.kt)("p",null,"\u4e0e\u4ea4\u53c9\u7c7b\u578b\u4e00\u8d77\u4f7f\u7528, \u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u51fa\u4e00\u4e9b\u975e\u5e38\u5947\u602a\u7684\u7c7b\u578b:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type LinkedList<Type> = Type & { next: LinkedList<Type> };\n\ninterface Person {\n  name: string;\n}\n\nlet people = getDriversLicenseQueue();\npeople.name;\npeople.next.name;\npeople.next.next.name;\npeople.next.next.next.name;\n//                  ^ = (property) next: LinkedList\n")),(0,r.kt)("p",null,"\u4f46\u662f\u7c7b\u578b\u522b\u540d\u4e0d\u80fd\u51fa\u73b0\u5728\u58f0\u660e\u7684\u53f3\u8fb9: "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type Yikes = Array<Yikes>; // error\n")),(0,r.kt)("h3",{id:"\u63a5\u53e3\u548c\u7c7b\u578b\u522b\u540d"},"\u63a5\u53e3\u548c\u7c7b\u578b\u522b\u540d"),(0,r.kt)("p",null,"\u63a5\u53e3\u548c\u7c7b\u578b\u662f\u76f8\u4f3c\u7684. \u63a5\u53e3\u7684\u51e0\u4e4e\u6709\u6240\u80fd\u529b\u90fd\u53ef\u4ee5\u5728\u7c7b\u578b\u4e2d\u4f7f\u7528, \u5176\u6700\u5173\u952e\u7684\u533a\u522b\u5728\u4e8e: \u7c7b\u578b\u662f\u65e0\u6cd5\u6dfb\u52a0\u65b0\u5c5e\u6027\u7684, \u800c\u63a5\u53e3\u662f\u59cb\u7ec8\u53ef\u4ee5\u6269\u5c55\u7684. \u5e76\u4e14\u63a5\u53e3\u662f\u53ef\u4ee5\u7ee7\u627f\u7684."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'// interface\ninterface Animal {\n  name: string\n}\n\ninterface Bear extends Animal {\n  honey: boolean\n}\n\nconst bear = getBear() \nbear.name\nbear.honey\n\n// type\ntype Animal = {\n  name: string\n}\n\ntype Bear = Animal & { \n  honey: Boolean \n}\n\nconst bear = getBear();\nbear.name;\nbear.honey;\n\n// interface\ninterface Window {\n  title: string\n}\n\ninterface Window {\n  ts: import("typescript")\n}\n\nconst src = \'const a = "Hello World"\';\nwindow.ts.transpileModule(src, {});\n\n// type\ntype Window = {\n  title: string\n}\n\ntype Window = {\n  ts: import("typescript")\n}\n\n// Error: \u91cd\u590d\u5b9a\u4e49\n')),(0,r.kt)("h2",{id:"\u591a\u6001this\u7c7b\u578b"},"\u591a\u6001",(0,r.kt)("inlineCode",{parentName:"h2"},"this"),"\u7c7b\u578b"),(0,r.kt)("p",null,"\u591a\u6001",(0,r.kt)("inlineCode",{parentName:"p"},"this"),"\u7c7b\u578b\u8868\u793a\u6240\u5305\u542b\u7684\u7c7b\u6216\u63a5\u53e3\u7684\u5b50\u7c7b\u578b"),(0,r.kt)("p",null,"\u8fd9\u91cc\u662f\u4e00\u4e2a",(0,r.kt)("inlineCode",{parentName:"p"},"F-bounded"),"\u7684\u591a\u6001\u7c7b\u578b:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"class BasicCalculator {\n  public constructor(protected value: number = 0) {}\n  public currentValue(): number {\n    return this.value;\n  }\n  public add(operand: number): this {\n    this.value += operand;\n    return this;\n  }\n  public multiply(operand: number): this {\n    this.value *= operand;\n    return this;\n  }\n  // ... other operations go here ...\n}\n\nlet v = new BasicCalculator(2).multiply(5).add(1).currentValue();\n")),(0,r.kt)("p",null,"\u8fd9\u79cd\u94fe\u5f0f\u8c03\u7528\u7684\u63a5\u53e3\u66f4\u5bb9\u6613\u8868\u8fbe\u903b\u8f91"),(0,r.kt)("h2",{id:"\u7d22\u5f15\u7c7b\u578b"},"\u7d22\u5f15\u7c7b\u578b"),(0,r.kt)("p",null,"\u5728js\u4e2d, \u6bd4\u5982\u6211\u4eec\u8981\u9009\u62e9\u4e00\u4e2a\u5bf9\u8c61\u4e2d\u7684\u67d0\u4e9b\u5c5e\u6027, \u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u5b9e\u73b0:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"function pluck(o, propertyNames) {\n  return propertyNames.map((n) => o[n]);\n}\n")),(0,r.kt)("p",null,"\u5728js\u4e2d, \u6211\u4eec\u53ef\u4ee5\u501f\u52a9\u7d22\u5f15\u7c7b\u578b\u6765\u5b9e\u73b0\u7c7b\u4f3c\u64cd\u4f5c:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'function pluck<T, K extends keyof T>(o: T, propertyNames: K[]): T[K][] {\n  return propertyNames.map((n) => o[n]);\n}\n\ninterface Car {\n  manufacturer: string;\n  model: string;\n  year: number;\n}\n\nlet taxi: Car = {\n  manufacturer: "Toyota",\n  model: "Camry",\n  year: 2014,\n};\n\n// Manufacturer and model are both of type string,\n// so we can pluck them both into a typed string array\nlet makeAndModel: string[] = pluck(taxi, ["manufacturer", "model"]);\n\n// If we try to pluck model and year, we get an\n// array of a union type: (string | number)[]\nlet modelYear = pluck(taxi, ["model", "year"]);\n')),(0,r.kt)("p",null,"\u5176\u4e2d\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"keyof T"),"\u662fT\u7684\u6240\u6709\u516c\u5171\u5c5e\u6027\u7684\u5e76\u96c6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'let carProps: keyof Car;\n//         ^ = let carProps: "manufacturer" | "model" | "year"\n')),(0,r.kt)("h2",{id:"\u7d22\u5f15\u7c7b\u578b\u548c\u7d22\u5f15\u7b7e\u540d"},"\u7d22\u5f15\u7c7b\u578b\u548c\u7d22\u5f15\u7b7e\u540d"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'interface Dictionary<T> {\n  [key: string]: T;\n}\nlet keys: keyof Dictionary<number>;\n//     ^ = let keys: string | number\nlet value: Dictionary<number>["foo"];\n//      ^ = let value: number\n')),(0,r.kt)("p",null,"\u5982\u679c\u7c7b\u578b\u4e2d\u5e26\u6709\u6570\u5b57\u7d22\u5f15\u7684\u7b7e\u540d, \u5219",(0,r.kt)("inlineCode",{parentName:"p"},"keyof T"),"\u5219\u4f1a\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"number"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"interface Dictionary<T> {\n  [key: number]: T;\n}\n\nlet keys: keyof Dictionary<number>;\n//     ^ = let keys: number\nlet numberValue: Dictionary<number>[42];\n//     ^ = let numberValue: number\nlet value: Dictionary<number>[\"foo\"];\n// Property 'foo' does not exist on type 'Dictionary<number>'.\n")),(0,r.kt)("h2",{id:"\u7c7b\u578b\u6620\u5c04"},"\u7c7b\u578b\u6620\u5c04"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"// \u628a\u7c7b\u578b\u4e2d\u7684\u5c5e\u6027\u53d8\u4e3a\u53ef\u9009\ntype Partial<T> = {\n  [P in keyof T]?: T[P];\n};\n\n// \u628a\u7c7b\u578b\u4e2d\u7684\u5c5e\u6027\u53d8\u4e3a\u53ea\u8bfb\ntype Readonly<T> = {\n  readonly [P in keyof T]: T[P];\n};\n")),(0,r.kt)("p",null,"\u4f7f\u7528\u793a\u4f8b\u5982\u4e0b:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"// Use this:\ntype PartialWithNewMember<T> = {\n  [P in keyof T]?: T[P];\n} & { newMember: boolean }\n\n// This is an error!\ntype WrongPartialWithNewMember<T> = {\n    [P in keyof T]?: T[P];\n    newMember: boolean;\n    //   'boolean' only refers to a type, but is being used as a value here.\n    // '}' expected.\n}\n// Declaration or statement expected.\n")),(0,r.kt)("p",null,"\u518d\u6bd4\u5982:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type Nullable<T> = { [P in keyof T]: T[P] | null };\n")),(0,r.kt)("p",null,"\u53ef\u4ee5\u628a\u4e00\u4e2a\u7c7b\u578b\u8f6c\u6362\u4e3a\u53ef\u4e3anull\u7684\u7c7b\u578b"),(0,r.kt)("p",null,"\u8fd9\u4e9b\u793a\u4f8b\u4e2d, \u90fd\u662f\u628a\u5c5e\u6027\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"keyof T"),", \u8f6c\u6362\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"T[P]"),". \u5bf9\u4e8e\u6620\u5c04\u7c7b\u578b\u7684\u4efb\u4f55\u5e38\u89c4\u4f7f\u7528, \u8fd9\u90fd\u662f\u5f88\u597d\u7684\u6a21\u677f. \u5e76\u4e14\u8fd9\u79cd\u8f6c\u6362\u662f'\u540c\u6001'\u7684."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Readonly<T>"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"Partial<T>"),"\u90fd\u975e\u5e38\u6709\u7528\uff0c\u56e0\u6b64\u5b83\u4eec\u4e0e",(0,r.kt)("inlineCode",{parentName:"p"},"Pick"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"Record"),"\u4e00\u540c\u88ab\u5305\u542b\u8fdb\u4e86TypeScript\u7684\u6807\u51c6\u5e93"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type Pick<T, K extends keyof T> = {\n  [P in K]: T[P];\n};\n\ntype Record<K extends keyof any, T> = {\n  [P in K]: T;\n};\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Readonly"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"Partial"),"\u548c",(0,r.kt)("inlineCode",{parentName:"p"},"Pick"),"\u662f\u540c\u6001\u7684, \u4f46\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"Record"),"\u4e0d\u662f\u7684."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type ThreeStringProps = Record<'prop1' | 'prop2' | 'prop3', string>\n")),(0,r.kt)("p",null,"\u975e\u540c\u6001\u672c\u8d28\u4e0a\u4f1a\u521b\u5efa\u65b0\u7684\u5c5e\u6027, \u56e0\u6b64\u5b83\u4eec\u4e0d\u4f1a\u4ece\u5b83\u5904\u62f7\u8d1d\u5c5e\u6027\u4fee\u9970\u7b26"),(0,r.kt)("h3",{id:"\u7531\u6620\u5c04\u7c7b\u578b\u8fdb\u884c\u63a8\u65ad"},"\u7531\u6620\u5c04\u7c7b\u578b\u8fdb\u884c\u63a8\u65ad"),(0,r.kt)("p",null,"\u73b0\u5728\u6211\u4eec\u77e5\u9053\u5982\u4f55\u5305\u88c5\u4e00\u4e2a\u7c7b\u578b\u7684\u5c5e\u6027, \u90a3\u4e48\u8fdb\u884c\u62c6\u5305\u4e5f\u5c31\u975e\u5e38\u5bb9\u6613\u4e86. "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"function unproxify<T>(t: Proxify<T>): T {\n    let result = {} as T;\n    for (const k in t) {\n        result[k] = t[k].get();\n    }\n    return result;\n}\n\nlet originalProps = unproxify(proxyProps);\n")),(0,r.kt)("p",null,"\u62c6\u5305\u7684\u63a8\u7b97\u53ea\u80fd\u9002\u7528\u4e8e'\u540c\u6001'\u7684\u6620\u5c04\u7c7b\u578b. \u5982\u679c\u6620\u5c04\u7c7b\u578b\u4e0d\u662f\u540c\u6001\u7684, \u90a3\u4e48\u9700\u8981\u7ed9\u62c6\u5305\u4e00\u4e2a\u660e\u786e\u7684\u7c7b\u578b\u53c2\u6570."),(0,r.kt)("h3",{id:"\u9884\u5b9a\u4e49\u7684\u6709\u6761\u4ef6\u7c7b\u578b"},"\u9884\u5b9a\u4e49\u7684\u6709\u6761\u4ef6\u7c7b\u578b"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Exclude<T, U>"),": \u4eceT\u4e2d\u671f\u521d\u53ef\u4ee5\u8d4b\u503c\u7ed9",(0,r.kt)("inlineCode",{parentName:"li"},"U"),"\u7684\u7c7b\u578b"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"Extract<T, U>"),": \u63d0\u53d6T\u4e2d\u53ef\u4ee5\u590d\u5236\u7ed9U\u7684\u7c7b\u578b"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"NonNullable<T>"),": \u4eceT\u4e2d\u5254\u9664null\u548cundefined\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"ReturnType<T>"),": \u83b7\u53d6\u51fd\u6570\u8fd4\u56de\u503c\u7c7b\u578b\u3002"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"InstanceType<T>"),": \u83b7\u53d6\u6784\u9020\u51fd\u6570\u7c7b\u578b\u7684\u5b9e\u4f8b\u7c7b\u578b\u3002")),(0,r.kt)("h2",{id:"\u6761\u4ef6\u7c7b\u578b"},"\u6761\u4ef6\u7c7b\u578b"),(0,r.kt)("p",null,"\u6761\u4ef6\u7c7b\u578b\u7684\u8868\u793a\u5982\u4e0b:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"T extends U ? X : Y\n")),(0,r.kt)("p",null,"\u8fd9\u91cc\u7684",(0,r.kt)("inlineCode",{parentName:"p"},"extend"),"\u662f\u4e00\u79cd\u7c7b\u578b\u5224\u65ad, \u7c7b\u4f3c\u4e8e",(0,r.kt)("inlineCode",{parentName:"p"},"typeof")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"declare function f<T extends boolean>(x: T): T extends true ? string : number;\n\n// Type is 'string | number'\nlet x = f(Math.random() < 0.5);\n//  ^ = let x: string | number\n")),(0,r.kt)("p",null,"\u5e76\u4e14\u8fd9\u79cd\u6761\u4ef6\u5224\u65ad\u662f\u53ef\u4ee5\u5d4c\u5957\u7684:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'type TypeName<T> = T extends string\n  ? "string"\n  : T extends number\n  ? "number"\n  : T extends boolean\n  ? "boolean"\n  : T extends undefined\n  ? "undefined"\n  : T extends Function\n  ? "function"\n  : "object";\n\ntype T0 = TypeName<string>;\n//   ^ = type T0 = "string"\ntype T1 = TypeName<"a">;\n//   ^ = type T1 = "string"\ntype T2 = TypeName<true>;\n//   ^ = type T2 = "boolean"\ntype T3 = TypeName<() => void>;\n//   ^ = type T3 = "function"\ntype T4 = TypeName<string[]>;\n//   ^ = type T4 = "object"\n')),(0,r.kt)("h3",{id:"\u5206\u5e03\u6761\u4ef6\u7c7b\u578b"},"\u5206\u5e03\u6761\u4ef6\u7c7b\u578b"),(0,r.kt)("p",null,"\u5bf9\u4e8e",(0,r.kt)("inlineCode",{parentName:"p"},"T extends U ? X : Y"),", \u5047\u5b9a",(0,r.kt)("inlineCode",{parentName:"p"},"T"),"\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"A | B | C"),". ts\u4f1a\u628a\u4ed6\u62c6\u89e3\u6210\u4e3a:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"(A extends U ? X : Y) \n  | (B extends U ? X : Y) \n  | (C extends U ? X : Y).\n")),(0,r.kt)("p",null,"\u4e0b\u9762\u662f\u4e00\u4e2a\u4f8b\u5b50:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'// \u5220\u9664T\u4e2d T, U\u90fd\u5b58\u5728\u7684\u5c5e\u6027\ntype Diff<T, U> = T extends U ? never : T;\n// \u83b7\u53d6T\u4e2d, T,U\u4e2d\u5b58\u5728\u7684\u5c5e\u6027\ntype Filter<T, U> = T extends U ? T : never;\n\ntype T1 = Diff<"a" | "b" | "c" | "d", "a" | "c" | "f">;\n//   ^ = type T1 = "b" | "d"\ntype T2 = Filter<"a" | "b" | "c" | "d", "a" | "c" | "f">; // "a" | "c"\n//   ^ = type T2 = "a" | "c"\ntype T3 = Diff<string | number | (() => void), Function>; // string | number\n//   ^ = type T3 = string | number\ntype T4 = Filter<string | number | (() => void), Function>; // () => void\n//   ^ = type T4 = () => void\n\n// \u5220\u9664T\u4e2d\u7684null\u548cundefined\ntype NotNullable<T> = Diff<T, null | undefined>;\n\ntype T5 = NotNullable<string | number | undefined>;\n//   ^ = type T5 = string | number\ntype T6 = NotNullable<string | string[] | null | undefined>;\n//   ^ = type T6 = string | string[]\n')),(0,r.kt)("p",null,"\u5728\u548c\u7c7b\u578b\u6620\u5c04\u7ed3\u5408\u4e00\u8d77\u4f7f\u7528\u7684\u65f6\u5019, \u6761\u4ef6\u7c7b\u578b\u975e\u5e38\u6709\u7528:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'type FunctionPropertyNames<T> = {\n  [K in keyof T]: T[K] extends Function ? K : never;\n}[keyof T];\ntype FunctionProperties<T> = Pick<T, FunctionPropertyNames<T>>;\n\ntype NonFunctionPropertyNames<T> = {\n  [K in keyof T]: T[K] extends Function ? never : K;\n}[keyof T];\ntype NonFunctionProperties<T> = Pick<T, NonFunctionPropertyNames<T>>;\n\ninterface Part {\n  id: number;\n  name: string;\n  subparts: Part[];\n  updatePart(newName: string): void;\n}\n\ntype T1 = FunctionPropertyNames<Part>;\n//   ^ = type T1 = "updatePart"\ntype T2 = NonFunctionPropertyNames<Part>;\n//   ^ = type T2 = "id" | "name" | "subparts"\ntype T3 = FunctionProperties<Part>;\n//   ^ = type T3 = {\n//       updatePart: (newName: string) => void;\n//   }\ntype T4 = NonFunctionProperties<Part>;\n//   ^ = type T4 = {\n//       id: number;\n//       name: string;\n//       subparts: Part[];\n//   }\n')),(0,r.kt)("p",null,"\u4e0e\u8054\u5408\u7c7b\u578b\u548c\u7c7b\u578b\u4ea4\u53c9\u76f8\u4f3c, \u6761\u4ef6\u7c7b\u578b\u65f6\u4e0d\u5141\u8bb8\u9012\u5f52\u5f15\u7528\u81ea\u5df1\u7684. \u4e0b\u9762\u5c31\u662f\u4e00\u4e2a\u9519\u8bef\u793a\u4f8b:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type ElementType<T> = T extends any[] ? ElementType<T[number]> : T; // Error\n")),(0,r.kt)("h3",{id:"\u6761\u4ef6\u7c7b\u578b\u4e2d\u7684\u7c7b\u578b\u63a8\u65ad"},"\u6761\u4ef6\u7c7b\u578b\u4e2d\u7684\u7c7b\u578b\u63a8\u65ad"),(0,r.kt)("p",null,"\u5728",(0,r.kt)("inlineCode",{parentName:"p"},"extends"),"\u6761\u4ef6\u7c7b\u578b\u7684\u5b50\u53e5\u4e2d, \u53ef\u4ee5\u7528",(0,r.kt)("inlineCode",{parentName:"p"},"infer"),"\u5f15\u5165\u8981\u63a8\u65ad\u7684\u7c7b\u578b\u53d8\u91cf\u7684\u58f0\u660e. ",(0,r.kt)("inlineCode",{parentName:"p"},"infer"),"\u540c\u4e00\u7c7b\u578b\u53d8\u91cf\u53ef\u80fd\u6709\u591a\u4e2a\u4f4d\u7f6e."),(0,r.kt)("p",null,"\u6bd4\u5982\u4e0b\u9762\u7684\u4ee3\u7801\u63d0\u53d6\u51fd\u6570\u7c7b\u578b\u7684\u8fd4\u56de\u7c7b\u578b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type ReturnType<T> = T extends (...args: any[]) => infer R ? R : any;\n")),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"infer"),"\u8868\u793a",(0,r.kt)("inlineCode",{parentName:"p"},"extends"),"\u6761\u4ef6\u8bed\u53e5\u4e2d\u5f85\u63a8\u65ad\u7684\u7c7b\u578b\u53d8\u91cf. "),(0,r.kt)("p",null,"\u6bd4\u5982\u8fd9\u4e2a\u51fd\u6570\u7684\u4f5c\u7528\u5c31\u662f\u63d0\u53d6\u51fd\u6570\u4e2d\u53c2\u6570\u7684\u7c7b\u578b:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type ParamType<T> = T extends (param: infer P) => any ? P : T;\n")),(0,r.kt)("p",null,"\u8868\u793a: \u5982\u679cT\u80fd\u8d4b\u503c\u7ed9",(0,r.kt)("inlineCode",{parentName:"p"},"(param: infer P) => any"),", \u5219\u7ed3\u679c\u662f",(0,r.kt)("inlineCode",{parentName:"p"},"(param: infer P) => any"),"\u7c7b\u578b\u4e2d\u7684\u53c2\u6570P, \u5426\u5219\u8fd4\u56de\u4e3aT"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"interface User {\n  name: string;\n  age: number;\n}\n\ntype Func = (user: User) => void;\n\ntype Param = ParamType<Func>; // Param = User\ntype AA = ParamType<string>; // string\n")),(0,r.kt)("p",null,"\u53ef\u4ee5\u5d4c\u5957\u6761\u4ef6\u7c7b\u578b\u6765\u5f62\u6210\u4e00\u4e9b\u5217\u7684\u987a\u5e8f\u6c42\u503c\u7684\u6a21\u5f0f\u5339\u914d:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type Unpacked<T> = T extends (infer U)[]\n  ? U\n  : T extends (...args: any[]) => infer U\n  ? U\n  : T extends Promise<infer U>\n  ? U\n  : T;\n\ntype T0 = Unpacked<string>;\n//   ^ = type T0 = string\ntype T1 = Unpacked<string[]>;\n//   ^ = type T1 = string\ntype T2 = Unpacked<() => string>;\n//   ^ = type T2 = string\ntype T3 = Unpacked<Promise<string>>;\n//   ^ = type T3 = string\ntype T4 = Unpacked<Promise<string>[]>;\n//   ^ = type T4 = Promise\ntype T5 = Unpacked<Unpacked<Promise<string>[]>>;\n//   ^ = type T5 = string\n")),(0,r.kt)("p",null,"\u4e0b\u9762\u8fd9\u4e2a\u793a\u4f8b\u6f14\u793a\u4e86\u540c\u65f6\u5b58\u5728\u591a\u4e2a\u5f85\u63a8\u65ad\u4f4d\u7f6e\u65f6\u5019\u4f1a\u751f\u6210\u8054\u5408\u7c7b\u578b:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type Foo<T> = T extends { a: infer U; b: infer U } ? U : never;\n\ntype T1 = Foo<{ a: string; b: string }>;\n//   ^ = type T1 = string\ntype T2 = Foo<{ a: string; b: number }>;\n//   ^ = type T2 = string | number\n")),(0,r.kt)("p",null,"\u540c\u6837\u7684, \u5728\u5f85\u63a8\u65ad\u4f4d\u7f6e\u4e2d\u9488\u5bf9\u540c\u4e00\u7c7b\u578b\u53d8\u91cf\u7684\u591a\u4e2a\u5019\u9009\u5c31\u4f1a\u5bfc\u81f4\u7c7b\u578b\u4ea4\u53c9:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"type Bar<T> = T extends { a: (x: infer U) => void; b: (x: infer U) => void }\n  ? U\n  : never;\n\ntype T1 = Bar<{ a: (x: string) => void; b: (x: string) => void }>;\n//   ^ = type T1 = string\ntype T2 = Bar<{ a: (x: string) => void; b: (x: number) => void }>;\n//   ^ = type T2 = never\n")),(0,r.kt)("p",null,"\u800c\u5bf9\u4e8e\u591a\u4e2a\u7b7e\u540d\u7684\u7c7b\u578b, \u6bd4\u5982\u91cd\u8f7d\u7684\u51fd\u6570\u8fdb\u884c\u63a8\u7b97\u7684\u65f6\u5019, \u5c06\u4ece\u6700\u540e\u4e00\u4e2a\u7b7e\u540d\u8fdb\u884c\u817f\u77ed. \u65e0\u6cd5\u57fa\u4e8e\u53c2\u6570\u7c7b\u578b\u5217\u8868\u6267\u884c\u91cd\u8f7d\u89e3\u6790:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"declare function foo(x: string): number;\ndeclare function foo(x: number): string;\ndeclare function foo(x: string | number): string | number;\n\ntype T1 = ReturnType<typeof foo>;\n//   ^ = type T1 = string | number\n")),(0,r.kt)("p",null,"\u5bf9\u4e8e\u5e38\u89c4\u7c7b\u578b\u53c2\u6570, \u4e0d\u80fd\u5728\u7ea6\u675f\u5b50\u53e5\u4e2d\u4f7f\u7528\u58f0\u660e:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type ReturnedType<T extends (...args: any[]) => infer R> = R;\n// 'infer' declarations are only permitted in the 'extends' clause of a conditional type.\n// Cannot find name 'R'.\n")),(0,r.kt)("p",null,"\u53ef\u4ee5\u8fd9\u6837\u4fee\u6539:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type AnyFunction = (...args: any[]) => any;\ntype ReturnType<T extends AnyFunction> = T extends (...args: any[]) => infer R\n  ? R\n  : any;\n")),(0,r.kt)("h2",{id:"\u5b9e\u7528\u7684\u7c7b\u578b\u51fd\u6570"},"\u5b9e\u7528\u7684\u7c7b\u578b\u51fd\u6570"),(0,r.kt)("h3",{id:"partialtype"},(0,r.kt)("inlineCode",{parentName:"h3"},"Partial<Type>")),(0,r.kt)("p",null,"\u5c06\u6240\u6709\u5c5e\u6027\u8bbe\u7f6e\u4e3a\u53ef\u9009"),(0,r.kt)("h3",{id:"readonlytype"},(0,r.kt)("inlineCode",{parentName:"h3"},"Readonly<Type>")),(0,r.kt)("p",null,"\u5c06\u6240\u6709\u5c5e\u6027\u90fd\u8bbe\u7f6e\u4e3a",(0,r.kt)("inlineCode",{parentName:"p"},"readonly")),(0,r.kt)("h3",{id:"recordkeystype"},(0,r.kt)("inlineCode",{parentName:"h3"},"Record<Keys,Type>")),(0,r.kt)("p",null,"\u5c06",(0,r.kt)("inlineCode",{parentName:"p"},"key"),"\u6620\u5c04\u5230",(0,r.kt)("inlineCode",{parentName:"p"},"type"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'interface PageInfo {\n  title: string;\n}\n\ntype Page = "home" | "about" | "contact";\n\nconst nav: Record<Page, PageInfo> = {\n  about: { title: "about" },\n  contact: { title: "contact" },\n  home: { title: "home" },\n};\n\nnav.about;\n//   ^(property) about: PageInfo\n')),(0,r.kt)("h3",{id:"picktype-keys"},(0,r.kt)("inlineCode",{parentName:"h3"},"Pick<Type, Keys>")),(0,r.kt)("p",null,"\u901a\u8fc7",(0,r.kt)("inlineCode",{parentName:"p"},"Keys"),"\u4e2d\u9009\u62e9\u5c5e\u6027\u96c6\u6765\u6784\u9020\u7c7b\u578b",(0,r.kt)("inlineCode",{parentName:"p"},"Type"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"interface Person {\n    name: string;\n    age?: number;\n}\n\ntype Person5 = Pick<Person, 'name'>;\n// Person5 === {name: string}\n")),(0,r.kt)("h3",{id:"omittype-keys"},(0,r.kt)("inlineCode",{parentName:"h3"},"Omit<Type, Keys>")),(0,r.kt)("p",null,"\u901a\u8fc7\u4ece\u4e2d\u9009\u62e9\u6240\u6709\u5c5e\u6027",(0,r.kt)("inlineCode",{parentName:"p"},"Type"),", \u7136\u540e\u79fb\u9664\u6765\u6784\u9020\u4e00\u4e2a\u7c7b\u578b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'interface Todo {\n  title: string;\n  description: string;\n  completed: boolean;\n}\n\ntype TodoPreview = Omit<Todo, "description">;\n\nconst todo: TodoPreview = {\n  title: "Clean room",\n  completed: false,\n};\n\ntodo;\n// ^ = const todo: Pick\n')),(0,r.kt)("h3",{id:"excludetype-excludedunion"},(0,r.kt)("inlineCode",{parentName:"h3"},"Exclude<Type, ExcludedUnion>")),(0,r.kt)("p",null,"\u4ece",(0,r.kt)("inlineCode",{parentName:"p"},"Type"),"\u4e2d\u5220\u9664\u8054\u5408\u6210\u5458\u4e2d\u7684\u5c5e\u6027\u6765\u6784\u9020\u7c7b\u578b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'type T0 = Exclude<"a" | "b" | "c", "a">;\n//    ^ = type T0 = "b" | "c"\ntype T1 = Exclude<"a" | "b" | "c", "a" | "b">;\n//    ^ = type T1 = "c"\ntype T2 = Exclude<string | number | (() => void), Function>;\n//    ^ = type T2 = string | number\n')),(0,r.kt)("h3",{id:"extracttype-union"},(0,r.kt)("inlineCode",{parentName:"h3"},"Extract<Type, Union>")),(0,r.kt)("p",null,"\u53d6\u4e24\u4e2a\u7c7b\u578b\u4e2d\u7684\u5e76\u96c6"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'type T0 = Extract<"a" | "b" | "c", "a" | "f">;\n//    ^ = type T0 = "a"\ntype T1 = Extract<string | number | (() => void), Function>;\n//    ^ = type T1 = () => void\n')),(0,r.kt)("h3",{id:"nonnullabletype"},(0,r.kt)("inlineCode",{parentName:"h3"},"NonNullable<Type>")),(0,r.kt)("p",null,"\u5220\u9664",(0,r.kt)("inlineCode",{parentName:"p"},"undiefined/null"),"\u7c7b\u578b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type T0 = NonNullable<string | number | undefined>;\n//    ^ = type T0 = string | number\ntype T1 = NonNullable<string[] | null | undefined>;\n//    ^ = type T1 = string[]\n")),(0,r.kt)("h3",{id:"parameterstype"},(0,r.kt)("inlineCode",{parentName:"h3"},"Parameters<Type>")),(0,r.kt)("p",null,"\u4ece\u51fd\u6570\u7c7b\u578b\u7684\u53c2\u6570\u4e2d\u4f7f\u7528\u7684\u7c7b\u578b\u6784\u9020\u4e00\u4e2a\u5143\u7ec4\u7c7b\u578bType"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type T1 = Parameters<(s: string) => void>;\n//    ^ = type T1 = [s: string]\n")),(0,r.kt)("h3",{id:"constructorparameterstype"},(0,r.kt)("inlineCode",{parentName:"h3"},"ConstructorParameters<Type>")),(0,r.kt)("p",null,"\u83b7\u53d6\u6784\u9020\u51fd\u6570\u4e2d\u7684\u7c7b\u578b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type T0 = ConstructorParameters<ErrorConstructor>;\n//    ^ = type T0 = [message?: string]\ntype T1 = ConstructorParameters<FunctionConstructor>;\n//    ^ = type T1 = string[]\ntype T2 = ConstructorParameters<RegExpConstructor>;\n//    ^ = type T2 = [pattern: string | RegExp, flags?: string]\ntype T3 = ConstructorParameters<any>;\n//    ^ = type T3 = unknown[]\n")),(0,r.kt)("h3",{id:"returntypetype"},(0,r.kt)("inlineCode",{parentName:"h3"},"ReturnType<Type>")),(0,r.kt)("p",null,"\u83b7\u53d6\u51fd\u6570\u7684\u8fd4\u56de\u7c7b\u578b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type T0 = ReturnType<() => string>;\n//    ^ = type T0 = string\n")),(0,r.kt)("h3",{id:"instancetypetype"},(0,r.kt)("inlineCode",{parentName:"h3"},"InstanceType<Type>")),(0,r.kt)("p",null,"\u8fd4\u56de\u6784\u9020\u51fd\u6570\u7c7b\u578bT\u7684\u5b9e\u4f8b\u7c7b\u578b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"class C {\n  x = 0;\n  y = 0;\n}\n\ntype T0 = InstanceType<typeof C>;\n//    ^ = type T0 = C\n")),(0,r.kt)("h3",{id:"requiredtype"},(0,r.kt)("inlineCode",{parentName:"h3"},"Required<Type>")),(0,r.kt)("p",null,"\u5c06\u6240\u6709\u7c7b\u578b\u8f6c\u6362\u4e3a\u5fc5\u9009"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"interface Props {\n  a?: number;\n  b?: string;\n}\n\nconst obj: Props = { a: 5 };\n")),(0,r.kt)("h3",{id:"thisparametertypetype"},(0,r.kt)("inlineCode",{parentName:"h3"},"ThisParameterType<Type>")),(0,r.kt)("p",null,"\u63d0\u53d6this\u4e2d\u7684\u53c2\u6570\u7c7b\u578b"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"function toHex(this: Number) {\n  return this.toString(16);\n}\n\nfunction numberToString(n: ThisParameterType<typeof toHex>) {\n  return toHex.apply(n);\n}\n")),(0,r.kt)("h3",{id:"omitthisparametertype"},(0,r.kt)("inlineCode",{parentName:"h3"},"OmitThisParameter<Type>")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"function toHex(this: Number) {\n  return this.toString(16);\n}\n\nconst fiveToHex: OmitThisParameter<typeof toHex> = toHex.bind(5);\n\nconsole.log(fiveToHex());\n")),(0,r.kt)("p",null,"\u4ece",(0,r.kt)("inlineCode",{parentName:"p"},"this"),"\u4e2d\u5220\u9664",(0,r.kt)("inlineCode",{parentName:"p"},"Type")),(0,r.kt)("h3",{id:"thistypetype"},(0,r.kt)("inlineCode",{parentName:"h3"},"ThisType<Type>")),(0,r.kt)("p",null,"\u4f5c\u4e3a\u4e0a\u4e0b\u6587this\u7684\u6807\u8bb0"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"type ObjectDescriptor<D, M> = {\n  data?: D;\n  methods?: M & ThisType<D & M>; // Type of 'this' in methods is D & M\n};\n\nfunction makeObject<D, M>(desc: ObjectDescriptor<D, M>): D & M {\n  let data: object = desc.data || {};\n  let methods: object = desc.methods || {};\n  return { ...data, ...methods } as D & M;\n}\n\nlet obj = makeObject({\n  data: { x: 0, y: 0 },\n  methods: {\n    moveBy(dx: number, dy: number) {\n      this.x += dx; // Strongly typed this\n      this.y += dy; // Strongly typed this\n    },\n  },\n});\n\nobj.x = 10;\nobj.y = 20;\nobj.moveBy(5, 5);\n")),(0,r.kt)("h2",{id:"\u6cdb\u578b\u7684\u5e94\u7528"},"\u6cdb\u578b\u7684\u5e94\u7528"),(0,r.kt)("h3",{id:"\u81ea\u52a8\u68c0\u67e5\u7ed3\u6784"},"\u81ea\u52a8\u68c0\u67e5\u7ed3\u6784"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"function get<T, K extends keyof T>(p: T, key: K): any {\n    return p[key]\n}\n")),(0,r.kt)("h3",{id:"\u6cdb\u578b\u7c7b"},"\u6cdb\u578b\u7c7b"),(0,r.kt)("p",null,"\u6cdb\u578b\u4e0d\u4ec5\u5e94\u7528\u4e8e\u51fd\u6570\u7b7e\u540d, \u4e5f\u53ef\u4ee5\u7528\u6765\u5b9a\u4e49\u6cdb\u578b\u7c7b. \u8fd9\u63d0\u4f9b\u4e86\u5c06\u901a\u7528\u903b\u8f91\u5c01\u88c5\u5230\u53ef\u590d\u7528\u6784\u9020\u4e2d\u7684\u80fd\u529b. "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'abstract class Animal {\n    handle() { throw new Error("Not implemented") }\n}\n\nclass Horse extends Animal{\n    color: string\n    handle() {\n        console.log("Riding the horse...")\n    }\n}\n\nclass Dog extends Animal{\n    name: string \n    handle() {\n        console.log("Feeding the dog...")\n    }\n}\n\nclass Handler<T extends Animal> {\n    animal: T\n\n    constructor(animal: T) {\n        this.animal = animal\n    }\n\n    handle() {\n        this.animal.handle()\n    }\n}\n\nclass DogHandler extends Handler<Dog> {}\nclass HorseHandler extends Handler<Horse> {}\n')),(0,r.kt)("h3",{id:"\u53ef\u53d8\u53c2\u6570\u5143\u7ec4variadic-tuples"},"\u53ef\u53d8\u53c2\u6570\u5143\u7ec4(Variadic Tuples)"),(0,r.kt)("p",null,"\u666e\u901a\u7684\u5143\u7ec4\u5b9a\u4e49:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'type MyTuple = [string, string, number]\n\nlet myList:MyTuple = ["Fernando", "Doglio", 37]\n')),(0,r.kt)("p",null,"\u5229\u7528\u6cdb\u578b\u7684\u53ef\u53d8\u53c2\u6570\u5143\u7ec4:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'type MyTuple<T extends unknown[]> = [string, string, ...T, number]\n\nlet myList:MyTuple<[boolean, number]> = ["Fernando", "Doglio", true, 3, 37]\nlet myList:MyTuple<[number, number, number]> = ["Fernando", "Doglio", 1,2,3,4]\n')),(0,r.kt)("h2",{id:"\u53c2\u8003"},"\u53c2\u8003"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://mp.weixin.qq.com/s/WE8cJlfv9t__vddufKI2mw"},"TypeScript\uff1a\u4e00\u4e2a\u597d\u6cdb\u578b\u7684\u4ef7\u503c"))))}u.isMDXComponent=!0}}]);